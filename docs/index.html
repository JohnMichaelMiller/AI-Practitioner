<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Home | AI Practitioner</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Home" />
<meta name="author" content="John Michael Miller" />
<meta property="og:locale" content="en" />
<meta name="description" content="jMM’s AI Practitioner Blog" />
<meta property="og:description" content="jMM’s AI Practitioner Blog" />
<link rel="canonical" href="https://blog.pdata.com/" />
<meta property="og:url" content="https://blog.pdata.com/" />
<meta property="og:site_name" content="AI Practitioner" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Home" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","author":{"@type":"Person","name":"John Michael Miller"},"description":"jMM’s AI Practitioner Blog","headline":"Home","name":"AI Practitioner","url":"https://blog.pdata.com/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://blog.pdata.com/feed.xml" title="AI Practitioner" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">AI Practitioner</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home"><h1 class="page-heading">Home</h1><h1 id="ai-practitioner">AI Practitioner</h1>

<p>Welcome to jMM’s AI Practitioner Blog.</p>
<h2 class="post-list-heading">Posts</h2>
    <ul class="post-list"><li><span class="post-meta">Jan 20, 2026</span>
        <h3>
          <a class="post-link" href="/WTAIP/">
            Welcome to the AI Practitioner&#39;s Blog
          </a>
        </h3><p>This is the retro-inaugural post of the AI Practitioner’s Blog. When I started the blog I jumped right into the content without a proper introduction. While I been in software development for many years, my only qualifications for writing a blog about AI is my experiences using the technology in anger creating real-world applications.</p>

<p>When I started the blog, my goal was to create a resource for professionals interested in the practical applications of artificial intelligence. By sharing my experences I hoped to provide insights and guidance to those looking to leverage AI in their own projects and organizations.</p>

<p>Feel free to share your thoughts and experiences on AI Assisted Software Development.</p>

</li><li><span class="post-meta">Dec 30, 2025</span>
        <h3>
          <a class="post-link" href="/AIAGSD3/">
            AI Assisted Greenfield Software Development, Part 3: Generating the Process Instruction Files
          </a>
        </h3><p>This is the 3rd post in the series on AI assisted greenfield software development. This post builds on the first <a href="https://www.codemag.com/blog/AIPractitioner/AIAGSD1" target="_blank">AI-Assisted Greenfield Software Development, Part 1: Business Requirements</a> and subsequent posts. If you haven’t read these posts, you might consider starting there.</p>

<p>In Part 1 we defined the high-level business requirements and in Part 2 we started building out the scaffolding supporting AI code generation. In part 3, we’ll continue to add guidance for AI code generation. Starting with project guidance and process definitions, we’ll create prompts that create project overview instructions, AI code generation guidance, and Git workflow instructions. We’ll use these prompt’s to create instruction files and then check the guidance for errors and redundancies.</p>

<p>To achieve quality in AI code generation you need to constrain the AI model and focus it on what you intend to accomplish. Unconstrained, AI has many options to choose from and the chances that the AI will choose the wrong option are the greatest. This is where models are most non-deterministic and subject to hallucinations and errors.</p>

<p>By specifying custom chat-modes, prompts and instructions, you set the expectations for the intended output and how it’s produced. As long as the instructions are clear and unambiguous, the model will respect the constraints. This isn’t about slowing down; it’s about moving fast <em>safely.</em></p>

<h2 id="provenance-is-king-ai-assisted-outputinstructionsmd">Provenance Is King (<code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code>)</h2>

<p><a href="https://www.codemag.com/blog/AIPractitioner/AIAGSD2">In Part 2</a> we added our <strong>AI Provenance Policy.</strong> We can no longer accept code if we don’t know where it came from. We’ve defined a metadata schema that <em>must</em> accompany every AI-generated artifact. Whether it’s a Python script, a documentation file, or a diagram, it needs a “birth certificate.” We also want to record the conversation with AI that led to the generation of an artifact and a summery of the context used in producing the artifact. The AI assisted output instructions ensure that this provenance is recorded for standards compliance and as breadcrumbs for our AI generation effort. We’ll see this in all generated artifacts from here on.</p>

<h2 id="the-development-life-cycle-ai-dev-processinstructionsmd">The Development Life Cycle (<code class="language-plaintext highlighter-rouge">ai-dev-process.instructions.md</code>)</h2>

<p>In addition to the AI output instructions, we’re adding instructions that formalizes the dance between <strong>human</strong> and <strong>machine.</strong> It’s no longer just “generate and commit.” This file introduces a specific workflow:</p>

<ol>
  <li><strong>AI Code Generation:</strong> Must include provenance and pass existing tests.</li>
  <li><strong>AI Code Review::</strong> The AI reviews its own work (or another agent’s work) for security, performance, and style <em>before</em> a human sees it.</li>
  <li><strong>Human Code Review:</strong> We focus on high-level architecture and intent, letting the AI handle the linting and boilerplate checks.</li>
</ol>

<p>We also define <strong>Quality Gates.</strong> You can’t merge unless you have:</p>

<ul>
  <li>Technical Gates (CI/CD passing)</li>
  <li>AI Review (Automated pass)</li>
  <li>Human Approval (Final sign-off)</li>
</ul>

<p>This process can be enhanced to increase the ability of AI to produce quality code. For example:</p>

<ul>
  <li>Use a different model to review the code than the model that generated it.</li>
  <li>Use three models to review the code and only pass the review if two of the three models agree on the quality of the code.</li>
  <li>Use multiple models to generate code and have AI review the pros and cons of each implementation.</li>
</ul>

<p>Models have biases, if only to their own work. By utilizing multiple models you mitigate for these biases and the different perspectives can add to the robustness of the implementations.</p>

<p>Here is a link to the
<a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/instructions/ai-dev-process.instructions.md" target="_blank"><code class="language-plaintext highlighter-rouge">ai-dev-process.instructions.md</code></a> file.</p>

<p>The AI-assisted software development process further constrains what the AI can do when working with code in the project. It’s important to note that these constraints only apply when AI is actively working. If you want these constrains to apply to human developers on your team, you’ll want to add gates to the repository to enforce the constraints across the board.</p>

<h2 id="git-workflow-integration-git-workflowinstructionsmd">Git Workflow Integration (<code class="language-plaintext highlighter-rouge">git-workflow.instructions.md</code>)</h2>

<p>Another process we should nail down is how AI generated code is incorporated into the life cycle. While AI generated code should follow the same process as developer written code, there are some differences we might want to require.</p>

<p>In the Git Workflow instructions file, we’ve required a <strong>trunk-based Development (TBD)</strong> model. TBD is the practice of merging small, frequent updates to a single core branch (often called main or trunk), rather than maintaining long-lived feature branches. By requiring developers and AI agents to merge code at least daily, we minimize the “drift” that leads to catastrophic merge conflicts. It forces a discipline of continuous integration, ensuring the codebase is always in a deployable state. It relies heavily on automated testing to prevent breaking the build for everyone.</p>

<p>While we’ve chosen TBD for speed, <a href="https://www.gitkraken.com/learn/git/git-flow" target="_blank">Git Flow</a> remains a popular alternative, utilizing a strict structure of develop, release, and feature branches that is excellent for managed release cycles but often cumbersome for rapid iteration. <a href="https://docs.github.com/en/get-started/using-github/github-flow" target="_blank">GitHub Flow</a> is another common contender, simplifying Git Flow by deploying directly from feature branches, but for our high-velocity AI workflow, the immediate integration of TBD is essential. If you prefer Git Flow or GitHub flow you can modify the prompt that generated the instruction file (the prompts are covered later in this post) and create a Git Flow or GitHub specific instruction file.</p>

<p>Here are the AI specific features of the workflow:</p>

<ul>
  <li><strong>AI branches:</strong> We use a specific naming convention <code class="language-plaintext highlighter-rouge">ai/&lt;chat-id&gt;-&lt;description&gt;</code>. This makes it instantly obvious which branches are machine-generated.</li>
  <li><strong>Commit messages:</strong> Must reference the Chat ID and Model.</li>
  <li><strong>Orphan cleanup:</strong> AI branches are ephemeral. If they aren’t merged in 7 days, they are deleted.</li>
</ul>

<p>Here is a link to the <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/instructions/git-workflow.instructions.md" target="_blank"><code class="language-plaintext highlighter-rouge">git-workflow.instructions.md</code></a> file.</p>

<p>Like the AI development instructions, some of the requirement enforcement should be implemented through repo or pipeline configuration. This is called out in the <strong>Enforcement</strong> section of the instruction file.</p>

<h2 id="the-big-picture-project-overviewinstructionsmd">The Big Picture (<code class="language-plaintext highlighter-rouge">project-overview.instructions.md</code>)</h2>

<p>Finally, we created the project overview instructions to tie everything together. It acts as the entry point for any new agent (or human) joining the project, pointing them to the standards and critical files they need to respect.</p>

<p>Here is a link to the <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/instructions/project-overview.instructions.md" target="_blank"><code class="language-plaintext highlighter-rouge">project-overview.instructions.md</code></a> file.</p>

<p>The project overview instructions are a snapshot of the project in time. As the project evolves we’ll update the project overview so that it always contains the current state of the project.</p>

<h2 id="checking-the-context">Checking the Context</h2>

<p>When adding or changing instruction files it’s important to verify that all of the instructions are complimentary. The <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/prompts/check-context.prompt.md" target="_blank">check-context.prompt.md</a> prompt file examines the current context for conflicting instructions, factual inconsistencies, logical contradictions, priority conflicts, technical incompatibilities, terminology gaps, and redundancies.</p>

<p>It’s a good idea to submit this prompt to a different model than was used to generate the instruction files to avoid the model favoring it’s own output.</p>

<h2 id="why-this-matters">Why This Matters</h2>

<p>By codifying these rules into <code class="language-plaintext highlighter-rouge">.instructions.md</code> files, we are doing something powerful: <strong>We are programming the process.</strong></p>

<p>When we load these instructions into our AI context, the AI <em>knows</em> how to behave. It knows it needs to generate metadata. It knows it needs to create a log entry. It becomes a compliant member of the team, rather than a chaotic tool.</p>

<h2 id="the-prompt-files">The Prompt Files</h2>

<p>Looking at the metadata for each of these artifacts you can see that a prompt file was used to create each instruction file. The prompt files, in concert with the <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> instructions, define the contents of the generated instruction files.</p>

<p>While the instructions could have been created directly, the benefit of using a prompt file is that it codifies the structure and contents of the generated instruction files. If the process or tooling changes, the prompt can be modified and the instruction files updated.</p>

<p>This helps to maintain the instruction files. For example, if the Git process changes from trunk-based to Git Flow or GitHub Flow, the prompt can be updated and the instructions regenerated.</p>

<p>More importantly, the process of creating the instruction files is documented and committed to the repo.</p>

<p>How were the prompt files created? With AI assistance, of course. Using a simple prompt like:</p>

<p><em>Create a prompt file to create an Project Overview instruction file containing the high level context for the project. The instruction file should be optimized for AI agents and to minimize the token requirements.</em></p>

<p>When submitted, AI will create a prompt file that conforms to the <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> instructions and meets the intent of creating the project overview instructions.</p>

<p>Here are links to the prompt files that created the instruction files: <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/prompts/create-ai-dev-process.prompt.md" target="_blank"><code class="language-plaintext highlighter-rouge">create-ai-dev-process.prompt.md</code></a>, <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/prompts/create-git-workflow-instructions.prompt.md" target="_blank"><code class="language-plaintext highlighter-rouge">create-git-workflow-instructions.prompt.md</code></a>, and <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b/blob/Part-Three/.github/prompts/create-project-overview.prompt.md" target="_blank"><code class="language-plaintext highlighter-rouge">create-project-overview.prompt.md</code></a></p>

<h2 id="whats-next">What’s Next?</h2>

<p>This concludes the work of establishing the core instructions we need and moves us closer to starting an implementation. In Part 4 we’ll add instructions that define the architecture and the architecture implementation. Establishing a path that the AI can follow when implementing the solution.</p>

<p>If you’re interested in seeing the files, you can find them in the <a href="https://github.com/johnmillerATcodemag-com/zeus.academia.3b" target="_blank">Academia GitHub repository</a>. If you like to follow along with your own implementation, fork this repo and use the fork to build you own implementation.</p>

<h2 id="feedback-loop">Feedback Loop</h2>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h3 id="disclaimer">Disclaimer</h3>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li>Write a blog post describing the changes made to the Part-Three branch of the <code class="language-plaintext highlighter-rouge">zeus.academia.3b</code> repo</li>
  <li>Write a paragraph explaining trunk-based development. What are other popular methods?</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/AIAGSD3">post</a></small></small></small></p>
</li><li><span class="post-meta">Dec 1, 2025</span>
        <h3>
          <a class="post-link" href="/WTBD/">
            What&#39;s the Big Deal?
          </a>
        </h3><p>I’ve been reading posts describing AI-assisted software development as revolutionary. As if something fundamental has changed. While this take is understandable, in my view, it misses the mark. In my opinion programming hasn’t changed, but how we go about it has changed, again. In this post I’ll compare programming’s past, present and future and talk about what has changed and what hasn’t. Let’s first look at the past.</p>

<h2 id="a-brief-history-of-programming-innovations-the-past">A Brief History of Programming Innovations (The Past)</h2>

<p>Ever since the first computer was booted, there has been a need for coders to instruct the computer to get it to do something useful. This need has not changed and likely, will never change. What has changed is how coders instruct the computer. Over the decades, programming has evolved through several major innovations, each enabled by new technologies that transformed how humans express intent to machines. Below is a brief overview of when these innovations and their enabling technologies became mainstream.</p>

<h3 id="machine-code--assembly-1940s1940s">Machine Code &amp; Assembly (1940s–1940s)</h3>

<p>Machine code was the raw binary language of early computers, executed directly by hardware built on vacuum tubes and electro-mechanical relays. Programs were entered through physical means: flipping panel switches, plugging cables, feeding punched cards into IBM readers, or threading perforated paper tape into tape readers. These input devices were the enabling technologies that allowed binary instructions to be stored and executed. Programming was a mechanical ritual defined by the hum of machinery, the clatter of card punches, and the whir of tape readers.</p>

<p>Assembly language introduced symbolic mnemonics like MOV, ADD, and JMP to replace raw binary. Assemblers—software tools that translated these mnemonics into machine code—were the enabling technology that made this possible. While programmers still thought in terms of registers and memory addresses, assembly reduced the burden of direct binary coding. It remains mainstream today in embedded systems, operating system kernels, and performance-critical applications.</p>

<h3 id="high-level-languages-1950s-1970s">High-Level Languages (1950s-1970s)</h3>

<p>High-level languages abstracted away hardware details, allowing humans to write code in math-like or business-oriented syntax. This leap was enabled by compilers and interpreters, which translated human-readable instructions into machine code. FORTRAN (1957) pioneered scientific programming, COBOL (1959) became mainstream in business and government, and C (1972) spread with UNIX thanks to portable compilers. The clack of typewriter-style terminals replaced the grind of card punches, shifting programming from physical manipulation to linguistic expression.</p>

<h3 id="structured--object-oriented-programming-1970s-1980s">Structured &amp; Object-Oriented Programming (1970s-1980s)</h3>

<p>Structured and object-oriented programming emphasized modularity, reuse, and abstraction. Compiler innovations enabled structured paradigms in Pascal (1970), while object-oriented compilers supported inheritance and polymorphism in C++ (1985). These enabling technologies made modular, reusable code possible, while developers worked with CRT monitors glowing green text and floppy disks snapping into drives</p>

<h3 id="ides--libraries-1990s">IDEs &amp; Libraries (1990s)</h3>

<p>Integrated development environments (IDEs) combined compilers, debuggers, and editors into graphical interfaces. Visual Studio was enabled by faster processors, GUI tool-kits, and extensible plug-in architectures. Java introduced the JVM in 1995, a virtual machine that allowed “write once, run anywhere.” Reusable libraries and frameworks amplified productivity by abstracting common functionality. The tactile experience shifted to mouse clicks, drag-and-drop interfaces, and the buzz of desktop towers under desks.</p>

<h3 id="web--scripting-languages-late-1990s-2000s">Web &amp; Scripting Languages (Late 1990s-2000s)</h3>

<p>Web and scripting languages thrived thanks to browser engines, dynamic interpreters, and frameworks. JavaScript became mainstream with Netscape (1995) and later engines like V8 (2008) powered dynamic web applications. Python (first released in 1991) gained widespread adoption for web development in the 2000s and later dominated data science. Eclipse IDE (2001) provided powerful development environments. Ruby’s Rails framework (2004) abstracted web complexity, enabling rapid development. Lightweight editors and laptops made coding portable, fueling the sensory experience of programming in coffee shops and classrooms</p>

<h3 id="cloud-apis-and-low-code-platforms-2010s">Cloud, APIs, and Low-Code Platforms (2010s)</h3>

<p>Cloud computing, APIs, and low-code platforms transformed programming into orchestration. Virtualization and containerization (Docker, Kubernetes) enabled scalable infrastructure. REST and GraphQL APIs allowed modular integration, while low-code platforms like Mendix, OutSystems, and PowerApps used visual compilers to abstract coding. These enabling technologies shifted programming from hardware-bound tasks to swiping, clicking, and dragging in browser dashboards and they remain mainstream today.</p>

<h2 id="the-modern-mainstream-coding-experience-present">The Modern Mainstream Coding Experience (Present)</h2>

<p>The modern mainstream coding experience interprets intent by bridging human goals with machine execution through layers of abstraction. Developers no longer need to think in terms of raw hardware instructions; instead, they express intent in higher-level languages, frameworks, and APIs. Compilers, interpreters, and virtual machines translate this intent into executable code, while libraries and cloud services provide ready-made building blocks that align with common patterns. The act of coding is less about micromanaging hardware and more about shaping logic, workflows, and integrations that reflect human objectives.</p>

<h3 id="ai-assisted-coding-future">AI-Assisted Coding (Future)</h3>

<p>AI-assisted coding is enabled by large language models trained on vast amounts of code, contextual intent recognition, and integration into IDEs. Tools like GitHub Copilot, CodeWhisperer, and Tabnine embed AI directly into workflows. The enabling technology here is the LLM itself, which translates natural language into executable code. Programming has become dialogue—developers express goals in plain language, and AI generates code, tests, and documentation.</p>

<p>For example, instead of manually writing a function to validate email addresses with regex patterns, error handling, and edge cases, a developer can simply prompt: “Create a function that validates email addresses and returns helpful error messages.” The AI generates the complete implementation, including the regex pattern, input validation, and descriptive error messages. The developer then reviews, tests, and refines the output. What previously required searching documentation, writing boilerplate, and debugging syntax now happens through conversational iteration.</p>

<h2 id="programming-has-always-been-about-intent">Programming has Always Been About Intent</h2>

<p>From punch cards to Python, the core idea has stayed the same: humans express intent, machines execute it. Early programmers had to speak in binary or assembly. Then came higher-level languages like C, Java, and Python, which abstracted away the low-level details. What has changed is how coders express intent so that machines can execute it.</p>

<h3 id="natural-language-coding-is-a-paradigm-shift">Natural Language Coding Is a Paradigm Shift</h3>

<p>The real shift isn’t just accessibility, it’s responsibility. Until now, it was solely the coder’s job to translate intent (business requirements, industry policies, government regulations) into executable code. That translation required fluency in syntax, architecture, and tooling.</p>

<p>Now, intent can be expressed in natural language. AI can interpret that context to generate machine-executable instructions. This doesn’t democratize coding so much as it re-positions the boundary between domain expertise and implementation. The programmer becomes a curator of context, a validator of output, and a steward of alignment between human goals and machine behavior.</p>

<h3 id="ai-understands-what-you-meannot-just-what-you-say">AI Understands What You Mean—Not Just What You Say</h3>

<p>AI doesn’t just parse commands—it understands intent. You can say “make this faster,” “add error handling,” or “log the output,” and AI will revise the code accordingly. This conversational loop mirrors how humans collaborate, making development more fluid, iterative, and intuitive.</p>

<p>It also unlocks new modes of interaction: sketches, examples, test cases, bug reports. AI can interpret these as expressions of intent and generate code accordingly. This expands the number of ways developers can express goals and accelerates problem-solving across disciplines.</p>

<h3 id="its-just-another-toollike-ides-compilers-and-libraries">It’s Just Another Tool—Like IDEs, Compilers, and Libraries</h3>

<p>Every generation of developers has used tools to amplify their productivity. IDEs gave us auto-complete and debugging. Libraries gave us reusable components. AI gives us intelligent scaffolding, pattern recognition, and code generation. AI is not replacing developers; it’s helping them move faster and think bigger.</p>

<h3 id="verification-still-matters">Verification Still Matters</h3>

<p>Just like with compilers and frameworks, AI-generated code still needs testing, review, and validation. Developers remain responsible for architecture, correctness, security, and ethics. The shift is in how we express our goals, not in whether we need to think critically.</p>

<h3 id="the-future-is-still-intent-driven-development">The Future Is Still Intent-Driven Development</h3>

<p>In a real sense, AI assistance is just another improvement in the long line of improvements in how we write software. The goal remains the same, getting computers to do what we need them to do. Instead of writing and debugging code, we’re creating prompts and refining context to guide the AI in implementing our intent. Like with all of the improvements to date we need to learn how to effectively leverage the new technology to achieve our aims.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The narrative of AI as a revolutionary force in programming overlooks a fundamental truth: programming has always been about translating human intent into machine action. From the earliest days of flipping switches and punching cards to today’s natural language interactions with AI, the core challenge remains unchanged, bridging the gap between what we want and what machines can do. What evolves is not the essence of programming, but the sophistication of our tools for expressing intent. AI-assisted coding represents the latest chapter in this ongoing story, offering more intuitive ways to communicate with computers while preserving the essential human responsibilities of design, validation, and ethical oversight. As we embrace this new paradigm, we’re not abandoning programming, we’re refining it, making it more accessible and efficient while keeping human creativity and judgment at its center.</p>

<h2 id="feedback-loop">Feedback Loop</h2>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h3 id="disclaimer">Disclaimer</h3>

<p>AI contributed to the writing of this blog post, but humans reviewed it, refined it, and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li>Support this thesis: Using AI to write code is no different then when programming first became a thing. You are giving the computer instructions in order to get it to do what you want.</li>
  <li>Add the point, the ability to code in natural language is a game changer.</li>
  <li>Add the point, the ability of AI to understand intent is a game changer.</li>
  <li>Add a section in the beginning that describes the major innovations in how computers are programmed.</li>
  <li>Include the physical act (flipping panel switches, punching cards, punching paper tape) required to program the computer. Make these separate points: “Machine Code &amp; Assembly (1940s–1950s)”</li>
  <li>Break these points into sections and include the year when they became mainstream technologies</li>
  <li>Add dates these technologies became mainstream</li>
  <li>Apply this approach to the rest of the post</li>
  <li>Move the Assembly language point to it’s own section</li>
  <li>Cloud, APIs, and Low Code have not fallen out of the mainstream in the 20’s. Make sure all currently mainstream tech is dated as such</li>
  <li>For each section, such as Machine Code (1940s–1950s), instead of listing the Enabling technologies, describe the technology (Machine Code) and include the enabling technologies in the description</li>
  <li>Every technology except for Machine Code is currently being used. Drop the until dates</li>
  <li>Drop the until date. Machine Code (1940s–1950s) should be: Machine Code (1940s)</li>
  <li>In two paragraphs, describe how the modern mainstream coding experience interprets intent?</li>
</ul>
</li><li><span class="post-meta">Sep 24, 2025</span>
        <h3>
          <a class="post-link" href="/AIAGSD2/">
            AI-Assisted Greenfield Software Development, Part 2: Core Instructions
          </a>
        </h3><p>This is the second post in the series on AI assisted greenfield software development. This post builds on the first post <a href="https://www.codemag.com/blog/AIPractitioner/AIAGSD1" target="_blank">AI-Assisted Greenfield Software Development - Part 1 Business Requirements</a>. If you haven’t read that post, you might want to start there.</p>

<p>In this post I’ll cover the instructions, prompts, and chat modes I used to start to lay down the guidance for turning requirements into code. These files are critical for controlling the AI output and having a comprehensive set of instructions, prompts, and chat modes greatly increase the chances of getting AI to produce something usable.</p>

<h3 id="github-copilot-instruction-files">GitHub Copilot Instruction Files</h3>

<p>Instruction files provide detailed guidance for Copilot to follow when generating code. They define the rules, best practices, and constraints for specific tasks or domains. These files ensure consistency and quality in AI-generated outputs.</p>

<h3 id="github-copilot-prompt-files">GitHub Copilot Prompt Files</h3>

<p>Prompt files are used to define the context and objectives for Copilot in a specific session. They include the task description, expected output format, and any additional parameters to guide the AI in generating relevant and actionable content.</p>

<h3 id="github-copilot-chat-mode-files">GitHub Copilot Chat Mode Files</h3>

<p>Chat mode files configure Copilot’s behavior in a specific chat mode. They define the tools available, the model to use, and the overall purpose of the session. These files enable Copilot to act as a specialized assistant tailored to the needs of the project.</p>

<p>For more on instruction files, see <a href="https://www.codemag.com/blog/AIPractitioner/SIWT" target="_blank">Sharing Instructions with the Team</a></p>

<h3 id="relationships-between-chat-modes-prompts-and-instruction-files">Relationships Between Chat Modes, Prompts, and Instruction Files</h3>

<p><img src="../assets/images/2025-09-24/Chatmodes-Prompts-Instructions.png" alt="Chatmodes-Prompts-Instructions.png" /></p>

<p>Chat mode files configure the behavior of the AI by defining tools, models, and session-specific parameters. These chat modes use prompt files to guide the AI in generating specific outputs, such as instruction files, prompts, and generated code. Instruction files, in turn, provide detailed guidance for implementing the solution, ensuring consistency and adherence to best practices. Together, these components form a cohesive workflow that bridges high-level configuration with actionable implementation.</p>

<h2 id="overview-of-core-files">Overview of Core Files</h2>

<p>In this post I’ll cover one chat mode file, one prompt file, and four instruction files that are core to the framework I created to help implement the Academia solution. These files are not domain specific and can be easily used in other projects.</p>

<h2 id="the-ai-assisted-outputinstructionsmd-instruction-file">The <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> Instruction File</h2>

<p>The <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> file is a comprehensive guide for ensuring the provenance, quality, and audit-ability of AI-generated artifacts. It defines the metadata requirements, workflows, and enforcement mechanisms necessary to maintain consistency and accountability in AI-assisted outputs. This file is critical for projects that rely on AI to generate code, documentation, or other artifacts, as it provides a structured approach to managing and tracking AI contributions.</p>

<p>Below is the metadata for the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> file followed by the full content of the file itself. The metadata is explained in detail in the instruction file.</p>

<hr />

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-3.5-sonnet@2024-10-22"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-assisted-output-policy-2025-10-15"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create comprehensive AI provenance and logging policy for</span>
  <span class="s">all AI-assisted outputs in the repository, defining required</span>
  <span class="s">metadata, workflow, and enforcement.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-15T13:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-15T13:45:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">policy</span><span class="nv"> </span><span class="s">design"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:20:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">workflow</span><span class="nv"> </span><span class="s">specification"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">template</span><span class="nv"> </span><span class="s">creation"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:45:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/15/ai-assisted-output-policy-2025-10-15/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">.github/prompts/create-ai-assisted-output-instructions.prompt.md"</span>
<span class="na">applyTo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">**/*"</span>
</code></pre></div></div>

<hr />

<h1 id="ai-assisted-output-instructions">AI-Assisted Output Instructions</h1>

<p>This policy keeps AI-generated artifacts audit-able with minimal overhead. Follow it for all code, docs, diagrams, tests, or data touched by an AI assistant.</p>

<h2 id="quick-obligations">Quick Obligations</h2>

<ul>
  <li>Always work inside an active chat with a unique <code class="language-plaintext highlighter-rouge">chat_id</code>; block output otherwise.</li>
  <li>Capture the exact <code class="language-plaintext highlighter-rouge">provider/model@version</code> shown by the tool before generating content.</li>
  <li>Embed provenance metadata (front matter or sidecar) including the raw prompt and timestamps.</li>
  <li>Store full chat logs under <code class="language-plaintext highlighter-rouge">ai-logs/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;chat-id&gt;/</code> with <code class="language-plaintext highlighter-rouge">conversation.md</code> and <code class="language-plaintext highlighter-rouge">summary.md</code>.</li>
  <li>Record task duration, keep README entries for notable new artifacts, and run the checklists below before committing.</li>
</ul>

<h2 id="metadata-placement">Metadata Placement</h2>

<ul>
  <li>Markdown or formats with front matter: embed YAML at the top of the file.</li>
  <li>Non-front-matter formats: create <code class="language-plaintext highlighter-rouge">&lt;artifact&gt;.meta.md</code> with the same fields.</li>
  <li>Use lowercase file paths; never create sidecars when front matter is possible.</li>
</ul>

<h2 id="canonical-metadata-fields">Canonical Metadata Fields</h2>

<p>Every AI-assisted artifact <strong>must</strong> include:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ai_generated: true</code></li>
  <li><code class="language-plaintext highlighter-rouge">model: "&lt;provider&gt;/&lt;model&gt;@&lt;version&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">operator: "&lt;github-username&gt;"</code> (must be the GitHub username, e.g., “johnmillerATcodemag-com”)</li>
  <li><code class="language-plaintext highlighter-rouge">chat_id: "&lt;chat-id&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">prompt: |</code> + exact user prompt</li>
  <li><code class="language-plaintext highlighter-rouge">started</code>, <code class="language-plaintext highlighter-rouge">ended</code> (ISO8601)</li>
  <li><code class="language-plaintext highlighter-rouge">task_durations:</code> list of <code class="language-plaintext highlighter-rouge">{task, duration}</code> entries</li>
  <li><code class="language-plaintext highlighter-rouge">total_duration</code></li>
  <li><code class="language-plaintext highlighter-rouge">ai_log: "ai-logs/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;chat-id&gt;/conversation.md"</code></li>
  <li><code class="language-plaintext highlighter-rouge">source:</code> creator or prompt file</li>
</ul>

<p><strong>For instruction files (<code class="language-plaintext highlighter-rouge">.instructions.md</code>)</strong>: Also include:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">description: "&lt;one-line purpose&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">applyTo: "&lt;glob pattern&gt;"</code> (e.g., ‘<strong>’, ‘src/</strong>/<em>.py’, ‘**/</em>.bicep’)</li>
</ul>

<p><strong>For prompt files (<code class="language-plaintext highlighter-rouge">.prompt.md</code>)</strong>: Also include:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">description: "&lt;one-line purpose&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">context: "&lt;relevant context or constraints&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">expected_output: "&lt;type of output expected&gt;"</code></li>
</ul>

<p><strong>For chat mode files (<code class="language-plaintext highlighter-rouge">.chatmode.md</code>)</strong>: Also include:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">description: "&lt;one-line purpose&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">chatmode_type: "&lt;type of chat mode&gt;"</code> (e.g., ‘coding’, ‘research’, ‘testing’)</li>
  <li><code class="language-plaintext highlighter-rouge">capabilities: []</code> list of chat mode capabilities</li>
</ul>

<h3 id="sample-front-matter">Sample Front Matter</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openai/gpt-4o@2024-11-20"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18-refactor"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Exact request that triggered the artifact.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T17:03:11Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T17:06:54Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:02:20"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:01:23"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:03:43"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/04/18/2025-04-18-refactor/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-front-matter-instruction-file">Sample Front Matter (Instruction File)</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-sonnet-4.5@unknown"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28-meta-instructions"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">create an instruction file to guide an ai assistant in the generation</span>
  <span class="s">of instruction files. optimize the instruction file to minimize the</span>
  <span class="s">number of tokens required.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T14:30:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T14:35:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:03:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">optimize"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:02:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/28/2025-10-28-meta-instructions/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Guide</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">generating</span><span class="nv"> </span><span class="s">instruction</span><span class="nv"> </span><span class="s">files"</span>
<span class="na">applyTo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">**/*.instructions.md"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-front-matter-prompt-file">Sample Front Matter (Prompt File)</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-sonnet-4.5@unknown"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28-data-analysis"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">create a prompt template for data analysis tasks</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T15:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T15:05:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/28/2025-10-28-data-analysis/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Prompt</span><span class="nv"> </span><span class="s">template</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">analysis"</span>
<span class="na">context</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Python</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">science</span><span class="nv"> </span><span class="s">workflows"</span>
<span class="na">expected_output</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Analysis</span><span class="nv"> </span><span class="s">code</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">visualizations"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-front-matter-chat-mode-file">Sample Front Matter (Chat Mode File)</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-sonnet-4.5@unknown"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28-test-chatmode"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">create a chat mode configuration for automated testing</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T16:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T16:10:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:07:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">validate"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:03:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/28/2025-10-28-test-chatmode/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Automated</span><span class="nv"> </span><span class="s">testing</span><span class="nv"> </span><span class="s">chat</span><span class="nv"> </span><span class="s">mode</span><span class="nv"> </span><span class="s">configuration"</span>
<span class="na">chatmode_type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">testing"</span>
<span class="na">capabilities</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">unit</span><span class="nv"> </span><span class="s">testing"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">integration</span><span class="nv"> </span><span class="s">testing"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">coverage</span><span class="nv"> </span><span class="s">reporting"</span>
<span class="nn">---</span>
</code></pre></div></div>

<p><strong>Model Identification Guide</strong>:</p>

<ul>
  <li><strong>GitHub Copilot Chat</strong> (as of Oct 2025): Uses <code class="language-plaintext highlighter-rouge">anthropic/claude-sonnet-4.5@unknown</code> unless you can identify the exact version</li>
  <li><strong>OpenAI GPT-4o</strong>: <code class="language-plaintext highlighter-rouge">openai/gpt-4o@2024-11-20</code> (or specific version)</li>
  <li><strong>Claude 3.5 Sonnet</strong>: <code class="language-plaintext highlighter-rouge">anthropic/claude-3.5-sonnet@2024-10-22</code></li>
  <li><strong>Claude Sonnet 4.5</strong>: <code class="language-plaintext highlighter-rouge">anthropic/claude-sonnet-4.5@&lt;version&gt;</code> (use <code class="language-plaintext highlighter-rouge">@unknown</code> if version not shown)</li>
  <li>If UI shows marketing names like “GPT-5-Codex”, map to the actual underlying model</li>
  <li>When version is not surfaced, use <code class="language-plaintext highlighter-rouge">@unknown</code></li>
  <li>Track additional models used in the same chat inside <code class="language-plaintext highlighter-rouge">summary.md</code></li>
</ul>

<h2 id="chat-workflow-canonical">Chat Workflow (Canonical)</h2>

<ol>
  <li><strong>Start</strong> a fresh chat → capture <code class="language-plaintext highlighter-rouge">chat_id</code>, operator, and model label immediately.</li>
  <li><strong>Scaffold logs on first artifact</strong> at <code class="language-plaintext highlighter-rouge">ai-logs/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;chat-id&gt;/</code> with:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">conversation.md</code>: full timestamped transcript.</li>
      <li><code class="language-plaintext highlighter-rouge">summary.md</code>: objectives, outcomes, models used, remaining work.</li>
      <li>Optional <code class="language-plaintext highlighter-rouge">artifacts/</code> for files not checked into the repo.</li>
    </ul>
  </li>
  <li><strong>Generate artifact</strong> only if chat context is active; inject metadata using the captured model string.</li>
  <li><strong>Update logs</strong> after each artifact; export current transcript, append deliverables list, and record pending actions.</li>
  <li><strong>Close</strong> by finalizing <code class="language-plaintext highlighter-rouge">summary.md</code>, ensuring task durations and README updates are complete.</li>
</ol>

<h3 id="minimal-conversationmd">Minimal conversation.md</h3>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># AI Conversation Log</span>
<span class="p">
-</span> Chat ID: <span class="nt">&lt;chat-id&gt;</span>
<span class="p">-</span> Operator: <span class="nt">&lt;github-username&gt;</span>
<span class="p">-</span> Model: <span class="nt">&lt;provider&gt;</span>/<span class="nt">&lt;model&gt;</span>@<span class="nt">&lt;version&gt;</span>
<span class="p">-</span> Started: <span class="nt">&lt;ISO8601&gt;</span>
<span class="p">-</span> Ended: <span class="nt">&lt;ISO8601&gt;</span>
<span class="p">-</span> Total Duration: <span class="nt">&lt;hh:mm:ss&gt;</span>

<span class="gu">## Context</span>
<span class="p">
-</span> Inputs: <span class="nt">&lt;files</span><span class="err">/</span><span class="na">constraints</span><span class="nt">&gt;</span>
<span class="p">-</span> Targets: <span class="nt">&lt;intended</span> <span class="na">artifacts</span><span class="nt">&gt;</span>

<span class="gu">## Exchanges</span>

[<span class="nt">&lt;timestamp&gt;</span>] <span class="nt">&lt;user&gt;</span>

<span class="p">```</span><span class="nl">text
</span>&lt;prompt&gt;
<span class="p">```</span>

[<span class="nt">&lt;timestamp&gt;</span>] <span class="nt">&lt;provider&gt;</span>/<span class="nt">&lt;model&gt;</span>@<span class="nt">&lt;version&gt;</span>

<span class="p">```</span><span class="nl">text
</span>&lt;assistant reply&gt;
<span class="p">```</span>

<span class="gu">## Artifacts</span>
<span class="p">
-</span> <span class="nt">&lt;path&gt;</span> – <span class="nt">&lt;one-line</span> <span class="na">purpose</span><span class="nt">&gt;</span>

<span class="gu">## Next Steps</span>
<span class="p">
-</span> [ ] <span class="nt">&lt;action&gt;</span>
</code></pre></div></div>

<h3 id="minimal-summarymd">Minimal summary.md</h3>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Session Summary – &lt;chat-id&gt;</span>

<span class="gs">**Date**</span>: <span class="nt">&lt;YYYY-MM-DD&gt;</span>
<span class="gs">**Operator**</span>: <span class="nt">&lt;github-username&gt;</span>
<span class="gs">**Model**</span>: <span class="nt">&lt;provider&gt;</span>/<span class="nt">&lt;model&gt;</span>@<span class="nt">&lt;version&gt;</span>
<span class="gs">**Duration**</span>: <span class="nt">&lt;hh:mm:ss&gt;</span>

<span class="gu">## Objective</span>
<span class="p">
-</span> <span class="nt">&lt;goal&gt;</span>

<span class="gu">## Deliverables</span>
<span class="p">
1.</span> <span class="sb">`&lt;path&gt;`</span> – <span class="nt">&lt;purpose&gt;</span>

<span class="gu">## Decisions</span>
<span class="p">
-</span> <span class="nt">&lt;decision&gt;</span>: <span class="nt">&lt;rationale&gt;</span>

<span class="gu">## Follow-up</span>
<span class="p">
-</span> [ ] <span class="nt">&lt;action&gt;</span>

<span class="gu">## Metadata</span>

<span class="p">```</span><span class="nl">yaml
</span><span class="na">chat_id</span><span class="pi">:</span> <span class="s">&lt;chat-id&gt;</span>
<span class="na">started</span><span class="pi">:</span> <span class="s">&lt;ISO8601&gt;</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s">&lt;ISO8601&gt;</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s">&lt;hh:mm:ss&gt;</span>
<span class="na">models_used</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">&lt;provider&gt;/&lt;model&gt;@&lt;version&gt;</span>
<span class="na">artifacts_count</span><span class="pi">:</span> <span class="s">&lt;int&gt;</span>
<span class="na">files_modified</span><span class="pi">:</span> <span class="s">&lt;int&gt;</span>
<span class="p">```</span>
</code></pre></div></div>

<h2 id="placement--readme">Placement &amp; README</h2>

<ul>
  <li>Keep this file at <code class="language-plaintext highlighter-rouge">.github/instructions/ai-assisted-output.instructions.md</code>.</li>
  <li>For every notable new artifact, add a bullet in <code class="language-plaintext highlighter-rouge">README.md</code> linking to the artifact (and optional <code class="language-plaintext highlighter-rouge">ai_log</code>) under an “AI-Assisted Artifacts” section.</li>
  <li>Temporary scratch work still requires logs and metadata but may skip README updates.</li>
</ul>

<h2 id="quality-checklist">Quality Checklist</h2>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Metadata complete and embedded (or sidecar when required).</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Model label copied verbatim from the chat UI.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Prompt, timestamps, task durations, and totals recorded.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><code class="language-plaintext highlighter-rouge">ai-logs/.../conversation.md</code> and <code class="language-plaintext highlighter-rouge">summary.md</code> exist and reference the artifact.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />README updated for new durable artifacts.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />No sensitive data captured.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Tests/docs run or noted as pending.</li>
</ul>

<h2 id="pr-checklist">PR Checklist</h2>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Every changed AI-generated file references a real <code class="language-plaintext highlighter-rouge">chat_id</code> and <code class="language-plaintext highlighter-rouge">ai_log</code>.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />All logs committed alongside artifacts.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />README entries present where required.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Provenance fields pass CI (formatter, YAML syntax, existing paths).</li>
</ul>

<h2 id="copilot--tooling-requirements">Copilot / Tooling Requirements</h2>

<ul>
  <li>Auto-create chat IDs, log folders, and metadata scaffolds on first artifact.</li>
  <li>Prevent artifact generation without live chat context.</li>
  <li>Export transcripts and summaries automatically.</li>
  <li>Surface the active model name/version so it can be copied as <code class="language-plaintext highlighter-rouge">provider/model@version</code>.</li>
  <li>Track files generated per chat to support audits.</li>
</ul>

<h2 id="enforcement">Enforcement</h2>

<ul>
  <li>CI script <code class="language-plaintext highlighter-rouge">Verify AI Provenance</code> checks Markdown front matter for <code class="language-plaintext highlighter-rouge">ai_generated</code>, <code class="language-plaintext highlighter-rouge">chat_id</code>, <code class="language-plaintext highlighter-rouge">ai_log</code>, and valid log paths. Extend similarly for other formats as needed.</li>
</ul>

<h2 id="remediation">Remediation</h2>

<ul>
  <li>Missing metadata → add required fields and regenerate logs.</li>
  <li>Orphaned artifacts → create <code class="language-plaintext highlighter-rouge">ai-logs/...</code> records retroactively and update README.</li>
  <li>Sidecar misuse → move metadata into front matter when supported.</li>
</ul>

<hr />

<h3 id="summary-of-the-ai-assisted-outputinstructionsmd-file">Summary of the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> File</h3>

<p>This instruction file outlines the obligations for working with AI-generated artifacts, including the need to capture metadata such as the model used, operator, and timestamps. It emphasizes the importance of embedding provenance metadata directly into the artifacts or using sidecar files when necessary. The file also provides detailed workflows for managing AI-assisted sessions, including logging conversations, summarizing outcomes, and ensuring proper placement of artifacts.</p>

<p>Additionally, the file includes examples of metadata for various types of AI-generated files, such as instruction files, prompt files, and chat mode files. These examples serve as templates for ensuring that all artifacts adhere to the defined standards. The enforcement section highlights the use of CI scripts to verify compliance with the metadata requirements, ensuring that all AI-generated outputs are properly documented and traceable.</p>

<p>The metadata portion captures essential information about the creation of the instruction file itself, including the model used, operator, chat ID, prompt, and timestamps. This metadata ensures that the creation of the instruction file is also auditable and traceable.</p>

<p>The <code class="language-plaintext highlighter-rouge">conversation.md</code> and <code class="language-plaintext highlighter-rouge">summary.md</code> files associated with this instruction file would provide a detailed record of the interactions that led to its creation, including the specific prompts used and the decisions made during the process. The summary file is also structured to capture the objectives, deliverables, decisions, and follow-up actions related to the development of the instruction file. The summary file also allows a conversation to be interrupted and continued later.</p>

<p>While the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> file focuses on the overarching policies and workflows for managing AI-generated artifacts, the <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> file dives deeper into the specific guidelines for creating instruction files. This next file provides a token-optimized approach to generating instruction files, ensuring clarity and efficiency in their creation. Let’s explore its contents and how it complements the broader framework established in the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> file.</p>

<h2 id="the-instruction-file-generationinstructionsmd-instruction-file">The <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> Instruction File</h2>

<p>The <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> file is a specialized guide for creating instruction files. It emphasizes token efficiency while ensuring clarity and usability. This file provides a structured approach to generating instruction files that are both concise and comprehensive, making it an essential tool for projects that rely on AI-assisted workflows.</p>

<p>Below is the metadata for the <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> file followed by the full content of the file itself. The metadata is explained in detail in the instruction file.</p>

<hr />

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-3.5-sonnet@2024-10-22"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">instruction-file-generation-policy-2025-10-20"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a token-optimized instruction file for generating instruction files,</span>
  <span class="s">ensuring clarity and usability while minimizing token usage.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-20T10:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-20T10:30:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">optimize"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:30:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/20/instruction-file-generation-policy-2025-10-20/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">.github/prompts/create-instruction-file-generation-instructions.prompt.md"</span>
<span class="na">applyTo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">**/*.instructions.md"</span>
</code></pre></div></div>

<hr />

<h1 id="generating-an-instruction-file">Generating an Instruction File</h1>

<p>This guide provides a streamlined approach to writing instruction files for AI-assisted development. It focuses on minimizing token usage while maintaining clarity and effectiveness. Follow these guidelines to ensure that generated instruction files are concise, actionable, and aligned with project goals.</p>

<h2 id="key-principles">Key Principles</h2>

<ol>
  <li><strong>Clarity</strong>: Ensure that the instructions are easy to understand and follow.</li>
  <li><strong>Token Efficiency</strong>: Use concise language to minimize token usage without sacrificing clarity.</li>
  <li><strong>Actionability</strong>: Provide clear steps and examples to guide users in implementing the instructions.</li>
  <li><strong>Consistency</strong>: Adhere to a standard format and structure for all instruction files.</li>
</ol>

<h2 id="metadata-requirements">Metadata Requirements</h2>

<p>Every instruction file must include the following metadata:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ai_generated: true</code></li>
  <li><code class="language-plaintext highlighter-rouge">model: "&lt;provider&gt;/&lt;model&gt;@&lt;version&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">operator: "&lt;github-username&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">chat_id: "&lt;chat-id&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">prompt: |</code> + exact user prompt</li>
  <li><code class="language-plaintext highlighter-rouge">started</code>, <code class="language-plaintext highlighter-rouge">ended</code> (ISO8601)</li>
  <li><code class="language-plaintext highlighter-rouge">task_durations:</code> list of <code class="language-plaintext highlighter-rouge">{task, duration}</code> entries</li>
  <li><code class="language-plaintext highlighter-rouge">total_duration</code></li>
  <li><code class="language-plaintext highlighter-rouge">ai_log: "ai-logs/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;chat-id&gt;/conversation.md"</code></li>
  <li><code class="language-plaintext highlighter-rouge">source:</code> creator or prompt file</li>
  <li><code class="language-plaintext highlighter-rouge">description: "&lt;one-line purpose&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">applyTo: "&lt;glob pattern&gt;"</code></li>
</ul>

<h2 id="structure-of-instruction-files">Structure of Instruction Files</h2>

<ol>
  <li><strong>Introduction</strong>: Briefly describe the purpose of the instruction file.</li>
  <li><strong>Key Principles</strong>: Highlight the main principles or guidelines.</li>
  <li><strong>Metadata Requirements</strong>: Define the metadata fields required for the file.</li>
  <li><strong>Examples</strong>: Provide sample metadata and instructions for reference.</li>
  <li><strong>Checklist</strong>: Include a checklist to ensure compliance with the guidelines.</li>
</ol>

<h2 id="examples">Examples</h2>

<h3 id="sample-metadata">Sample Metadata</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openai/gpt-4o@2024-11-20"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18-instruction-file"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create an instruction file for generating instruction files.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:15:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/04/18/2025-04-18-instruction-file/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Guide</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">generating</span><span class="nv"> </span><span class="s">instruction</span><span class="nv"> </span><span class="s">files"</span>
<span class="na">applyTo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">**/*.instructions.md"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-checklist">Sample Checklist</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Metadata is complete and accurate.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Instructions are clear and concise.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Examples are relevant and easy to follow.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Checklist is included to ensure compliance.</li>
</ul>

<hr />

<h3 id="summary-of-the-instruction-file-generationinstructionsmd-file">Summary of the <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> File</h3>

<p>This instruction file provides a clear and efficient framework for creating instruction files. By focusing on token optimization and clarity, it ensures that generated files are both concise and effective. The metadata requirements and structured format help maintain consistency across projects, while the examples and checklist provide practical guidance for implementation.</p>

<p>Of note is the <strong>applyTo</strong> field in the metadata which specifies that this instruction file applies to all files with the <code class="language-plaintext highlighter-rouge">.instructions.md</code> extension. This ensures that any instruction file generated in the repository adheres to the guidelines set forth in this document and that is excluded from the context when generating other types of files.</p>

<p>The <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> file complements the broader framework established in the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> file by diving deeper into the specific requirements for instruction files. Together, these files form a comprehensive approach to managing AI-assisted workflows.</p>

<p>Next, we will explore the <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> file, which provides guidelines for creating prompt files that effectively guide AI in generating desired outputs.</p>

<h2 id="the-prompt-file-generationinstructionsmd-instruction-file">The <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> Instruction File</h2>

<p>The <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> file is a specialized guide for creating prompt files. It focuses on defining clear, actionable, and context-rich prompts that guide the AI in producing high-quality outputs. This file is essential for ensuring that AI-generated content aligns with project objectives and maintains a high standard of quality.</p>

<p>Below is the metadata for the <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> file followed by the full content of the file itself. The metadata is explained in detail in the instruction file.</p>

<hr />

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-3.5-sonnet@2024-10-22"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prompt-file-generation-policy-2025-10-25"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a comprehensive guide for generating prompt files,</span>
  <span class="s">emphasizing clarity, context, and actionability.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-25T09:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-25T09:45:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">guide</span><span class="nv"> </span><span class="s">creation"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:30:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:45:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/25/prompt-file-generation-policy-2025-10-25/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">.github/prompts/create-prompt-file-generation-instructions.prompt.md"</span>
<span class="na">applyTo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">**/*.prompt.md"</span>
</code></pre></div></div>

<hr />

<h1 id="prompt-file-generation-instructions">Prompt File Generation Instructions</h1>

<p>This instruction file provides a detailed guide for creating prompt files that effectively communicate tasks and expectations to the AI. Well-structured prompt files are crucial for obtaining high-quality, relevant, and actionable AI outputs. Follow these instructions to create prompt files that enhance the effectiveness of AI assistance in your projects.</p>

<h2 id="key-components-of-a-prompt-file">Key Components of a Prompt File</h2>

<ol>
  <li><strong>Description</strong>: A brief overview of the prompt file’s purpose.</li>
  <li><strong>Context</strong>: Relevant background information or constraints that the AI should consider.</li>
  <li><strong>Expected Output</strong>: The type of output expected from the AI, including format and content requirements.</li>
  <li><strong>Examples</strong>: Sample prompts and expected AI responses for reference.</li>
  <li><strong>Checklist</strong>: A list of items to verify before finalizing the prompt file.</li>
</ol>

<h2 id="metadata-requirements-1">Metadata Requirements</h2>

<p>Every prompt file must include the following metadata:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ai_generated: true</code></li>
  <li><code class="language-plaintext highlighter-rouge">model: "&lt;provider&gt;/&lt;model&gt;@&lt;version&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">operator: "&lt;github-username&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">chat_id: "&lt;chat-id&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">prompt: |</code> + exact user prompt</li>
  <li><code class="language-plaintext highlighter-rouge">started</code>, <code class="language-plaintext highlighter-rouge">ended</code> (ISO8601)</li>
  <li><code class="language-plaintext highlighter-rouge">task_durations:</code> list of <code class="language-plaintext highlighter-rouge">{task, duration}</code> entries</li>
  <li><code class="language-plaintext highlighter-rouge">total_duration</code></li>
  <li><code class="language-plaintext highlighter-rouge">ai_log: "ai-logs/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;chat-id&gt;/conversation.md"</code></li>
  <li><code class="language-plaintext highlighter-rouge">source:</code> creator or prompt file</li>
  <li><code class="language-plaintext highlighter-rouge">description: "&lt;one-line purpose&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">context: "&lt;relevant context or constraints&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">expected_output: "&lt;type of output expected&gt;"</code></li>
</ul>

<h2 id="examples-1">Examples</h2>

<h3 id="sample-metadata-1">Sample Metadata</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openai/gpt-4o@2024-11-20"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18-prompt-file"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a prompt file for generating prompt files.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:15:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/04/18/2025-04-18-prompt-file/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Guide</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">generating</span><span class="nv"> </span><span class="s">prompt</span><span class="nv"> </span><span class="s">files"</span>
<span class="na">context</span><span class="pi">:</span> <span class="s2">"</span><span class="s">AI-assisted</span><span class="nv"> </span><span class="s">development</span><span class="nv"> </span><span class="s">workflows"</span>
<span class="na">expected_output</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Clear</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">actionable</span><span class="nv"> </span><span class="s">prompts"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-checklist-1">Sample Checklist</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Metadata is complete and accurate.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Description clearly conveys the purpose of the prompt file.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Context provides relevant background information.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Expected output is well-defined and achievable.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Examples are included and correctly formatted.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Checklist is included to ensure compliance.</li>
</ul>

<hr />

<h3 id="summary-of-the-prompt-file-generationinstructionsmd-file">Summary of the <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> File</h3>

<p>This instruction file provides comprehensive guidelines for creating prompt files that effectively guide AI in generating desired outputs. By emphasizing clarity, context, and action-ability, it ensures that AI-generated content is relevant, high-quality, and aligned with project objectives. The metadata requirements and structured format promote consistency and best practices across projects.</p>

<p>The <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> file ensures that prompt files are clear, actionable, and context-rich, enabling AI to produce high-quality outputs. Building on this, the <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> file provides a comprehensive guide for creating chat mode files. These files define the behavior, capabilities, and configuration of AI chat modes, ensuring they are tailored to specific tasks and workflows. Let’s explore its contents and how it complements the framework established by the other instruction files.</p>

<h2 id="the-chatmode-file-generationinstructionsmd-instruction-file">The <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> Instruction File</h2>

<p>The <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> file is a specialized guide for creating chat mode files. It defines the configuration, behavior, and capabilities of AI chat modes, ensuring they are tailored to specific tasks and workflows. This file is essential for projects that require precise control over AI chat mode behavior and integration with other tools and processes.</p>

<p>Below is the metadata for the <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> file followed by the full content of the file itself. The metadata is explained in detail in the instruction file.</p>

<hr />

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-3.5-sonnet@2024-10-22"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">chatmode-file-generation-policy-2025-10-30"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a comprehensive guide for generating chat mode files,</span>
  <span class="s">detailing configuration, behavior, and capabilities.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-30T11:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-30T11:50:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">guide</span><span class="nv"> </span><span class="s">creation"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:40:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:50:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/30/chatmode-file-generation-policy-2025-10-30/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">.github/prompts/create-chatmode-file-generation-instructions.prompt.md"</span>
<span class="na">applyTo</span><span class="pi">:</span> <span class="s2">"</span><span class="s">**/*.chatmode.md"</span>
</code></pre></div></div>

<hr />

<h1 id="chat-mode-file-generation-instructions">Chat Mode File Generation Instructions</h1>

<p>This instruction file provides a detailed guide for creating chat mode files that define the behavior, capabilities, and configuration of AI chat modes. Properly configured chat mode files are crucial for ensuring that AI chat modes perform optimally and are well-integrated with other tools and processes in the development workflow. Follow these instructions to create chat mode files that enhance the effectiveness and reliability of AI assistance in your projects.</p>

<h2 id="key-components-of-a-chat-mode-file">Key Components of a Chat Mode File</h2>

<ol>
  <li><strong>Description</strong>: A brief overview of the chat mode file’s purpose.</li>
  <li><strong>Chat Mode Type</strong>: The type of chat mode being configured (e.g., coding, research, testing).</li>
  <li><strong>Capabilities</strong>: The specific abilities or functions the chat mode can perform.</li>
  <li><strong>Configuration</strong>: Settings and parameters that define the chat mode’s behavior.</li>
  <li><strong>Examples</strong>: Sample chat mode configurations for reference.</li>
  <li><strong>Checklist</strong>: A list of items to verify before finalizing the chat mode file.</li>
</ol>

<h2 id="metadata-requirements-2">Metadata Requirements</h2>

<p>Every chat mode file must include the following metadata:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ai_generated: true</code></li>
  <li><code class="language-plaintext highlighter-rouge">model: "&lt;provider&gt;/&lt;model&gt;@&lt;version&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">operator: "&lt;github-username&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">chat_id: "&lt;chat-id&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">prompt: |</code> + exact user prompt</li>
  <li><code class="language-plaintext highlighter-rouge">started</code>, <code class="language-plaintext highlighter-rouge">ended</code> (ISO8601)</li>
  <li><code class="language-plaintext highlighter-rouge">task_durations:</code> list of <code class="language-plaintext highlighter-rouge">{task, duration}</code> entries</li>
  <li><code class="language-plaintext highlighter-rouge">total_duration</code></li>
  <li><code class="language-plaintext highlighter-rouge">ai_log: "ai-logs/&lt;yyyy&gt;/&lt;mm&gt;/&lt;dd&gt;/&lt;chat-id&gt;/conversation.md"</code></li>
  <li><code class="language-plaintext highlighter-rouge">source:</code> creator or prompt file</li>
  <li><code class="language-plaintext highlighter-rouge">description: "&lt;one-line purpose&gt;"</code></li>
  <li><code class="language-plaintext highlighter-rouge">chatmode_type: "&lt;type of chat mode&gt;"</code> (e.g., ‘coding’, ‘research’, ‘testing’)</li>
  <li><code class="language-plaintext highlighter-rouge">capabilities: []</code> list of chat mode capabilities</li>
</ul>

<h2 id="examples-2">Examples</h2>

<h3 id="sample-metadata-2">Sample Metadata</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openai/gpt-4o@2024-11-20"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18-chatmode-file"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a chat mode file for generating chat mode files.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:15:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:05:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/04/18/2025-04-18-chatmode-file/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Guide</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">generating</span><span class="nv"> </span><span class="s">chat</span><span class="nv"> </span><span class="s">mode</span><span class="nv"> </span><span class="s">files"</span>
<span class="na">chatmode_type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">coding"</span>
<span class="na">capabilities</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">code</span><span class="nv"> </span><span class="s">completion"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">code</span><span class="nv"> </span><span class="s">suggestions"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">documentation</span><span class="nv"> </span><span class="s">generation"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-checklist-2">Sample Checklist</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Metadata is complete and accurate.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Description clearly conveys the purpose of the chat mode file.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Chat Mode type is correctly specified.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Capabilities are relevant and comprehensive.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Configuration settings are well-defined.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Examples are included and correctly formatted.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Checklist is included to ensure compliance.</li>
</ul>

<hr />

<h3 id="summary-of-the-chatmode-file-generationinstructionsmd-file">Summary of the <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> File</h3>

<p>This instruction file provides comprehensive guidelines for creating chat mode files that define the behavior, capabilities, and configuration of AI chat modes. By emphasizing clear structure, relevant capabilities, and precise configuration, it ensures that AI chat modes are effectively tailored to project requirements. The metadata requirements and structured format promote consistency and best practices across projects.</p>

<p>The <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> file builds upon the foundations set by the previous instruction files, providing the final piece of the puzzle for managing AI-assisted greenfield software development. With these instruction files, prompts, and chat modes, development teams are well-equipped to leverage AI assistance effectively, enhancing productivity, improving code quality, and accelerating software development timelines.</p>

<h2 id="the-prompt-engineerchatmodemd-chat-mode-file">The <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> Chat Mode File</h2>

<p>The <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> file is a specialized configuration for an AI chat mode designed to assist in crafting and refining prompts. This chat mode is tailored to ensure that prompts are clear, actionable, and aligned with the desired outcomes. By leveraging this chat mode, teams can streamline the process of creating effective prompts, which are critical for guiding AI behavior and achieving high-quality outputs.</p>

<p>Below is the metadata for the <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> file followed by the full content of the file itself. The metadata is explained in detail in the chat mode file.</p>

<hr />

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-3.5-sonnet@2024-10-22"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prompt-engineer-chatmode-policy-2025-11-01"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a chat mode configuration for a prompt engineering assistant,</span>
  <span class="s">detailing its capabilities and configuration.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-11-01T10:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-11-01T10:40:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">chat</span><span class="nv"> </span><span class="s">mode</span><span class="nv"> </span><span class="s">design"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:25:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:15:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:40:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/11/01/prompt-engineer-chatmode-policy-2025-11-01/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">.github/prompts/create-prompt-engineer-chatmode-instructions.prompt.md"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Chat</span><span class="nv"> </span><span class="s">Mode</span><span class="nv"> </span><span class="s">configuration</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">prompt</span><span class="nv"> </span><span class="s">engineering"</span>
<span class="na">chatmode_type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prompt-engineering"</span>
<span class="na">capabilities</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">prompt</span><span class="nv"> </span><span class="s">refinement"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">clarity</span><span class="nv"> </span><span class="s">enhancement"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">context</span><span class="nv"> </span><span class="s">alignment"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">output</span><span class="nv"> </span><span class="s">optimization"</span>
<span class="nn">---</span>
</code></pre></div></div>

<hr />

<h1 id="prompt-engineer-chat-mode-configuration">Prompt Engineer Chat Mode Configuration</h1>

<p>This chat mode is designed to assist in the creation and refinement of prompts for AI systems. It provides tools and capabilities to ensure that prompts are well-structured, contextually relevant, and optimized for generating high-quality outputs. The chat mode is particularly useful for teams that rely on AI to produce consistent and actionable results.</p>

<h2 id="key-features">Key Features</h2>

<ol>
  <li><strong>Prompt Refinement</strong>: The chat mode can analyze and improve existing prompts to enhance clarity and effectiveness.</li>
  <li><strong>Clarity Enhancement</strong>: It ensures that prompts are easy to understand and free of ambiguity.</li>
  <li><strong>Context Alignment</strong>: The chat mode aligns prompts with the specific context and objectives of the task.</li>
  <li><strong>Output Optimization</strong>: It optimizes prompts to achieve the desired output format and quality.</li>
</ol>

<h2 id="metadata-requirements-3">Metadata Requirements</h2>

<p>The <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> file includes detailed metadata to ensure traceability and compliance with project standards. This metadata captures the chat mode’s purpose, capabilities, and configuration details.</p>

<h2 id="examples-3">Examples</h2>

<h3 id="sample-metadata-3">Sample Metadata</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">openai/gpt-4o@2024-11-20"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18-prompt-engineer-chatmode"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">Create a chat mode configuration for a prompt engineering assistant.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:00:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-04-18T12:30:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">draft"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:20:00"</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:10:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:30:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/04/18/2025-04-18-prompt-engineer-chatmode/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Chat</span><span class="nv"> </span><span class="s">Mode</span><span class="nv"> </span><span class="s">configuration</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">prompt</span><span class="nv"> </span><span class="s">engineering"</span>
<span class="na">chatmode_type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prompt-engineering"</span>
<span class="na">capabilities</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">prompt</span><span class="nv"> </span><span class="s">refinement"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">clarity</span><span class="nv"> </span><span class="s">enhancement"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">context</span><span class="nv"> </span><span class="s">alignment"</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">output</span><span class="nv"> </span><span class="s">optimization"</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="sample-checklist-3">Sample Checklist</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Metadata is complete and accurate.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Chat Mode type and capabilities are clearly defined.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Configuration aligns with project objectives.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Examples are included and correctly formatted.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Checklist is included to ensure compliance.</li>
</ul>

<hr />

<h3 id="summary-of-the-prompt-engineerchatmodemd-file">Summary of the <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> File</h3>

<p>The <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> file provides a comprehensive configuration for an AI chat mode focused on prompt engineering. By defining its capabilities and configuration, this file ensures that the chat mode is well-equipped to assist in creating and refining prompts. The metadata requirements and structured format promote consistency and traceability, making it an essential tool for projects that rely on AI-generated outputs.</p>

<p>This chat mode file complements the instruction and prompt files by providing a specialized tool for optimizing the prompts that guide AI behavior. Together, these components form a robust framework for managing AI-assisted workflows.</p>

<h2 id="the-check-contextpromptmd-prompt-file">The <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> Prompt File</h2>

<p>The <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> file is a specialized guide for verifying and aligning the context of AI-generated outputs. This file ensures that the AI’s outputs are relevant, accurate, and aligned with the project’s objectives. By using this prompt file, teams can maintain high standards of quality and consistency in their AI-assisted workflows.</p>

<p>Below is the metadata for the <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> file followed by the full content of the file itself. The metadata is explained in detail in the prompt file.</p>

<hr />

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ai_generated</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">model</span><span class="pi">:</span> <span class="s2">"</span><span class="s">anthropic/claude-sonnet-4.5@unknown"</span>
<span class="na">operator</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">chat_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28-context-validation-v2"</span>
<span class="na">prompt</span><span class="pi">:</span> <span class="pi">|</span>
  <span class="s">update #file:check-context.prompt.md. create an token optimized prompt file to guide an ai assistant in validating the current context.</span>
<span class="na">started</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T16:25:00Z"</span>
<span class="na">ended</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-10-28T16:28:00Z"</span>
<span class="na">task_durations</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s2">"</span><span class="s">review</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">validate"</span>
    <span class="na">duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:03:00"</span>
<span class="na">total_duration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">00:03:00"</span>
<span class="na">ai_log</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ai-logs/2025/10/28/2025-10-28-context-validation-v2/conversation.md"</span>
<span class="na">source</span><span class="pi">:</span> <span class="s2">"</span><span class="s">johnmillerATcodemag-com"</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Validate</span><span class="nv"> </span><span class="s">context</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">conflicts</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">inconsistencies"</span>
<span class="na">context</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Instruction</span><span class="nv"> </span><span class="s">files,</span><span class="nv"> </span><span class="s">prompts,</span><span class="nv"> </span><span class="s">agents,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">workspace</span><span class="nv"> </span><span class="s">context"</span>
<span class="na">expected_output</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Structured</span><span class="nv"> </span><span class="s">conflict</span><span class="nv"> </span><span class="s">analysis</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">recommendations"</span>
<span class="na">tools</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">search"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">edit"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">fetch"</span><span class="pi">]</span>
<span class="na">mode</span><span class="pi">:</span> <span class="s">agent</span>
<span class="nn">---</span>
</code></pre></div></div>

<h1 id="context-validation">Context Validation</h1>

<p>Analyze current context (instructions, prompts, agents, workspace) for conflicts, contradictions, and inconsistencies.</p>

<h2 id="validation-categories">Validation Categories</h2>

<ol>
  <li><strong>Conflicting Instructions</strong>: Contradictory directives, incompatible requirements</li>
  <li><strong>Factual Inconsistencies</strong>: Contradictory data, dates, numbers, or specifications</li>
  <li><strong>Logical Contradictions</strong>: Mutually exclusive statements, circular dependencies</li>
  <li><strong>Priority Conflicts</strong>: Competing priorities, incompatible scopes</li>
  <li><strong>Technical Incompatibilities</strong>: Conflicting tech stacks, version/dependency conflicts</li>
  <li><strong>Terminology Gaps</strong>: Inconsistent naming, undefined references, missing connections</li>
  <li><strong>Redundancy</strong>: Duplicate instructions, overlapping processes</li>
</ol>

<h2 id="output-format">Output Format</h2>

<p>For each issue found:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">category</span><span class="pi">:</span> <span class="s">&lt;conflict type&gt;</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">&lt;what conflicts&gt;</span>
<span class="na">location</span><span class="pi">:</span> <span class="s">&lt;where it occurs&gt;</span>
<span class="na">impact: &lt;severity</span><span class="pi">:</span> <span class="s">critical|high|medium|low&gt;</span>
<span class="na">recommendation</span><span class="pi">:</span> <span class="s">&lt;resolution approach&gt;</span>
</code></pre></div></div>

<p>If no conflicts: state “Context validated. No conflicts detected.”</p>

<h2 id="validation-steps">Validation Steps</h2>

<ol>
  <li>Load all instruction, prompt, and agent files</li>
  <li>Cross-reference directives for contradictions</li>
  <li>Check terminology consistency across files</li>
  <li>Identify duplicate or overlapping content</li>
  <li>Verify technical compatibility</li>
  <li>Report findings using output format</li>
</ol>

<h3 id="summary-of-the-check-contextpromptmd-file">Summary of the <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> File</h3>

<p>The <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> file provides a detailed guide for verifying and aligning the context of AI-generated outputs. By emphasizing relevance, accuracy, and alignment with project objectives, it ensures that AI-generated content meets high standards of quality and consistency. The metadata requirements and structured format promote best practices and trace-ability across projects.</p>

<p>This prompt file serves as a critical tool for maintaining the integrity of AI-assisted workflows, ensuring that all outputs are thoroughly vetted for context and relevance. Conflicting instructions, factual inconsistencies, logical contradictions, priority conflicts, technical incompatibilities, terminology gaps, and redundancy degrade AI performance and can lead to sub-optimal outcomes. Issues identified through this prompt should be addressed proactively and rerun when new instruction files are introduced.</p>

<p>This prompt file complements the instruction and chat mode files by providing a tool for ensuring that AI outputs are contextually appropriate and aligned with project goals. Together, these components form a robust framework for managing AI-assisted workflows.</p>

<h2 id="workflow-for-ai-assisted-development">Workflow for AI-Assisted Development</h2>

<p><img src="../assets/images/2025-09-24/AIAGSD-Workflow.png" alt="AIAGSD_Workflow.png" /></p>

<p>This diagram illustrates how core instructions and business requirements are used to create project-independent instructions and an implementation plan. These components, along with instruction files, guide the solution implementation process.</p>

<p>In this post, we’ve explored the essential components of the framework for AI-assisted software development. We’ve covered the relationships between chat modes, prompts, and instruction files, and delved into the specifics of the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code>, <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code>, <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code>, <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code>, and <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> files.</p>

<p>This framework provides a comprehensive and structured approach to managing AI-assisted workflows, ensuring clarity, consistency, and quality in AI-generated outputs. By following these guidelines and utilizing the provided instruction files, prompts, and chat modes, you can effectively leverage AI assistance to produce quality software artifacts that meet your project’s needs.</p>

<p>As you embark on your AI-assisted development journey, remember that this is an iterative process. Continuously refine your instructions, prompts, and chat modes based on feedback and evolving project needs. The key to effective AI assistance lies in clear communication, well-defined objectives, and a commitment to quality and best practices. By fostering a culture of continuous improvement, you can unlock the full potential of AI in your development workflows and achieve sustainable success.</p>

<p>Next time, we’ll look at the Project Independent Instructions that form the basis for reusable AI-assisted development practices across multiple projects.</p>

<h2 id="feedback-and-disclaimer">Feedback and Disclaimer</h2>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h3 id="disclaimer">Disclaimer</h3>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li>Insert a mermaid diagram that documents this workflow:
    <ul>
      <li>Business Requirements are used to create the Generate Instructions prompt.</li>
      <li>The Generate Instructions prompt produces Instruction files</li>
      <li>Instruction files guide the Solution Implementation</li>
    </ul>
  </li>
  <li>Insert descriptions of GitHub copilot instruction, prompt, and chat mode (chat mode) files</li>
  <li>Create a mermaid chart showing the relationships between chat modes, prompts, instruction files. Add a paragraph describing the interactions between these files.</li>
  <li>Insert the contents of the <code class="language-plaintext highlighter-rouge">ai-assisted-output.instructions.md</code> file with an introductory paragraph, summary paragraphs, and a transition to the <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> file.</li>
  <li>Insert the contents of the <code class="language-plaintext highlighter-rouge">instruction-file-generation.instructions.md</code> file with an introductory paragraph, summary paragraphs, and a transition to the <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> file.</li>
  <li>Insert the contents of the <code class="language-plaintext highlighter-rouge">prompt-file-generation.instructions.md</code> file with an introductory paragraph, summary paragraphs, and a transition to the <code class="language-plaintext highlighter-rouge">chatmode-file-generation.instructions.md</code> file.</li>
  <li>Insert the contents of the <code class="language-plaintext highlighter-rouge">prompt-engineer.chatmode.md</code> file with an introductory paragraph, summary paragraphs, and a transition to the <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> file.</li>
  <li>Insert the contents of the <code class="language-plaintext highlighter-rouge">check-context.prompt.md</code> file with an introductory paragraph, summary paragraphs, and a transition to the conclusion.</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/AIAGSD2">post</a></small></small></small></p>
</li><li><span class="post-meta">Aug 30, 2025</span>
        <h3>
          <a class="post-link" href="/SIWT/">
            Sharing Instructions with the Team
          </a>
        </h3><p>When working with GitHub Copilot across multiple projects, you’ll quickly face a common challenge: how do you share generic instructions (ie. coding standards and best practices) with team members working on different projects without duplicating instruction files in every repository? This post walks you through prompting Copilot to implement a solution leveraging symlinks and junction points.</p>

<h2 id="what-are-instruction-files">What Are Instruction Files?</h2>

<p>For those of you new to using GitHub Copilot, instruction files are the blueprint for customizing how Copilot agents behave, respond, and interact with tools. Instruction files include natural language guidance that shapes the agent’s tone, reasoning style, and response formatting, making them essential for tailoring Copilot to specific workflows, domains, or compliance requirements. Instruction files give you granular control over how the agent interprets user intent and executes tasks.</p>

<p>Instruction files for GitHub Copilot agents can be located within the project repository in the <code class="language-plaintext highlighter-rouge">.github</code> folder or a sub-folder of <code class="language-plaintext highlighter-rouge">.github</code>. They can also reside in the user’s home directory in a <code class="language-plaintext highlighter-rouge">.github</code> prompts folder. The project repository location takes precedence over the user home directory location.</p>

<p>Instruction files in the project folder are in scope for that project. Instruction files in the user home directory are available to all projects. Instruction files in the user home directory are limited in that the can only reside in the prompts folder.</p>

<p>For instructions that are not project specific, such as coding standards and practices, it is desirable to share them across multiple projects. However, duplicating these files in each project repository is inefficient and error-prone. Instead, we can use symbolic links (symlinks) on Linux and macOS, and junction points on Windows, to create a single source of truth for shared instructions.</p>

<p>Ideally it would be nice to create a link in the user folder once and have it be used across all projects. Due to the limitations on the user home directory location, creating a link there would require that all of the shared instructions be in a single folder in the source and it would preclude storing any personal instructions.</p>

<p>Therefore, we need to establish these links within each project. Our solution involves creating these links seamlessly.</p>

<h2 id="what-is-a-symlink-and-junction-point">What Is a Symlink and Junction Point?</h2>

<p>A symlink (symbolic link) is a special type of file that points to another file or directory, allowing you to access the target as if it were located at the link’s location. Symlinks are commonly used on Linux and macOS to create shortcuts or shared folders. A junction point is a similar concept used on Windows; it creates a link to a directory, making the contents of the target directory appear in the linked location. Both mechanisms enable you to share or reuse files and folders across different locations without duplicating data, which simplifies maintenance and updates.</p>

<h2 id="the-prompt">The Prompt</h2>

<p>The solution involves creating a repo that contains the instruction files to be shared. Developers on the team can clone the repo locally and pull changes as needed. They can also change or add instructions to the repo and push those changes to the origin. Making them available to other team members.</p>

<p>Once the repo is established, we need to provide guidance for the team in creating the links to the shared instructions. We’ll ask Copilot to create scripts for each OS (Windows, Linux, macOS) that will create the appropriate link from the project repository to the shared instructions folder in the central repo. The scripts will also ensure that the linked folder is added to the project’s <code class="language-plaintext highlighter-rouge">.gitignore</code> file to prevent accidental commits of the shared instructions to the project repository. In addition we’ll ask Copilot to create a README file with instructions on how to use the scripts.</p>

<p>Here is the prompt I gave GitHub Copilot:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Write three scripts to create a symlink or junction point for windows, Linux, and Mac.

Use a symlink for Linux and Mac, and a junction point for Windows using
the New-Item -ItemType Junction cmdlet.

The symlink or junction point goes to the <span class="sb">`./instructions`</span> folder in this GitHubCopilot repo
from the <span class="sb">`./github/instructions/shared`</span> folder in the Project repo.

You'll need the paths to both the GitHubCopilot repo and the Project repo in order to proceed.

Ensure that the Project repo's <span class="sb">`./github/instructions/shared`</span> folder is in the Project's <span class="sb">`.gitignore`</span> file.
Create the file if it doesn't exist. We don't want the shared instructions to be pushed into the project repo.

Create a <span class="sb">`Readme.md`</span> the describes the purpose and use of the scripts.

Put all the files in a <span class="sb">`shared-instructions`</span> folder in the GitHubCopilot repo.
</code></pre></div></div>

<p>This prompt instructs Copilot (or ChatGPT 5) to automate the process of sharing a set of instruction files across multiple projects by generating platform-specific scripts. The scripts are designed to create either a symbolic link (symlink) or a junction point from a project repository to a central instructions folder in the GitHubCopilot repo. For Linux and macOS, the scripts use symlinks, while on Windows, they use NTFS junctions via PowerShell’s New-Item -ItemType Junction. The prompt also requires the scripts to ensure that the shared instructions folder is listed in the project’s <code class="language-plaintext highlighter-rouge">.gitignore</code> file, preventing accidental commits of shared files.</p>

<p>Copilot and ChatGPT 5 interpret this prompt as a request for practical automation tools that streamline collaboration and maintain consistency across development environments. They recognize the need for cross-platform compatibility, idempotency, and version control hygiene. The prompt’s instructions lead them to generate three scripts (one for each OS) and a README file, all organized in a shared-instructions folder. The resulting solution enables teams to easily link to and update shared instruction files, reducing duplication and simplifying maintenance.</p>

<p>Here is the README.md file generated from the prompt:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Shared Instructions Symlink/Junction Scripts</span>

These scripts create a platform-appropriate link from a Project repository to the shared <span class="sb">`instructions`</span> folder
that lives in the <span class="sb">`GitHubCopilot`</span> repo. This lets multiple projects reuse a single, centrally maintained set
of instruction files without copying them.
</code></pre></div></div>

<p>Link layout created:</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ProjectRepo&gt;</span>/github/instructions/shared -&gt; <span class="nt">&lt;GitHubCopilotRepo&gt;</span>/instructions
</code></pre></div></div>

<p>Platform behavior:</p>

<table>
  <thead>
    <tr>
      <th>Platform</th>
      <th>Mechanism</th>
      <th>Script</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Windows</td>
      <td>NTFS Junction</td>
      <td><code class="language-plaintext highlighter-rouge">create-shared-link-windows.ps1</code></td>
    </tr>
    <tr>
      <td>Linux</td>
      <td>Symbolic link</td>
      <td><code class="language-plaintext highlighter-rouge">create-shared-link-linux.sh</code></td>
    </tr>
    <tr>
      <td>macOS</td>
      <td>Symbolic link</td>
      <td><code class="language-plaintext highlighter-rouge">create-shared-link-mac.sh</code></td>
    </tr>
  </tbody>
</table>

<p>The destination path inside the Project repo (<code class="language-plaintext highlighter-rouge">github/instructions/shared/</code>) is automatically added (or appended)
to the Project repository’s <code class="language-plaintext highlighter-rouge">.gitignore</code> so linked files are never committed to the Project repository.</p>

<h2 id="why-a-junction-on-windows">Why a Junction on Windows?</h2>

<p>Junctions avoid some permission / policy issues that can affect symlinks on Windows machines without Developer Mode enabled. They behave like directory symlinks for our purpose.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>You have both the Project repo and the <code class="language-plaintext highlighter-rouge">GitHubCopilot</code> repo cloned locally.</li>
  <li>PowerShell 5+ (Windows script) or bash + Python 3 (for relative path computation) on Linux/macOS. (If Python 3 is not available, omit <code class="language-plaintext highlighter-rouge">--relative</code>.)</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>All scripts require the root path of both repositories.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Windows</th>
      <th>Linux/macOS</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GitHubCopilotRepo / –copilot</td>
      <td>Required</td>
      <td>Required</td>
      <td>Path to the <code class="language-plaintext highlighter-rouge">GitHubCopilot</code> repo root (where <code class="language-plaintext highlighter-rouge">./instructions</code> exists).</td>
    </tr>
    <tr>
      <td>ProjectRepo / –project</td>
      <td>Required</td>
      <td>Required</td>
      <td>Path to the Project repo root (where <code class="language-plaintext highlighter-rouge">./github/instructions/shared</code> will be created).</td>
    </tr>
    <tr>
      <td>-Force / –force</td>
      <td>Optional</td>
      <td>Optional</td>
      <td>Replace existing destination (if mismatch or not link).</td>
    </tr>
    <tr>
      <td>–relative</td>
      <td>n/a</td>
      <td>Optional</td>
      <td>Create a relative symlink instead of an absolute one.</td>
    </tr>
  </tbody>
</table>

<h2 id="usage-examples">Usage Examples</h2>

<h3 id="windows-powershell">Windows (PowerShell)</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cd</span><span class="w"> </span><span class="nx">C:\git\GitHubCopilot\shared-instructions</span><span class="w">
</span><span class="o">.</span><span class="n">/create-shared-link-windows.ps1</span><span class="w"> </span><span class="nt">-GitHubCopilotRepo</span><span class="w"> </span><span class="nx">C:\git\GitHubCopilot</span><span class="w"> </span><span class="nt">-ProjectRepo</span><span class="w"> </span><span class="nx">C:\git\MyProject</span><span class="w">

</span><span class="c"># Force recreation</span><span class="w">
</span><span class="o">.</span><span class="n">/create-shared-link-windows.ps1</span><span class="w"> </span><span class="nt">-GitHubCopilotRepo</span><span class="w"> </span><span class="o">..</span><span class="nx">\GitHubCopilot</span><span class="w"> </span><span class="nt">-ProjectRepo</span><span class="w"> </span><span class="nx">C:\git\MyProject</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
</span></code></pre></div></div>

<h3 id="linux">Linux</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/git/GitHubCopilot/shared-instructions
./create-shared-link-linux.sh <span class="nt">--copilot</span> ~/git/GitHubCopilot <span class="nt">--project</span> ~/git/MyProject

<span class="c"># Relative link, force recreate</span>
./create-shared-link-linux.sh <span class="nt">--copilot</span> ~/git/GitHubCopilot <span class="nt">--project</span> ~/git/MyProject <span class="nt">--relative</span> <span class="nt">--force</span>
</code></pre></div></div>

<h3 id="macos">macOS</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/git/GitHubCopilot/shared-instructions
./create-shared-link-mac.sh <span class="nt">--copilot</span> ~/git/GitHubCopilot <span class="nt">--project</span> ~/git/MyProject
</code></pre></div></div>

<h2 id="idempotency">Idempotency</h2>

<p>Running a script again will leave an already-correct link untouched (unless <code class="language-plaintext highlighter-rouge">--force</code> / <code class="language-plaintext highlighter-rouge">-Force</code> is specified) and will still ensure the <code class="language-plaintext highlighter-rouge">.gitignore</code> entry exists.</p>

<h2 id="gitignore-handling">.gitignore Handling</h2>

<p>The following entry is ensured inside the Project repo <code class="language-plaintext highlighter-rouge">.gitignore</code> (file created if missing):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>github/instructions/shared/
</code></pre></div></div>

<h2 id="troubleshooting">Troubleshooting</h2>

<ul>
  <li>Destination exists and is not a link: Re-run with <code class="language-plaintext highlighter-rouge">-Force</code> / <code class="language-plaintext highlighter-rouge">--force</code>.</li>
  <li>Permission errors on Windows: Ensure PowerShell is running with adequate permissions.</li>
  <li>Symlink creation denied on Windows: Junctions should bypass typical symlink permission issues; if problems persist, check antivirus or corporate policy restrictions.</li>
</ul>

<h2 id="removal">Removal</h2>

<p>Simply delete the destination path inside the Project repo:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Remove-Item</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">ProjectRepo</span><span class="err">&gt;</span><span class="nx">\github\instructions\shared</span><span class="w"> </span><span class="nt">-Recurse</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
</span></code></pre></div></div>

<p>or</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> &lt;ProjectRepo&gt;/github/instructions/shared
</code></pre></div></div>

<h2 id="maintenance">Maintenance</h2>

<p>If new shared instruction files are added to <code class="language-plaintext highlighter-rouge">GitHubCopilot/instructions</code>, they become available to all linked projects immediately—no changes needed in individual projects.</p>

<p>A small clarification on the maintenance. New shared instruction files added to <code class="language-plaintext highlighter-rouge">GitHubCopilot/instructions</code> will not automatically be available in all linked projects without any additional steps. They become available after a pull from the repo.</p>

<h3 id="linux-script-create-shared-link-linuxsh">Linux Script (<code class="language-plaintext highlighter-rouge">create-shared-link-linux.sh</code>)</h3>

<p>Here is the Linux script generated from the prompt:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># Creates (or refreshes) a symbolic link in the Project repo pointing to the</span>
<span class="c"># ./instructions folder in the GitHubCopilot repo.</span>
<span class="c">#</span>
<span class="c"># Destination (link created): &lt;ProjectRepo&gt;/github/instructions/shared</span>
<span class="c"># Source (link target):       &lt;GitHubCopilotRepo&gt;/instructions</span>
<span class="c">#</span>
<span class="c"># Arguments:</span>
<span class="c">#   --copilot &lt;path&gt;   Path to GitHubCopilot repo root (where ./instructions exists)</span>
<span class="c">#   --project &lt;path&gt;   Path to Project repo root (where ./github/instructions/shared will be created)</span>
<span class="c">#   --force            Remove and recreate existing destination if present</span>
<span class="c">#   --relative         Create a relative symlink (default: absolute)</span>
<span class="c">#</span>
<span class="c"># Example:</span>
<span class="c">#   ./create-shared-link-linux.sh --copilot ../GitHubCopilot --project . --relative</span>

<span class="nb">set</span> +u
<span class="nv">FORCE</span><span class="o">=</span>0
<span class="nv">RELATIVE</span><span class="o">=</span>0
<span class="nv">COPILOT</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">""</span>
<span class="nb">set</span> <span class="nt">-u</span>

<span class="k">while</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-gt</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">do
  case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in</span>
    <span class="nt">--copilot</span><span class="p">)</span> <span class="nv">COPILOT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--project</span><span class="p">)</span> <span class="nv">PROJECT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--force</span><span class="p">)</span> <span class="nv">FORCE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">--relative</span><span class="p">)</span> <span class="nv">RELATIVE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">-h</span><span class="p">|</span><span class="nt">--help</span><span class="p">)</span>
      <span class="nb">grep</span> <span class="s1">'^#'</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> | <span class="nb">sed</span> <span class="s1">'s/^# //'</span>
      <span class="nb">exit </span>0
      <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Unknown arg: </span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done

if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">||</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"--copilot and --project are required"</span> <span class="o">&gt;</span>&amp;2
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">COPILOT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>

<span class="nv">SOURCE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">/instructions"</span>
<span class="nv">DEST_PARENT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/github/instructions"</span>
<span class="nv">DEST</span><span class="o">=</span><span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">/shared"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"Source instructions folder not found: </span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  if</span> <span class="o">[[</span> <span class="nv">$FORCE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">rm</span> <span class="nt">-rf</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
  <span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"Destination exists and is not a symlink: </span><span class="nv">$DEST</span><span class="s2"> (use --force)"</span> <span class="o">&gt;</span>&amp;2
    <span class="nb">exit </span>1
  <span class="k">fi
fi

if</span> <span class="o">[[</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">readlink</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span>
  <span class="nv">ABS_TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span> 2&gt;/dev/null <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span> <span class="o">||</span> <span class="nb">true</span><span class="si">)</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$ABS_TARGET</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nv">$FORCE</span> <span class="nt">-ne</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Symlink already correct. Nothing to do."</span>
    <span class="nb">exit </span>0
  <span class="k">else
    </span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
  <span class="k">fi
fi

</span><span class="nv">LINK_TARGET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$RELATIVE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># compute relative path from DEST_PARENT to SOURCE</span>
  <span class="nv">LINK_TARGET</span><span class="o">=</span><span class="si">$(</span>python3 - <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&lt;&lt;</span><span class="sh">'</span><span class="no">PY</span><span class="sh">'
import os,sys
base=sys.argv[1]
target=sys.argv[2]
print(os.path.relpath(target, start=base))
</span><span class="no">PY
</span>  <span class="si">)</span>
<span class="k">fi

</span><span class="nb">ln</span> <span class="nt">-s</span> <span class="s2">"</span><span class="nv">$LINK_TARGET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Created symlink: </span><span class="nv">$DEST</span><span class="s2"> -&gt; </span><span class="nv">$LINK_TARGET</span><span class="s2">"</span>

<span class="c"># Ensure .gitignore entry</span>
<span class="nv">GI</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/.gitignore"</span>
<span class="nv">ENTRY</span><span class="o">=</span><span class="s1">'github/instructions/shared/'</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  if</span> <span class="o">!</span> <span class="nb">grep</span> <span class="nt">-Fxq</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">printf</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">%s</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"Appended to .gitignore: </span><span class="nv">$ENTRY</span><span class="s2">"</span>
  <span class="k">fi
else
  </span><span class="nb">printf</span> <span class="s1">'# Added automatically to ignore shared instructions\n%s\n'</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span>
  <span class="nb">echo</span> <span class="s2">"Created .gitignore with entry: </span><span class="nv">$ENTRY</span><span class="s2">"</span>
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"Done."</span>
</code></pre></div></div>

<p>This Bash script automates the creation or refreshing of a symbolic link in a project repository, pointing to an instructions folder in a separate GitHub Copilot repository. Its main purpose is to ensure that the project always has access to shared instructions, without duplicating files.</p>

<p>The script accepts several command-line arguments: –copilot specifies the path to the GitHub Copilot repo, –project specifies the path to the project repo, –force allows overwriting an existing destination, and –relative creates a relative symlink instead of an absolute one. It validates that both source and destination paths are provided and resolves them to absolute paths for reliability.</p>

<p>Before creating the symlink, the script checks if the source directory exists. It then prepares the destination parent directory. If the destination already exists and is not a symlink, it will only remove it if the –force flag is set. If the destination is a symlink but points to the wrong target, it will be replaced. The script can compute a relative path for the symlink using a short Python snippet if requested.</p>

<p>After creating the symlink, the script ensures that the new link is ignored by Git by adding an entry to the project’s <code class="language-plaintext highlighter-rouge">.gitignore</code> file. If the file does not exist, it creates one with the appropriate entry. This prevents accidental commits of the shared instructions link. The script provides clear output messages for each major step, helping users understand what actions were taken.</p>

<h3 id="mac-script-create-shared-link-macsh">Mac Script (<code class="language-plaintext highlighter-rouge">create-shared-link-mac.sh</code>)</h3>

<p>Here is the macOS script generated from the prompt:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="c"># macOS version (identical logic to linux script; kept separate for clarity &amp; customization).</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># See linux script for detailed commentary.</span>

<span class="nb">set</span> +u
<span class="nv">FORCE</span><span class="o">=</span>0
<span class="nv">RELATIVE</span><span class="o">=</span>0
<span class="nv">COPILOT</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">""</span>
<span class="nb">set</span> <span class="nt">-u</span>

<span class="k">while</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-gt</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">do
  case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in</span>
    <span class="nt">--copilot</span><span class="p">)</span> <span class="nv">COPILOT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--project</span><span class="p">)</span> <span class="nv">PROJECT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--force</span><span class="p">)</span> <span class="nv">FORCE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">--relative</span><span class="p">)</span> <span class="nv">RELATIVE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">-h</span><span class="p">|</span><span class="nt">--help</span><span class="p">)</span>
      <span class="nb">grep</span> <span class="s1">'^#'</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> | <span class="nb">sed</span> <span class="s1">'s/^# //'</span>
      <span class="nb">exit </span>0
      <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Unknown arg: </span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done

if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">||</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"--copilot and --project are required"</span> <span class="o">&gt;</span>&amp;2
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">COPILOT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>
<span class="nv">SOURCE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">/instructions"</span>
<span class="nv">DEST_PARENT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/github/instructions"</span>
<span class="nv">DEST</span><span class="o">=</span><span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">/shared"</span>

<span class="o">[[</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"Source instructions folder not found: </span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="o">}</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  if</span> <span class="o">[[</span> <span class="nv">$FORCE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then </span><span class="nb">rm</span> <span class="nt">-rf</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="p">;</span> <span class="k">else </span><span class="nb">echo</span> <span class="s2">"Destination exists and is not a symlink (use --force): </span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="k">fi
fi

if</span> <span class="o">[[</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">readlink</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span>
  <span class="nv">ABS_TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span> 2&gt;/dev/null <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span> <span class="o">||</span> <span class="nb">true</span><span class="si">)</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$ABS_TARGET</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nv">$FORCE</span> <span class="nt">-ne</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Symlink already correct. Nothing to do."</span><span class="p">;</span> <span class="nb">exit </span>0
  <span class="k">else
    </span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
  <span class="k">fi
fi

</span><span class="nv">LINK_TARGET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$RELATIVE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">LINK_TARGET</span><span class="o">=</span><span class="si">$(</span>python3 - <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&lt;&lt;</span><span class="sh">'</span><span class="no">PY</span><span class="sh">'
import os,sys
print(os.path.relpath(sys.argv[2], start=sys.argv[1]))
</span><span class="no">PY
</span>  <span class="si">)</span>
<span class="k">fi

</span><span class="nb">ln</span> <span class="nt">-s</span> <span class="s2">"</span><span class="nv">$LINK_TARGET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Created symlink: </span><span class="nv">$DEST</span><span class="s2"> -&gt; </span><span class="nv">$LINK_TARGET</span><span class="s2">"</span>

<span class="nv">GI</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/.gitignore"</span>
<span class="nv">ENTRY</span><span class="o">=</span><span class="s1">'github/instructions/shared/'</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">grep</span> <span class="nt">-Fxq</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">printf</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">%s</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">"Appended to .gitignore: </span><span class="nv">$ENTRY</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>
<span class="k">else
  </span><span class="nb">printf</span> <span class="s1">'# Added automatically to ignore shared instructions\n%s\n'</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">"Created .gitignore with entry: </span><span class="nv">$ENTRY</span><span class="s2">"</span>
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"Done."</span>
</code></pre></div></div>

<p>The macOS script and the Linux script are functionally identical. The logic, argument parsing, symlink creation, and .gitignore handling are the same. The scripts are kept separate for clarity and potential future customization, but currently, there are no substantive differences in their code or behavior.</p>

<p>Key Points:</p>

<ul>
  <li>Both scripts use Bash and similar flags (set -euo pipefail).</li>
  <li>Argument parsing and validation are identical.</li>
  <li>Symlink creation and .gitignore updates follow the same steps.</li>
  <li>The only difference is the comment at the top indicating the target OS.</li>
</ul>

<p><em>Gotcha:</em> If you need OS-specific behavior (e.g., handling macOS quirks), you can customize the macOS script independently without affecting the Linux version.</p>

<h3 id="windows-script-create-shared-link-windowsps1">Windows Script (<code class="language-plaintext highlighter-rouge">create-shared-link-windows.ps1</code>)</h3>

<p>Here is the Windows script generated from the prompt:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">&lt;#
Creates (or refreshes) a junction in a Project repo pointing to the shared ./instructions folder
inside this GitHubCopilot repo.

Junction (target created): &lt;ProjectRepo&gt;\github\instructions\shared
Points to (source):        &lt;GitHubCopilotRepo&gt;\instructions

Parameters:
  -GitHubCopilotRepo   Path to the GitHubCopilot repo root (where the ./instructions folder lives)
  -ProjectRepo         Path to the target Project repo root (where ./github/instructions/shared will be created)
  -Force               If specified, will remove any existing file/dir/junction at the destination

Steps performed:
 1. Validate paths
 2. Ensure Project repo ./github/instructions parent folders exist
 3. Ensure destination removed if Force (or is an existing junction to wrong target)
 4. Create junction via New-Item -ItemType Junction
 5. Add github/instructions/shared/ to Project .gitignore (create file if needed)

Usage examples:
  .\create-shared-link-windows.ps1 -GitHubCopilotRepo C:\git\GitHubCopilot -ProjectRepo C:\git\MyProject
  .\create-shared-link-windows.ps1 -GitHubCopilotRepo ..\GitHubCopilot -ProjectRepo . -Force

#&gt;</span><span class="w">
</span><span class="p">[</span><span class="n">CmdletBinding</span><span class="p">(</span><span class="bp">SupportsShouldProcess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="p">)]</span><span class="w">
</span><span class="kr">param</span><span class="p">(</span><span class="w">
    </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="p">)]</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="w"> </span><span class="nv">$GitHubCopilotRepo</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="p">)]</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="w"> </span><span class="nv">$ProjectRepo</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="n">switch</span><span class="p">]</span><span class="w"> </span><span class="nv">$Force</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">Set-StrictMode</span><span class="w"> </span><span class="nt">-Version</span><span class="w"> </span><span class="nx">Latest</span><span class="w">
</span><span class="bp">$Error</span><span class="n">ActionPreference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Stop'</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Resolve-FullPath</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">param</span><span class="p">([</span><span class="n">string</span><span class="p">]</span><span class="nv">$Path</span><span class="p">)</span><span class="w">
    </span><span class="kr">return</span><span class="w"> </span><span class="p">([</span><span class="n">IO.Path</span><span class="p">]::</span><span class="n">GetFullPath</span><span class="p">((</span><span class="n">Resolve-Path</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$Path</span><span class="p">)</span><span class="o">.</span><span class="nf">Path</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Add-GitIgnoreEntry</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">param</span><span class="p">(</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$RepoRoot</span><span class="p">,</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$RelativeEntry</span><span class="w">
    </span><span class="p">)</span><span class="w">
    </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$RepoRoot</span><span class="w"> </span><span class="s1">'.gitignore'</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"# Added automatically to ignore shared instructions</span><span class="se">`n</span><span class="nv">$RelativeEntry</span><span class="se">`n</span><span class="s2">"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-File</span><span class="w"> </span><span class="nt">-FilePath</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="nt">-Encoding</span><span class="w"> </span><span class="nx">utf8</span><span class="w"> </span><span class="nt">-NoNewline</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Created .gitignore and added entry: </span><span class="nv">$RelativeEntry</span><span class="s2">"</span><span class="w">
        </span><span class="kr">return</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="nv">$content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Content</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="nt">-Raw</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$content</span><span class="w"> </span><span class="o">-notmatch</span><span class="w"> </span><span class="p">[</span><span class="n">regex</span><span class="p">]::</span><span class="n">Escape</span><span class="p">(</span><span class="nv">$RelativeEntry</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Add-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="s2">"</span><span class="se">`n</span><span class="nv">$RelativeEntry</span><span class="s2">"</span><span class="w"> </span><span class="nt">-Encoding</span><span class="w"> </span><span class="nx">utf8</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Appended to .gitignore: </span><span class="nv">$RelativeEntry</span><span class="s2">"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">".gitignore already contains entry."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Resolve absolute paths</span><span class="w">
</span><span class="nv">$gitHubCopilotRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resolve-FullPath</span><span class="w"> </span><span class="nv">$GitHubCopilotRepo</span><span class="w">
</span><span class="nv">$projectRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resolve-FullPath</span><span class="w"> </span><span class="nv">$ProjectRepo</span><span class="w">

</span><span class="nv">$source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$gitHubCopilotRoot</span><span class="w"> </span><span class="s1">'instructions'</span><span class="w">
</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$source</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kr">throw</span><span class="w"> </span><span class="s2">"Source instructions folder not found: </span><span class="nv">$source</span><span class="s2">"</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="nv">$destParent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$projectRoot</span><span class="w"> </span><span class="s1">'github/instructions'</span><span class="w">
</span><span class="nv">$dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$destParent</span><span class="w"> </span><span class="s1">'shared'</span><span class="w">

</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$destParent</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Creating parent directories: </span><span class="nv">$destParent</span><span class="s2">"</span><span class="w">
    </span><span class="n">New-Item</span><span class="w"> </span><span class="nt">-ItemType</span><span class="w"> </span><span class="nx">Directory</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$destParent</span><span class="w"> </span><span class="nt">-Force</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Remove-ExistingDestination</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nv">$item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
        </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$item</span><span class="o">.</span><span class="nf">Attributes</span><span class="w"> </span><span class="o">-band</span><span class="w"> </span><span class="p">[</span><span class="n">IO.FileAttributes</span><span class="p">]::</span><span class="n">ReparsePoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Removing existing junction: </span><span class="nv">$dest</span><span class="s2">"</span><span class="w">
            </span><span class="n">Remove-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$Force</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Removing existing non-junction item at destination due to -Force: </span><span class="nv">$dest</span><span class="s2">"</span><span class="w">
                </span><span class="n">Remove-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Recurse</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
            </span><span class="p">}</span><span class="w">
            </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="kr">throw</span><span class="w"> </span><span class="s2">"Destination exists and is not a junction. Use -Force to remove: </span><span class="nv">$dest</span><span class="s2">"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$existing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$existing</span><span class="o">.</span><span class="nf">Attributes</span><span class="w"> </span><span class="o">-band</span><span class="w"> </span><span class="p">[</span><span class="n">IO.FileAttributes</span><span class="p">]::</span><span class="n">ReparsePoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="c"># Try to read target (fsutil works on admin shells; fallback simply recreate if Force)</span><span class="w">
        </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$false</span><span class="w">
        </span><span class="kr">try</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nv">$targetInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">fsutil</span><span class="w"> </span><span class="nx">reparsepoint</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nx">2</span><span class="err">&gt;</span><span class="bp">$null</span><span class="p">)</span><span class="w">
            </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$targetInfo</span><span class="w"> </span><span class="o">-match</span><span class="w"> </span><span class="s1">'Print Name: (?&lt;t&gt;.+)$'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nv">$currentTarget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$Matches</span><span class="p">[</span><span class="s1">'t'</span><span class="p">]</span><span class="w">
                </span><span class="kr">if</span><span class="w"> </span><span class="p">((</span><span class="n">Resolve-FullPath</span><span class="w"> </span><span class="nv">$currentTarget</span><span class="p">)</span><span class="w"> </span><span class="o">-ne</span><span class="w"> </span><span class="nv">$source</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
            </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="kr">catch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">-or</span><span class="w"> </span><span class="nv">$Force</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">Remove-ExistingDestination</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Junction already points to desired source. Nothing to do."</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
            </span><span class="n">Add-GitIgnoreEntry</span><span class="w"> </span><span class="nt">-RepoRoot</span><span class="w"> </span><span class="nv">$projectRoot</span><span class="w"> </span><span class="nt">-RelativeEntry</span><span class="w"> </span><span class="s1">'github/instructions/shared/'</span><span class="w">
            </span><span class="kr">return</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Remove-ExistingDestination</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Creating junction: </span><span class="nv">$dest</span><span class="s2"> -&gt; </span><span class="nv">$source</span><span class="s2">"</span><span class="w">
</span><span class="n">New-Item</span><span class="w"> </span><span class="nt">-ItemType</span><span class="w"> </span><span class="nx">Junction</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Target</span><span class="w"> </span><span class="nv">$source</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
</span><span class="nx">Write-Host</span><span class="w"> </span><span class="s2">"Junction created successfully."</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">

</span><span class="n">Add-GitIgnoreEntry</span><span class="w"> </span><span class="nt">-RepoRoot</span><span class="w"> </span><span class="nv">$projectRoot</span><span class="w"> </span><span class="nt">-RelativeEntry</span><span class="w"> </span><span class="s1">'github/instructions/shared/'</span><span class="w">

</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Done."</span><span class="w">
</span></code></pre></div></div>

<p>The Windows script (<code class="language-plaintext highlighter-rouge">create-shared-link-windows.ps1</code>) and the MacOS script (<code class="language-plaintext highlighter-rouge">create-shared-link-macos.sh</code>) both create a link from a project repo to a shared instructions folder, but they differ in several key ways aside from language and platform-specific commands.</p>

<h4 id="link-type">Link Type</h4>

<p>Windows: Creates a NTFS junction using PowerShell’s New-Item -ItemType Junction.
MacOS: Creates a symbolic link using <code class="language-plaintext highlighter-rouge">ln -s</code> in Bash.</p>

<h4 id="existing-destination-handling">Existing Destination Handling</h4>

<p>Windows: Checks if the destination is a junction or another file type, removes or throws errors accordingly, supports a <code class="language-plaintext highlighter-rouge">-Force</code> flag.
MacOS: Removes existing destination with <code class="language-plaintext highlighter-rouge">rm -rf</code> if the <code class="language-plaintext highlighter-rouge">--force</code> flag is set.</p>

<h2 id="summary">Summary</h2>

<p>The Windows script is more complex due to NTFS junctions and PowerShell features, while the MacOS script is simpler, relying on Unix symlinks and shell commands. Both achieve the same goal but are tailored to their respective operating systems.</p>

<p>Running the scripts requires appropriate permissions, especially for creating links and modifying directories. Users should ensure they have the necessary rights to execute these scripts in their environments.</p>

<p>This solution provides a simple way of sharing instruction files across multiple projects without duplication, ensuring consistency and ease of maintenance.</p>

<h2 id="feedback-loop">Feedback Loop</h2>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h3 id="disclaimer">Disclaimer</h3>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li>Write a two paragraph introduction to GitHub copilot instruction files</li>
  <li>/explain</li>
  <li>Write a paragraph describing where instruction files can be located and the pros and cons of each location.</li>
  <li>What is a symlink and junction point?</li>
  <li>Describe the differences between the Linux script and the maCOS script</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/SIWT">post</a></small></small></small></p>
</li><li><span class="post-meta">Aug 30, 2025</span>
        <h3>
          <a class="post-link" href="/AIAGSD01/">
            AI-Assisted Greenfield Software Development, Part 1: Business Requirements
          </a>
        </h3><p>This post starts a new series on greenfield software development. The goal is to show the development of a solution starting with the initial context and adding to the solution incrementally. Hopefully you’ll get a sense for what it’s like to build real-world solutions with the assistance of Copilot.</p>

<p>In this first installment we’ll look at the initial context provided to Copilot. This will include the initial instructions and the first prompts submitted to Copilot.</p>

<p>In this series we’ll start with a conceptual model of an academic system. The academic system is a standin for any complex enterprise scale system. I’m using it because it’s a familiar domain and a publicly available model.</p>

<p>We’ll use the conceptual model to generate a domain glossary and a set of instructions for Copilot. We’ll then use those instructions to create implementation prompts and the implementation prompts will create the solution. Here is a flowchart that illustrates the process.</p>

<p><img src="../assets/images/2025-08-30/AIAGSD-Workflow.png" alt="AIAGSD1Workflow.png" /></p>

<p>I’ll cover each of these steps, in detail, in subsequent posts. In this post I’ll cover the initial context, the conceptual model, and the instructions prompt.</p>

<h2 id="the-academia-conceptual-model">The Academia Conceptual Model</h2>

<p>I’ll start this project with a conceptual model. The benefit of starting with a conceptual model is that it is implementation agnostic. It describes the concepts that the solution must implement, not how they should be implemented. It allows us to consider the correctness of the concepts without burdening ourselves with implementation details.</p>

<p>The image below is the conceptual model for the academic system I’m intending to build.</p>

<p><img src="../assets/images/2025-08-30/Academic-Model.png" alt="Academic-Model.png" /></p>

<p>This notation is Object Role Modeling (ORM). FWIW, ORM preceded Object Relational Mapping by decades. ORM is offers a compelling set of benefits, especially for conceptual data modeling and communication between technical and non-technical stakeholders.</p>

<ul>
  <li><strong>Conceptual Clarity &amp; Expressiveness:</strong> ORM offers several advantages over traditional modeling approaches like ER or UML. By aligning with natural language, ORM represents facts using full sentences, making models more intuitive and easier for business users to understand and validate. It also adopts an attribute-free approach, emphasizing roles and relationships rather than attributes, which enhances model stability and adaptability. Furthermore, ORM diagrams provide greater graphical richness, allowing for the clear representation of complex constraints and business rules that might be difficult to capture in ER or UML class diagrams.</li>
  <li><strong>Data Quality &amp; Governance:</strong> ORM enhances data quality and governance by enabling early detection of inconsistencies and modeling errors, which helps prevent issues before they propagate. Its structured and transparent approach also supports the enforcement of data governance policies, making it easier to maintain compliance across systems and teams.</li>
  <li><strong>Flexibility &amp; Transformation:</strong> ORM offers powerful flexibility through model transformation, allowing seamless mapping to and from formats such as ER, UML, XML, OWL, and even logic-based languages like Datalog. This interoperability makes ORM a versatile choice for diverse technical environments. Additionally, ORM excels at capturing a broader range of business rules compared to other modeling approaches, making it particularly well-suited for systems that need to evolve and adapt over time.</li>
  <li><strong>Validation &amp; Collaboration:</strong> ORM enhances collaborative validation by supporting verbalization and example population, allowing stakeholders to review and confirm models using familiar language and concrete instances. Its intuitive structure makes it accessible to both technical and non-technical participants, fostering clearer communication and stronger engagement among developers, analysts, and domain experts throughout the modeling process.</li>
</ul>

<p>You can create ORM models in Visual Studio with the <a href="https://marketplace.visualstudio.com/items?itemName=ORMSolutions.NORMA2019" target="_blank">NORMA</a> (Natural Object-Role Modeling Architect) extension. NORMA ORM models provide natural feedback during model validation.</p>

<p>For our purposes, an ORM model can be verbalized as text that can be used as context for Copilot. This provides Copilot with a rich “understanding” of the problem domain that it can use to assist us in implementing a solution.</p>

<p>Here is the verbalization of the Academia model:</p>
</li><li><span class="post-meta">Jul 30, 2025</span>
        <h3>
          <a class="post-link" href="/GHCPCM/">
            Modes of Chatting with GitHub Copilot
          </a>
        </h3><p>In this post I’ll explore GitHub Copilot chat modes. I’ll cover the built-in chat modes and custom chat modes. We’ll dive into custom chat modes and look at some examples.</p>

<p>To be clear, when I reference Copilot, I’m referring to GitHub Copilot, not any other Microsoft Copilot-branded AI.</p>

<p>At first, Ask was the only Copilot chat mode. Ask mode only responds to prompts. Edit mode allowed the AI to change files. Agent mode allows Copilot to plan and execute work on it’s own. In addition to these built-in chat modes, Copilot also supports custom chat modes which allow you to focus Copilot on specific tasks. You can have as many custom chat mode files as you like in a project. I’ll discuss the cost of using custom chat modes later in the post.</p>

<h2 id="github-copilot-chat-modes">GitHub Copilot Chat Modes</h2>

<p>These four GitHub Copilot modes in VS Code each serve distinct purposes, and knowing when to use which can dramatically streamline your coding and automation tasks:</p>

<h3 id="-ask-modequick-qa-and-conceptual-guidance">🗣 Ask Mode–Quick Q&amp;A and Conceptual Guidance</h3>

<ul>
  <li>Purpose: Conversational support for understanding code, tech concepts, or brainstorming.</li>
  <li>Behavior: Responds to natural language questions using context from your current file or selection.</li>
  <li>Use cases:
    <ul>
      <li>“Explain this PowerShell function.”</li>
      <li>“What’s the best way to implement RBAC in Azure SQL?”</li>
      <li>“Give me three ways to optimize this loop.”</li>
    </ul>
  </li>
  <li>Control: No code changes—just suggestions and explanations.</li>
  <li>Best for: Learning, debugging, and quick clarifications.</li>
</ul>

<h3 id="️-edit-modetargeted-code-changes-with-review-control">✍️ Edit Mode–Targeted Code Changes with Review Control</h3>

<ul>
  <li>Purpose: Apply inline edits across selected files based on your instructions.</li>
  <li>Behavior: You choose the files and describe the change; Copilot proposes edits you can accept or reject.</li>
  <li>Use cases:
    <ul>
      <li>“Refactor this to use async/await.”</li>
      <li>“Add error handling to this script.”</li>
      <li>“Write unit tests for this class.”</li>
    </ul>
  </li>
  <li>Control: Full review before applying changes.</li>
  <li>Best for: Surgical updates, refactoring, and enforcing coding standards.</li>
</ul>

<h3 id="-agent-modeautonomous-multi-step-execution">🤖 Agent Mode–Autonomous Multi-Step Execution</h3>

<ul>
  <li>Purpose: Copilot acts as a coding agent, planning and executing complex tasks across your workspace.</li>
  <li>Behavior: Analyzes your codebase, runs terminal commands, edits files, and iterates until the task is complete.</li>
  <li>Use cases:
    <ul>
      <li>“Migrate this app from React to Vue.”</li>
      <li>“Audit all scripts for deprecated cmdlets.”</li>
      <li>“Build a PowerShell script to automate Azure SQL import with error handling.”</li>
    </ul>
  </li>
  <li>Control: Edits are applied automatically, but risky commands require approval.</li>
  <li>Best for: Large-scale automation, scaffolding, and multi-file refactoring.</li>
</ul>

<h3 id="-️custom-chat-modepersona-based-ai-behavior">🛠 ️Custom Chat Mode–Persona-Based AI Behavior</h3>

<ul>
  <li>Purpose: Define reusable modes with tailored instructions, tools, and model preferences.</li>
  <li>Behavior: You create <code class="language-plaintext highlighter-rouge">.chatmode.md</code> files that shape Copilot’s tone, task focus, and tool access.</li>
  <li>Use cases:
    <ul>
      <li>“Security Scout” mode for vulnerability checks.</li>
      <li>“Clean Code” mode for refactoring with style guides.</li>
      <li>“PowerShell Admin” mode for scripting and automation.</li>
    </ul>
  </li>
  <li>Control: You define the persona, tools, and scope.</li>
  <li>Best for: Consistency across teams, specialized workflows, and repeatable tasks.</li>
</ul>

<p>Looking at the use cases, you can see that there is a progression of increasingly complex use cases. There is also a progression of cost that you should understand. More on that later. Try to align your uses of Copilot with the mode that is best for your case.</p>

<h3 id="-github-copilot-summary-table">🔍 GitHub Copilot Summary Table</h3>

<p>Here are the differences between the modes at a glance.</p>

<table>
  <thead>
    <tr>
      <th>Mode</th>
      <th>Scope</th>
      <th>Code Changes</th>
      <th>Best For</th>
      <th>Control Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ask</td>
      <td>Current file</td>
      <td>❌ No</td>
      <td>Learning, Q&amp;A, brainstorming</td>
      <td>Full user control</td>
    </tr>
    <tr>
      <td>Edit</td>
      <td>Selected files</td>
      <td>✅ Proposed</td>
      <td>Refactoring, bug fixes, test writing</td>
      <td>Review required</td>
    </tr>
    <tr>
      <td>Agent</td>
      <td>Entire workspace</td>
      <td>✅ Automatic</td>
      <td>Automation, scaffolding, multi-step</td>
      <td>Semi-autonomous</td>
    </tr>
    <tr>
      <td>Custom Chat</td>
      <td>User-defined</td>
      <td>✅/❌ Varies</td>
      <td>Specialized tasks, team consistency</td>
      <td>Fully customizable</td>
    </tr>
  </tbody>
</table>

<p>Do what you can to align your use of Copilot with the appropriate mode.</p>

<p>Let’s take a deeper dive into custom chat modes.</p>

<h2 id="-what-is-a-custom-chat-mode">🔧 What Is a Custom Chat Mode?</h2>

<p>It’s essentially a user-defined configuration file (<code class="language-plaintext highlighter-rouge">chatmode.md</code>) that tells Copilot how to think, act, and respond. For example, you can create modes tailored for:</p>

<ul>
  <li>🔄 Script refactoring with PowerShell best practices</li>
  <li>🛡️ Compliance audits for RBAC in Azure SQL</li>
  <li>📚 Clean documentation with markdown linting</li>
</ul>

<p>Pretty much any repeated workflow or process is a good candidate for a custom chat mode.</p>

<p>Let’s walk through the steps for creating a custom chat mode.</p>

<h2 id="-step-by-step-creating-your-custom-chat-mode">🪜 Step-by-Step: Creating Your Custom Chat Mode</h2>

<ol>
  <li>Create a <code class="language-plaintext highlighter-rouge">chatmode.md</code> file.</li>
</ol>

<ul>
  <li>Open a new file in your repo or workspace and name it <code class="language-plaintext highlighter-rouge">chatmode.md</code>.</li>
</ul>

<ol>
  <li>Define the mode’s identity.</li>
</ol>

<ul>
  <li>Start with a name and focus area, for example:</li>
</ul>

<pre><code class="language-txt"># Mode Name: PowerShell Admin
## Focus: Automation, CLI consistency, error handling
</code></pre>

<p>The Mode Name will show up in the Set Mode drop-down in the VS Code Copilot Chat UI.</p>

<p><img src="../assets/images/2025-07-30/Custome-Chat-Modes-In-Copilot-UI.png" alt="Custom Chat Modes as shown in the Copilot UI" /></p>

<h3 id="-what-the-chat-mode-focus-does">🎯 What the Chat Mode Focus Does</h3>

<ul>
  <li>Defines the mode’s core purpose—e.g., automation, refactoring, auditing.</li>
  <li>Guides Copilot’s response strategy—what to prioritize, what to avoid.</li>
  <li>Improves consistency—especially when switching between modes or sharing with teammates.</li>
</ul>

<h4 id="-how-copilot-uses-focus">🧠 How Copilot Uses Focus</h4>

<p>When you load a mode with a Focus section, Copilot interprets it as a high-level directive. For example:</p>

<pre><code class="language-txt">## Focus
- Automation, error handling, and CLI consistency
</code></pre>

<p>This tells Copilot to:</p>

<ul>
  <li>Prefer modular PowerShell scripts</li>
  <li>Emphasize robust error handling</li>
  <li>Avoid speculative or overly creative suggestions</li>
</ul>

<h4 id="-focus-best-practices">🧩 Focus Best Practices</h4>

<p>Here a some practices to keep in mind when setting focus.</p>

<table>
  <thead>
    <tr>
      <th>Tip</th>
      <th>Why It Helps</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Use short, clear phrases</td>
      <td>Keeps the mode readable and scannable</td>
    </tr>
    <tr>
      <td>Align with tools and instructions</td>
      <td>Ensures coherence across the mode</td>
    </tr>
    <tr>
      <td>Avoid vague goals like “be helpful”</td>
      <td>Specificity improves output quality</td>
    </tr>
  </tbody>
</table>

<h4 id="-example-comparison">🔍 Example Comparison</h4>

<p>Here are some example foci and how the foci would affect Copilot’s behavior.</p>

<table>
  <thead>
    <tr>
      <th>Mode Name</th>
      <th>Focus</th>
      <th>Resulting Behavior</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PowerShell Admin</td>
      <td>Automation, error handling</td>
      <td>Precise CLI scripts with retries and logging</td>
    </tr>
    <tr>
      <td>Clean Code</td>
      <td>Refactoring, readability</td>
      <td>Style-guide compliant suggestions</td>
    </tr>
    <tr>
      <td>Security Scout</td>
      <td>Vulnerability checks</td>
      <td>Highlights insecure patterns and recommends fixes</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>Specify instructions and behavior.</li>
</ol>

<ul>
  <li>Set tone, priorities, and response style:</li>
</ul>

<pre><code class="language-txt">- Be concise, use advanced scripting patterns
- Always propose modular solutions
- Prefer `$env:` for environment variables
</code></pre>

<ol>
  <li>List the tools Copilot can use.</li>
</ol>

<ul>
  <li>Map out relevant tools the mode should invoke:</li>
</ul>

<pre><code class="language-txt">tools:
  - PowerShell CLI
  - Azure SQL API
  - Markdown Linter
</code></pre>

<ol>
  <li>Set model preferences (optional).</li>
</ol>

<ul>
  <li>You can guide the underlying model with instructions like:</li>
</ul>

<pre><code class="language-txt">model:
  temperature: 0.4  # Less randomness, more precision
  style: structured
</code></pre>

<ol>
  <li>Save, load, and test.</li>
</ol>

<ul>
  <li>In VS Code, activate the mode by opening the chat interface and selecting your saved <code class="language-plaintext highlighter-rouge">chatmode.md</code>. Try commands like:</li>
</ul>

<pre><code class="language-txt">- "Build a CLI script for importing Azure SQL with retry logic."
- "Audit PowerShell scripts for deprecated cmdlets."
</code></pre>

<h3 id="-pro-tip-for-modular-workflow">🎯 Pro Tip for Modular Workflow</h3>

<p>Use multiple modes for different task scopes:</p>

<ul>
  <li>One for RBAC auditing</li>
  <li>One for documentation linting</li>
  <li>One for script automation</li>
</ul>

<p>You can switch between them or embed them in your MCP configs for seamless productivity.</p>

<h2 id="managing-multiple-custom-chat-modes">Managing Multiple Custom Chat Modes</h2>

<p>Managing multiple custom chat mode files is a smart way to modularize your workflows. Here’s how to keep things clean, scalable, and switchable:</p>

<p>🗂️ 1. Organize your chat mode files.</p>

<ul>
  <li>Create a dedicated folder.</li>
  <li>Use <code class="language-plaintext highlighter-rouge">.github/chatmodes/</code> in your workspace to store all your <code class="language-plaintext highlighter-rouge">*.chatmode.md</code> files.</li>
  <li>Example structure:</li>
</ul>

<pre><code class="language-txt">.github/
  chatmodes/
    powershell-admin.chatmode.md
    security-scout.chatmode.md
    clean-code.chatmode.md
</code></pre>

<p>📦 2. Use clear naming conventions.</p>

<ul>
  <li>Prefix by domain or task: <code class="language-plaintext highlighter-rouge">rbac-audit.chatmode.md</code>, <code class="language-plaintext highlighter-rouge">markdown-linter.chatmode.md</code>.</li>
  <li>Helps with discoverability and switching modes quickly.</li>
</ul>

<h2 id="-switching-between-modes-in-vs-code">🔄 Switching Between Modes in VS Code</h2>

<ul>
  <li>Open the Copilot Chat panel.</li>
  <li>Click the mode dropdown at the bottom.</li>
  <li>Select the desired mode from your saved list.</li>
  <li>Each mode loads its own tools, instructions, and model preferences.</li>
</ul>

<h2 id="-pro-tips-for-managing-many-modes">🧠 Pro Tips for Managing Many Modes</h2>

<p>Here are some tips on managing multiple custom chat mode files.</p>

<table>
  <thead>
    <tr>
      <th>Strategy</th>
      <th>Benefit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Tag modes by team or task</td>
      <td>Easier collaboration and onboarding</td>
    </tr>
    <tr>
      <td>Use shared repo for team-wide modes</td>
      <td>Centralized updates and version control</td>
    </tr>
    <tr>
      <td>Document each mode’s purpose in comments</td>
      <td>Faster understanding and maintenance</td>
    </tr>
    <tr>
      <td>Group modes by folder if needed</td>
      <td>e.g., chatmodes/security/, chatmodes/automation/</td>
    </tr>
  </tbody>
</table>

<h3 id="-bonus-mcp-integration">🧩 Bonus: MCP Integration</h3>

<p>If you’re using MCP instruction files, you can reference specific chat modes within those workflows—making it seamless to switch personas mid-task.</p>

<h2 id="custom-chat-mode-examples">Custom Chat Mode Examples</h2>

<p>Here are three examples of custom chat modes.</p>

<h3 id="sample-custom-chat-mode-files">Sample Custom Chat Mode Files</h3>

<p>🧮 1. Structured Git coach for branch discipline.</p>

<ul>
  <li>Great for repositories with complex Git workflows, rebasing policies, and automation gates.</li>
</ul>

<pre><code class="language-txt"># Name: Git Flow Strategist
# Focus: Branching policies, merge style enforcement, and CI/CD hygiene
# Temperature: 0.3
# Style: Confident, pragmatic, and slightly opinionated

You help developers navigate complex Git workflows with a focus on clean history and team compliance. You enforce rebase discipline, squash merge standards, and CI policy triggers.

## Capabilities
- Compare merge strategies and visualize commit impacts
- Suggest rebase workflows for feature branches
- Identify potential CI/CD integration gaps
- Recommend automated checks in GitHub Actions

## Expectations
When contributors ask about Git:
- Always provide examples or diagrams showing branching logic
- Explain tradeoffs clearly and offer team-friendly defaults
- Respect security and traceability concerns across environments
</code></pre>

<p>This mode specializes in guiding developers through advanced Git workflows by promoting best practices that maintain clean commit history and ensure team-wide compliance. When supporting contributors, it responds with visual branching examples, clearly outlines tradeoffs in workflow decisions, and tailors guidance to uphold both security standards and traceability across development environments.
Note the temperature preference that instructs the NLM to be more precise.</p>

<h3 id="️-common-model-preferences">⚙️ Common Model Preferences</h3>

<p>Here is a list of the common model preferences:</p>

<table>
  <thead>
    <tr>
      <th>Preference</th>
      <th>Description</th>
      <th>Typical Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Temperature</td>
      <td>Controls randomness and creativity</td>
      <td>Lower for precision, higher for brainstorming</td>
    </tr>
    <tr>
      <td>Style</td>
      <td>Shapes formatting and tone</td>
      <td>Structured, concise, analytical, etc.</td>
    </tr>
    <tr>
      <td>Top-p (nucleus sampling)</td>
      <td>Limits token selection to top probability mass</td>
      <td>Fine-tunes diversity vs. focus</td>
    </tr>
    <tr>
      <td>Frequency penalty</td>
      <td>Reduces repetition of common tokens</td>
      <td>Helps avoid redundant output</td>
    </tr>
    <tr>
      <td>Presence penalty</td>
      <td>Encourages introducing new topics</td>
      <td>Useful for ideation or exploration</td>
    </tr>
    <tr>
      <td>Max tokens</td>
      <td>Sets response length limit</td>
      <td>Prevents overly long or short replies</td>
    </tr>
    <tr>
      <td>Stop sequences</td>
      <td>Defines where generation should halt</td>
      <td>Useful for code blocks or markdown</td>
    </tr>
    <tr>
      <td>Tool access</td>
      <td>Enables specific tools (e.g., CLI, linter)</td>
      <td>Tailors responses to your workflow</td>
    </tr>
    <tr>
      <td>Persona instructions</td>
      <td>Guides tone, behavior, and task focus</td>
      <td>Core to custom chat modes</td>
    </tr>
  </tbody>
</table>

<p>✍️ 2. Markdown doc optimizer with Mermaid Fluenc
Perfect for technical writing and diagram-rich README generation.</p>

<pre><code class="language-txt"># Name: Doc Design Architect
# Focus: Technical documentation, diagramming with Mermaid, and readability improvements
# Temperature: 0.4
# Style: Friendly, precise, and formatting-conscious

You structure documentation to maximize clarity and impact. You incorporate Mermaid diagrams, annotate flows, and guide contributors on best practices for accessibility and skimmability.

## Capabilities
- Generate diagrams from architecture or workflow inputs
- Refactor markdown for better navigation and scanning
- Suggest formatting changes to improve comprehension

## Expectations
When asked to document code:
- Break content into sections with proper headers and lists
- Use diagrams to illustrate complex concepts
- Annotate Mermaid output and flag ambiguity in user stories
</code></pre>

<p>This mode specializes in crafting technical documentation that is both visually structured and easy to absorb, combining markdown precision with fluent Mermaid diagramming. It continuously refines formatting for accessibility and readability, flagging vague areas and guiding contributors toward concise, user-friendly documentation aligned with best practices.
Note that this mode is asking for less precision and is requesting the response be friendly, precise, and formatting-conscious.</p>

<p>🔐 3. Playwright Compliance Guardian for secure automation</p>

<p>This example focuses Copilot on assisting with securing test automation.</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Name: Secure Test Engineer</span>

<span class="gh"># Focus: Playwright MCP automation with risk mitigation and CI pipeline integration</span>

<span class="gh"># Temperature: 0.2</span>

<span class="gh"># Style: Direct, risk-aware, and methodical</span>

You evaluate and strengthen Playwright test scripts for security, isolation, and CI traceability. Your responses prioritize reliability, scalability, and audit compliance.

<span class="gu">## Capabilities</span>
<span class="p">
-</span> Review selectors and identify flakiness
<span class="p">-</span> Recommend secure test design and data handling
<span class="p">-</span> Suggest CI/CD improvements with annotated YAML snippets

<span class="gu">## Expectations</span>

When reviewing test automation:
<span class="p">
-</span> Flag potential injection risks or environment bleed
<span class="p">-</span> Encourage modular test architecture and coverage modeling
<span class="p">-</span> Offer alternatives for flaky or insecure patterns
</code></pre></div></div>

<p>This mode specializes in enhancing Playwright test scripts by enforcing high standards for security, test isolation, and CI/CD traceability. When reviewing automation, it flags potential vulnerabilities like injection risks or environment bleed, advocates for modular test architecture, and proposes scalable solutions to address brittle or insecure testing patterns—all with a clear emphasis on long-term maintainability.
This mode is asking for the most precision and is requesting the response be direct, risk-aware, and methodical.</p>

<h2 id="chat-mode-cost-implications">Chat Mode Cost Implications</h2>

<p>It should come as no surprise that the more capable modes are more expensive. The cost implications depend on which mode you use and which model powers the response. Here’s a breakdown based on GitHub Copilot’s current pricing structure as of mid-2025:</p>

<h3 id="-cost-implications-by-mode">💰 Cost Implications by Mode</h3>

<p>Here are the cost implication by chat mode.</p>

<table>
  <thead>
    <tr>
      <th>Mode</th>
      <th>Cost Impact</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ask Mode</td>
      <td>✅ Free with included models (e.g., GPT‑4o, GPT‑4.1) <br /> ❌ Premium if using GPT‑4.5, Claude, Gemini, etc.</td>
      <td>Ask mode is cheapest if you stick to default models.</td>
    </tr>
    <tr>
      <td>Edit Mode</td>
      <td>✅ Same as Ask Mode</td>
      <td>Charges apply only if premium models are used.</td>
    </tr>
    <tr>
      <td>Agent Mode</td>
      <td>❌ Always counts as 1 premium request per prompt</td>
      <td>Even with default models, Agent mode consumes premium quota.</td>
    </tr>
  </tbody>
</table>

<h3 id="-monthly-premium-request-allowance">📦 Monthly Premium Request Allowance</h3>

<p>Here are the monthly premium request allowances per plan.</p>

<table>
  <thead>
    <tr>
      <th>Plan</th>
      <th>Premium Requests</th>
      <th>Cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Copilot Free</td>
      <td>50/month</td>
      <td>$0</td>
    </tr>
    <tr>
      <td>Copilot Pro</td>
      <td>300/month</td>
      <td>$10/month</td>
    </tr>
    <tr>
      <td>Copilot Pro+</td>
      <td>1500/month</td>
      <td>$39.99/month</td>
    </tr>
    <tr>
      <td>Extra Requests</td>
      <td>$0.04/request</td>
      <td>Pay-as-you-go</td>
    </tr>
  </tbody>
</table>

<h3 id="-key-takeaways">🧠 Key Takeaways</h3>

<ul>
  <li>Ask/edit modes are cost-efficient if you use included models.</li>
  <li>Agent mode always consumes premium requests—even for simple tasks.</li>
  <li>If you’re running high-volume automation or multi-step refactoring, Agent mode can burn through your quota quickly.</li>
  <li>You can monitor usage in VS Code under Copilot › Settings › Billing &amp; Usage.</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>Effective use of chat modes is a key in both controlling Copilot and in managing costs. Custom chat modes allow you to change hats and tailor Copilot to work efficiently and effectively in different problem domains. Chat modes work in concert with instruction files, which is another way of controlling Copilot. I’ll explore instruction files in another blog post soon.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h4 id="disclaimer">Disclaimer</h4>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p><strong>Prompts:</strong></p>

<ul>
  <li>Compare and contrast Copilot Ask, Edit, Agent, and Custom chat modes</li>
  <li>Show me how to create a Custom chat mode</li>
  <li>Can you show me three sample Custom chat mode files?</li>
  <li>/explain model preferences - Temperature: 0.4 - Style: Structured</li>
  <li>what other model preferences are there?</li>
  <li>If you enter the same “ask” prompt in ask, edit and agent modes, what is the cost implications in terms of the expense to process the prompt</li>
  <li>/Explain the use of the Focus property in a Copilot custom chat mode</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/GHCPCM">post</a></small></small></small></p>
</li><li><span class="post-meta">May 29, 2025</span>
        <h3>
          <a class="post-link" href="/UIAI4/">
            Developing User Interfaces with GitHub Copilot, Part 4
          </a>
        </h3><p>In the conclusion to this series on AI assisted UI development, I’ll have GitHub Copilot (GHC) add client-side sorting to a data table. If you missed any of the previous posts, you can find them here: <a href="https://www.codemag.com/Blog/AIPractitioner/UIAI1" target="_blank">Part 1</a>, <a href="https://www.codemag.com/Blog/AIPractitioner/UIAI2" target="_blank">Part 2</a>, and <a href="https://www.codemag.com/Blog/AIPractitioner/UIAI3" target="_blank">Part 3</a>.</p>

<p>Whenever data is rendered in a table, users often find it useful to sort the table by the data in one column. Modern UIs often let a user click on a column header to sort. Typically this requires changes to the HTML to trigger the sorting, code changes to sort the data, control the sort direction, and render the sorted data. Style changes are needed to provide user feedback. Sorting by more than one column complicates the implementation.</p>

<p>Rather than hand-coding the changes it could be more effective to ask GHC to attempt the implementation as it will likely be faster and hopefully with good quality. The prompt to GHC and it’s response are enclosed in horizontal lines.</p>

<hr />

<p>Here is the prompt I gave Claude 3.7 Sonnet with the context of the <code class="language-plaintext highlighter-rouge">vSalesFunnelSummary.vue</code>.</p>

<blockquote>
  <p>Prompt: Add the ability to sort the detail-table by Status, Total Deal Value, or Average Age.</p>
</blockquote>

<p>Here is the Copilot response:</p>

<blockquote>
  <p>GHC: # Adding Sorting Functionality to the Sales Funnel Summary Table.
I’ll add the ability to sort the details table by implementing sort functionality on the table headers.</p>
</blockquote>

<h2 id="step-by-step-solution">Step-by-Step Solution:</h2>

<ol>
  <li>Add state variables to track the sort field and direction</li>
  <li>Create a computed property that returns the sorted data</li>
  <li>Implement a toggle sort function</li>
  <li>Update the table headers to be clickable and show sort indicators</li>
  <li>Use the sorted data in the table rendering</li>
</ol>

<hr />

<p>GHC generated a new version of the Vue with several modifications. I’ll talk through what GHC’s modification rather than the entire code listing. If you interested in the rest of the code, it’s included as <a href="#Listing1">Listing 1</a> at the end of the post.
<a id="Back2Article1"> </a></p>

<h3 id="update-the-table-headers-to-be-clickable-and-show-sort-indicators">Update the Table Headers to be Clickable and Show Sort Indicators</h3>

<p>First up are the HTML changes. GHC updated the Status, Total Deal Value, and Average Age column header cells to add the UI and triggers needed to implement the sorting.</p>

<p>The column header cell is interactive: it uses the <code class="language-plaintext highlighter-rouge">@click</code> directive to call a method named <code class="language-plaintext highlighter-rouge">toggleSort</code> with an argument associated with the sorted column (<code class="language-plaintext highlighter-rouge">dealStatus</code>, <code class="language-plaintext highlighter-rouge">totalDealValue</code> and <code class="language-plaintext highlighter-rouge">averageAge</code>) whenever the header is clicked. This suggests that clicking the header will sort the table rows based on the associated field.</p>

<p>The <code class="language-plaintext highlighter-rouge">class="sortable"</code> adds a CSS class to visually indicate that the column can be sorted by adding a hover effect.</p>

<p>Inside the header, there is a conditional <code class="language-plaintext highlighter-rouge">&lt;span&gt;</code> element that displays a sort indicator (an up or down arrow) only if the current value of <code class="language-plaintext highlighter-rouge">sortField</code> matches the associated field. The arrow direction is determined by the value of <code class="language-plaintext highlighter-rouge">sortDirection</code>: an upward arrow (▲) for ascending order and a downward arrow (▼) for descending order. This provides a clear visual cue to users about the current sort state of the column.</p>

<h3 id="use-the-sorted-data-in-the-table-rendering">Use the Sorted Data in the Table Rendering</h3>

<p>The last code change in this section is the change to render the <code class="language-plaintext highlighter-rouge">sortedStatus</code> collection instead of the <code class="language-plaintext highlighter-rouge">summary.byDealStatus</code> collection.</p>

<p>Here are the HTML change to the <strong>vSalesFunnelDetail</strong> Vue.</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.html.png" alt="The HTML change to the vSalesFunnelDetail Vue" /></p>

<p>The style changes for sortable columns are fairly straight forward. The <code class="language-plaintext highlighter-rouge">.sortable</code> class is applied to table headers that users can click to sort data. It changes the cursor to a pointer, signaling interactivity, and disables text selection to prevent accidental highlighting when clicking. The <code class="language-plaintext highlighter-rouge">position: relative;</code> property allows for absolutely positioned child elements, such as the sort indicators.</p>

<p>When a user hovers over a sortable column, the <code class="language-plaintext highlighter-rouge">.sortable:hover</code> selector changes the background color to a light gray (<code class="language-plaintext highlighter-rouge">#f5f5f5</code>), providing visual feedback that the column is interactive. The <code class="language-plaintext highlighter-rouge">.sort-indicator</code> class is used for elements (like arrows or icons) that visually indicate the current sort direction. It adds a small left margin and ensures the indicator is displayed inline with the column header text.</p>

<p>Here are the style changes to the <strong>vSalesFunnelDetail</strong> Vue.</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.html.png" alt="The style changes to the vSalesFunnelDetail Vue" /></p>

<h3 id="add-state-variables-to-track-the-sort-field-and-direction">Add State Variables to Track the Sort Field and Direction</h3>

<p>The first set of code changes defines two reactive variables using Vue’s Composition API and the <code class="language-plaintext highlighter-rouge">ref</code> function. The first variable, <code class="language-plaintext highlighter-rouge">sortField</code>, is initialized with the string <code class="language-plaintext highlighter-rouge">'dealStatus'</code>. This means that, by default, any sorting logic in the component will use the <code class="language-plaintext highlighter-rouge">'dealStatus'</code> property of the data as the field to sort by. The second variable, <code class="language-plaintext highlighter-rouge">sortDirection</code>, is initialized with the string <code class="language-plaintext highlighter-rouge">'asc'</code>, which stands for ascending order which is the default sorting direction.</p>

<p>By using <code class="language-plaintext highlighter-rouge">ref</code>, both <code class="language-plaintext highlighter-rouge">sortField</code> and <code class="language-plaintext highlighter-rouge">sortDirection</code> become reactive references. This means that if their values change (for example, when a user clicks a column header to change the sort order), Vue will automatically update any part of the template or computed properties that depend on these values.</p>

<p>Here are the state variable code changes to the <strong>vSalesFunnelDetail</strong> Vue.</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.script.1.png" alt="The state variable code changes to the vSalesFunnelDetail Vue" /></p>

<h3 id="create-a-computed-property-that-returns-the-sorted-data">Create a Computed Property That Returns the Sorted Data</h3>

<p>The main code changes to implement sorting are defining a computed property called <code class="language-plaintext highlighter-rouge">sortedStatuses</code> and a function called <code class="language-plaintext highlighter-rouge">toggleSort</code> within a Vue component using the Composition API. The purpose of <code class="language-plaintext highlighter-rouge">sortedStatuses</code> is to provide a dynamically sorted array of deal statuses, which is used to display a sortable table in the UI.</p>

<p>The <code class="language-plaintext highlighter-rouge">sortedStatuses</code> computed property first checks if the summary object and its <code class="language-plaintext highlighter-rouge">byDealStatus</code> property are available. If not, it returns an empty array to prevent errors. If the data exists, it creates a shallow copy of the <code class="language-plaintext highlighter-rouge">byDealStatus</code> array and sorts it based on the currently selected sort field and direction. The sorting logic checks if the <code class="language-plaintext highlighter-rouge">sortField</code> is <code class="language-plaintext highlighter-rouge">'dealStatus'</code>; if so, it sorts by the <code class="language-plaintext highlighter-rouge">dealStatus</code> property of each item. Otherwise, it sorts by the property specified by <code class="language-plaintext highlighter-rouge">sortField.value</code>. The sort direction is controlled by <code class="language-plaintext highlighter-rouge">sortDirection.value</code>, toggling between ascending (<code class="language-plaintext highlighter-rouge">'asc'</code>) and descending (<code class="language-plaintext highlighter-rouge">'desc'</code>). The comparison uses subtraction, which works for numeric fields, but could cause issues if the fields are strings (a potential “gotcha” to watch for).</p>

<h3 id="implement-a-toggle-sort-function">Implement a Toggle Sort Function</h3>

<p>The <code class="language-plaintext highlighter-rouge">toggleSort</code> function is used to change the sorting behavior when a user interacts with the UI (for example, by clicking a column header). If the user clicks the same field that’s already being sorted, the function toggles the sort direction. If a new field is selected, it sets that as the new sort field and defaults the direction to ascending.</p>

<p>Here are the main code changes to the <strong>vSalesFunnelDetail</strong> Vue.</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.script.2.png" alt="The main code changes to the vSalesFunnelDetail Vue" /></p>

<p>The final set of changes to the code are modifications to the <code class="language-plaintext highlighter-rouge">setup()</code> function return statement. In this context, the return statement exposes specific variables, computed properties, and functions to the component’s template, making them accessible for data binding and event handling. Here Copilot added <code class="language-plaintext highlighter-rouge">sortField</code>, <code class="language-plaintext highlighter-rouge">sortDirection</code>, <code class="language-plaintext highlighter-rouge">sortedStatuses</code>, and <code class="language-plaintext highlighter-rouge">toggleSort</code>.</p>

<p>By returning these properties and methods, the component ensures they are available for use in the template, supporting dynamic rendering, user interaction, and data presentation.</p>

<p>Here are the code changes to the return in the <strong>vSalesFunnelDetail</strong> Vue</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.script.3.png" alt="The code changes to the return in the vSalesFunnelDetail Vue" /></p>

<h3 id="the-rendered-vsalesfunneldetail-vue">The Rendered vSalesFunnelDetail Vue</h3>

<p>Here is the rendered Vue showing that the Total Deal Value is sorted in descending order:</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.rendered.png" alt="The rendered Vue showing that the Total Deal Value is sorted in descending order" /></p>

<p>This is another good example of GHC making seamless change to a user interface with no more effort than a reasonably accurate prompt. In this case, the first prompt submitted produced something very close to the desired results. Outside of some minor cosmetic changes, the only significant issue with the implementation is that there is some repeating logic that could be eliminated by turning the sortable header into a separate component. I’ll improve the implementation by asking GHC to componentize the sortable table header.</p>

<hr />

<blockquote>
  <p>Prompt: Extract the sortable header as a separate component. Include all of the relevant code, html, and css. Replace the existing implementation with the new component.</p>
</blockquote>

<blockquote>
  <p>GHC: Create a new component for the sortable table header. Import and use the new <code class="language-plaintext highlighter-rouge">SortableHeader</code> component in place of the previous implementation.</p>
</blockquote>

<hr />

<p>Let’s review the suggested changes.</p>

<p>As requested Copilot created a new <code class="language-plaintext highlighter-rouge">SortableHeader</code> Vue. This Vue defines a table header (<code class="language-plaintext highlighter-rouge">&lt;th&gt;</code>) that is designed to be sortable. The <code class="language-plaintext highlighter-rouge">:class</code> binding applies the class <code class="language-plaintext highlighter-rouge">sortable</code> to the header by default, and conditionally adds the <code class="language-plaintext highlighter-rouge">active</code> class if the <code class="language-plaintext highlighter-rouge">isActive</code> property is true. This allows for visual feedback to indicate which column is currently being sorted.</p>

<p>The <code class="language-plaintext highlighter-rouge">@click="onClick"</code> directive attaches a click event handler, so when the header is clicked, it triggers the <code class="language-plaintext highlighter-rouge">onClick</code> method.</p>

<p>Inside the <code class="language-plaintext highlighter-rouge">&lt;th&gt;</code>, the <code class="language-plaintext highlighter-rouge">&lt;slot /&gt;</code> element allows you to insert custom content, such as the column label, from the parent component. If the column is active (i.e., currently being sorted), a <code class="language-plaintext highlighter-rouge">&lt;span&gt;</code> with the class <code class="language-plaintext highlighter-rouge">sort-indicator</code> is displayed. This span shows an upward arrow (▲) if the <code class="language-plaintext highlighter-rouge">sortDirection</code> is <code class="language-plaintext highlighter-rouge">"asc"</code> (ascending), or a downward arrow (▼) if it is <code class="language-plaintext highlighter-rouge">"desc"</code> (descending). This visual cue helps users understand the current sort state of the column.</p>

<p>Here is the new <code class="language-plaintext highlighter-rouge">SortableHeader</code> component HTML:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;th</span> <span class="na">:class=</span><span class="s">"['sortable', { active: isActive }]"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"onClick"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;slot</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">v-if=</span><span class="s">"isActive"</span> <span class="na">class=</span><span class="s">"sort-indicator"</span><span class="nt">&gt;</span>
      {{ sortDirection === "asc" ? "▲" : "▼" }}
    <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/th&gt;</span>
<span class="nt">&lt;/template&gt;</span>
</code></pre></div></div>

<p>The component accepts three required properties: <code class="language-plaintext highlighter-rouge">field</code>, <code class="language-plaintext highlighter-rouge">sortField</code>, and <code class="language-plaintext highlighter-rouge">sortDirection</code>, all of which are strings. The <code class="language-plaintext highlighter-rouge">field</code> property identifies which column this header represents. The <code class="language-plaintext highlighter-rouge">sortField</code> property indicates which column is currently being sorted, and <code class="language-plaintext highlighter-rouge">sortDirection</code> specifies the current sort order (for example, <code class="language-plaintext highlighter-rouge">"asc"</code> or <code class="language-plaintext highlighter-rouge">"desc"</code>).</p>

<p>A computed property, <code class="language-plaintext highlighter-rouge">isActive</code>, checks if the current header is the one being sorted by comparing <code class="language-plaintext highlighter-rouge">sortField</code> to <code class="language-plaintext highlighter-rouge">field</code>. This is useful for visually indicating the active sort column in the UI.</p>

<p>The component emits a <code class="language-plaintext highlighter-rouge">toggle-sort</code> event when the header is clicked, passing its <code class="language-plaintext highlighter-rouge">field</code> value as a payload. This allows the parent component to update the sorting state accordingly. The <code class="language-plaintext highlighter-rouge">onClick</code> method handles this event emission.</p>

<p>Here is the new <code class="language-plaintext highlighter-rouge">SortableHeader</code> component script:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script&gt;</span>
  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SortableHeader</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">field</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
      <span class="na">sortField</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
      <span class="na">sortDirection</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">emits</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">toggle-sort</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">computed</span><span class="p">:</span> <span class="p">{</span>
      <span class="nf">isActive</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">sortField</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">;</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
      <span class="nf">onClick</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">$emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">toggle-sort</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">);</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">.sortable</code> class gives elements a pointer cursor to indicate interactivity, disables text selection for a smoother user experience, and sets the position to relative, which is often used to position child elements absolutely within the header. The <code class="language-plaintext highlighter-rouge">.sortable:hover</code> selector changes the background color when the user hovers over the header, providing a visual cue that the element is interactive. The <code class="language-plaintext highlighter-rouge">.sort-indicator</code> class adds a small left margin and ensures the indicator (such as an arrow or icon) is displayed inline with the header text. The <code class="language-plaintext highlighter-rouge">.active</code> class makes the font bold, typically used to highlight the currently sorted column.</p>

<p>Because the styles are scoped, they only apply to this component, preventing unintended side effects elsewhere in your application.</p>

<p>Here is the new <code class="language-plaintext highlighter-rouge">SortableHeader</code> component CSS:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nc">.sortable</span> <span class="p">{</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
    <span class="py">user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.sortable</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="nx">#f5f5f5</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.sort-indicator</span> <span class="p">{</span>
    <span class="nl">margin-left</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">inline-block</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.active</span> <span class="p">{</span>
    <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p>Now for the changes to the <strong>vSalesFunnelDetail</strong> Vue. If you interested in the rest of the code, it’s included as <a href="#Listing2">Listing 2</a> at the end of the post.
<a id="Back2article2"> </a></p>

<p>In the HTML, Copilot has replaced the <code class="language-plaintext highlighter-rouge">&lt;th&gt;</code> elements with references to the new <code class="language-plaintext highlighter-rouge">SortableHeader</code> component.</p>

<p>The <code class="language-plaintext highlighter-rouge">field="dealStatus"</code> property tells the component which data field it represents. The <code class="language-plaintext highlighter-rouge">:sortField="sortField"</code> and <code class="language-plaintext highlighter-rouge">:sortDirection="sortDirection"</code> properties are bound to reactive data or computed properties in your parent component, indicating the current field being sorted and the direction of the sort (ascending or descending).</p>

<p>The <code class="language-plaintext highlighter-rouge">@toggle-sort="toggleSort"</code> part is an event listener. When the <code class="language-plaintext highlighter-rouge">SortableHeader</code> emits a <code class="language-plaintext highlighter-rouge">toggle-sort</code> event (when the user clicks the header), it triggers the <code class="language-plaintext highlighter-rouge">toggleSort</code> method in the parent component updating the sorting state.</p>

<p>Here are the changes Copilot made to the <strong>vSalesFunnelDetail</strong> HTML:</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.comp.html.png" alt="The changes Copilot made to the `vSalesFunnelDetail` HTML" /></p>

<p>The import statement brings in the <code class="language-plaintext highlighter-rouge">SortableHeader</code> component from the specified path (<code class="language-plaintext highlighter-rouge">"@/components/SortableHeader.vue"</code>). By importing <code class="language-plaintext highlighter-rouge">SortableHeader</code>, we can use it as a child component within the current Vue component (<code class="language-plaintext highlighter-rouge">vSalesFunnelSummary.vue</code>), promoting code reuse and modularity. Encapsulating the logic and presentation of the sortable table headers in a dedicated component isolates the code in the component from the reset of the app reducing side-effects.</p>

<p>In Vue, the components option is used to locally register other components that you want to use within the template of the current component. By listing <code class="language-plaintext highlighter-rouge">SortableHeader</code> inside the components object, you make it available for use as a custom element (e.g., <code class="language-plaintext highlighter-rouge">&lt;SortableHeader /&gt;</code>) in the template section of <code class="language-plaintext highlighter-rouge">vSalesFunnelSummary.vue</code>.</p>

<p>Here are the changes Copilot made to the <strong>vSalesFunnelDetail</strong> script:</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.comp.script.png" alt="The changes Copilot made to the `vSalesFunnelDetail` script" /></p>

<p>Copilot drops the CSS used by the sortable header in the <strong>vSalesFunnelDetail</strong> Vue. These styles now reside in the <code class="language-plaintext highlighter-rouge">SortableHeader</code> component.</p>

<p>Here are the changes Copilot made to the <strong>vSalesFunnelDetail</strong> CSS:</p>

<p><img src="../assets/images/2025-05-29/vSalesFunnelDetail.comp.syles.png" alt="The changes Copilot made to the `vSalesFunnelDetail` CSS" /></p>

<p>This helps keep the code modular and organized by breaking down complex UIs into smaller, reusable components. The <code class="language-plaintext highlighter-rouge">SortableHeader</code> component can be used in any Vue needing this functionality.</p>

<p>This concludes this series on using AI to develop user interfaces. I’ll likely return to UI development in the future.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h4 id="disclaimer">Disclaimer</h4>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<ul>
  <li><strong>Prompts:</strong> I use the /explain prompt assist in describing the code changes.</li>
</ul>

<hr />

<h3 id="listings">Listings</h3>

<h4 id="listing-1"><a id="Listing1">Listing #1</a></h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sales-funnel-summary"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Sales Funnel Summary<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"summary-table"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tbody&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th&gt;</span>Total Count<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.count }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Average Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.averageDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Total Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.totalDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Max Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.maxDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Min Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.minDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Average Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.averageAge.toFixed(2) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Max Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.maxAge }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Min Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.minAge }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
      <span class="nt">&lt;/table&gt;</span>

      <span class="c">&lt;!-- Replace CSS Funnel with Chart.js Canvas --&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Sales Pipeline<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"chart-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;canvas</span> <span class="na">ref=</span><span class="s">"chartCanvas"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;h2&gt;</span>Deals by Status<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"detail-table"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;thead&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="err">@</span><span class="na">click=</span><span class="s">"toggleSort('dealStatus')"</span> <span class="na">class=</span><span class="s">"sortable"</span><span class="nt">&gt;</span>
              Status
              <span class="nt">&lt;span</span> <span class="na">v-if=</span><span class="s">"sortField === 'dealStatus'"</span> <span class="na">class=</span><span class="s">"sort-indicator"</span><span class="nt">&gt;</span>
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              <span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Count<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Average Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th</span> <span class="err">@</span><span class="na">click=</span><span class="s">"toggleSort('totalDealValue')"</span> <span class="na">class=</span><span class="s">"sortable"</span><span class="nt">&gt;</span>
              Total Deal Value
              <span class="nt">&lt;span</span>
                <span class="na">v-if=</span><span class="s">"sortField === 'totalDealValue'"</span>
                <span class="na">class=</span><span class="s">"sort-indicator"</span>
              <span class="nt">&gt;</span>
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              <span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Max Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Min Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th</span> <span class="err">@</span><span class="na">click=</span><span class="s">"toggleSort('averageAge')"</span> <span class="na">class=</span><span class="s">"sortable"</span><span class="nt">&gt;</span>
              Average Age
              <span class="nt">&lt;span</span> <span class="na">v-if=</span><span class="s">"sortField === 'averageAge'"</span> <span class="na">class=</span><span class="s">"sort-indicator"</span><span class="nt">&gt;</span>
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              <span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Max Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Min Age<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/thead&gt;</span>
        <span class="nt">&lt;tbody&gt;</span>
          <span class="nt">&lt;tr</span> <span class="na">v-for=</span><span class="s">"status in sortedStatuses"</span> <span class="na">:key=</span><span class="s">"status.dealStatus"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;td&gt;</span>
              <span class="nt">&lt;strong&gt;</span>{{ getDealStatusDescription(status.dealStatus) }}<span class="nt">&lt;/strong&gt;</span>
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.count }}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.averageDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.totalDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.maxDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.minDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.averageAge.toFixed(2) }}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.maxAge }}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.minAge }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">watch</span><span class="p">,</span> <span class="nx">nextTick</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getSalesFunnelSummary</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Chart</span><span class="p">,</span> <span class="nx">registerables</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">chart.js</span><span class="dl">"</span><span class="p">;</span>

  <span class="c1">// Register Chart.js components</span>
  <span class="nx">Chart</span><span class="p">.</span><span class="nf">register</span><span class="p">(...</span><span class="nx">registerables</span><span class="p">);</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SalesFunnelSummary</span><span class="dl">"</span><span class="p">,</span>
    <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">summary</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">chartCanvas</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">chart</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

      <span class="c1">// Add sort state variables</span>
      <span class="kd">const</span> <span class="nx">sortField</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">"</span><span class="s2">dealStatus</span><span class="dl">"</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">sortDirection</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchSalesFunnelSummary</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getSalesFunnelSummary</span><span class="p">();</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span>
              <span class="dl">"</span><span class="s2">Failed to fetch sales funnel summary</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch sales funnel summary</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">getDealStatusDescription</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dealStatus</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">statusMap</span> <span class="o">=</span> <span class="p">{</span>
          <span class="mi">0</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Unknown</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">1</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Initial Discussion</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">2</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Serious Discussion</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">3</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Contract Discussion</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">4</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Won)</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">5</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Lost)</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">6</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Abandoned)</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nx">statusMap</span><span class="p">[</span><span class="nx">dealStatus</span><span class="p">]</span> <span class="o">||</span> <span class="s2">`Status </span><span class="p">${</span><span class="nx">dealStatus</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">formatCurrency</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nc">NumberFormat</span><span class="p">(</span><span class="dl">"</span><span class="s2">en-US</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">style</span><span class="p">:</span> <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">currency</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">}).</span><span class="nf">format</span><span class="p">(</span><span class="nx">value</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
      <span class="p">};</span>

      <span class="c1">// Computed property for filtered funnel stages</span>
      <span class="kd">const</span> <span class="nx">funnelStages</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

        <span class="c1">// Filter out "Unknown" (0) and "Closed Lost" (5)</span>
        <span class="k">return</span> <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span>
          <span class="p">.</span><span class="nf">filter</span><span class="p">((</span><span class="nx">status</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">].</span><span class="nf">includes</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">))</span>
          <span class="p">.</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">dealStatus</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="c1">// Add computed property for sorted statuses</span>
      <span class="kd">const</span> <span class="nx">sortedStatuses</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

        <span class="k">return</span> <span class="p">[...</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">].</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">let</span> <span class="nx">aValue</span><span class="p">,</span> <span class="nx">bValue</span><span class="p">;</span>

          <span class="k">if </span><span class="p">(</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">dealStatus</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">aValue</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">;</span>
            <span class="nx">bValue</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">aValue</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span>
            <span class="nx">bValue</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span>
          <span class="p">}</span>

          <span class="k">if </span><span class="p">(</span><span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">aValue</span> <span class="o">-</span> <span class="nx">bValue</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">bValue</span> <span class="o">-</span> <span class="nx">aValue</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">});</span>

      <span class="c1">// Add sort toggle function</span>
      <span class="kd">const</span> <span class="nx">toggleSort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Toggle direction if clicking the same field</span>
          <span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="c1">// Set new field and default to ascending</span>
          <span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">field</span><span class="p">;</span>
          <span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Render the Chart.js chart</span>
      <span class="kd">const</span> <span class="nx">renderChart</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">chartCanvas</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

        <span class="c1">// Destroy existing chart if it exists</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">chart</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">chart</span><span class="p">.</span><span class="nf">destroy</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="kd">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">chartCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">"</span><span class="s2">2d</span><span class="dl">"</span><span class="p">);</span>

        <span class="c1">// Prepare data for chart</span>
        <span class="kd">const</span> <span class="nx">labels</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">stage</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nf">getDealStatusDescription</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">),</span>
        <span class="p">);</span>
        <span class="kd">const</span> <span class="nx">counts</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">stage</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">stage</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>

        <span class="c1">// Color palette for chart bars</span>
        <span class="kd">const</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span>
          <span class="dl">"</span><span class="s2">rgba(52, 152, 219, 0.8)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgba(46, 134, 193, 0.8)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgba(40, 116, 166, 0.8)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgba(33, 97, 140, 0.8)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgba(26, 82, 118, 0.8)</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">];</span>

        <span class="kd">const</span> <span class="nx">borderColors</span> <span class="o">=</span> <span class="p">[</span>
          <span class="dl">"</span><span class="s2">rgb(52, 152, 219)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgb(46, 134, 193)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgb(40, 116, 166)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgb(33, 97, 140)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgb(26, 82, 118)</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">];</span>

        <span class="c1">// Create the chart</span>
        <span class="nx">chart</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Chart</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">labels</span><span class="p">:</span> <span class="nx">labels</span><span class="p">,</span>
            <span class="na">datasets</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="na">label</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Number of Deals</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">data</span><span class="p">:</span> <span class="nx">counts</span><span class="p">,</span>
                <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">colors</span><span class="p">,</span>
                <span class="na">borderColor</span><span class="p">:</span> <span class="nx">borderColors</span><span class="p">,</span>
                <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="p">},</span>
            <span class="p">],</span>
          <span class="p">},</span>
          <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">indexAxis</span><span class="p">:</span> <span class="dl">"</span><span class="s2">y</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// Horizontal bar chart</span>
            <span class="na">responsive</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">maintainAspectRatio</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">tooltip</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">callbacks</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">label</span><span class="p">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">dataIndex</span><span class="p">;</span>
                    <span class="kd">const</span> <span class="nx">stage</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="k">return</span> <span class="s2">`Count: </span><span class="p">${</span><span class="nx">stage</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="s2"> deals`</span><span class="p">;</span>
                  <span class="p">},</span>
                  <span class="na">afterLabel</span><span class="p">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">dataIndex</span><span class="p">;</span>
                    <span class="kd">const</span> <span class="nx">stage</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="k">return</span> <span class="p">[</span>
                      <span class="s2">`Total: </span><span class="p">${</span><span class="nf">formatCurrency</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">totalDealValue</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span>
                      <span class="s2">`Avg Age: </span><span class="p">${</span><span class="nx">stage</span><span class="p">.</span><span class="nx">averageAge</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span><span class="s2"> days`</span><span class="p">,</span>
                    <span class="p">];</span>
                  <span class="p">},</span>
                <span class="p">},</span>
              <span class="p">},</span>
              <span class="na">legend</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">display</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Hide legend</span>
              <span class="p">},</span>
            <span class="p">},</span>
            <span class="na">scales</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">x</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">beginAtZero</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Number of Deals</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">},</span>
              <span class="p">},</span>
              <span class="na">y</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Pipeline Stage</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">},</span>
              <span class="p">},</span>
            <span class="p">},</span>
          <span class="p">},</span>
        <span class="p">});</span>
      <span class="p">};</span>

      <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchSalesFunnelSummary</span><span class="p">();</span>
      <span class="p">});</span>

      <span class="c1">// Watch for changes to render chart when data is loaded</span>
      <span class="nf">watch</span><span class="p">(</span><span class="nx">summary</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">nextTick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nf">renderChart</span><span class="p">();</span>
        <span class="p">});</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">summary</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">chartCanvas</span><span class="p">,</span>
        <span class="nx">getDealStatusDescription</span><span class="p">,</span>
        <span class="nx">formatCurrency</span><span class="p">,</span>
        <span class="nx">funnelStages</span><span class="p">,</span>
        <span class="c1">// Add new properties to the return object</span>
        <span class="nx">sortField</span><span class="p">,</span>
        <span class="nx">sortDirection</span><span class="p">,</span>
        <span class="nx">sortedStatuses</span><span class="p">,</span>
        <span class="nx">toggleSort</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nc">.summary-table</span> <span class="nt">th</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">fit-content</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.summary-table</span> <span class="nt">td</span> <span class="p">{</span>
    <span class="nl">padding-left</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.detail-table</span> <span class="nt">th</span> <span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">fit-content</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.detail-table</span> <span class="nt">td</span> <span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">fit-content</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c">/* Chart Container */</span>
  <span class="nc">.chart-container</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">900px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">25px</span> <span class="nb">auto</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="nx">#f8f9fa</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
    <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">2px</span> <span class="m">4px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.05</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nt">h2</span> <span class="p">{</span>
    <span class="nl">margin-top</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">150%</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">175%</span><span class="p">;</span>
    <span class="nl">padding-top</span><span class="p">:</span> <span class="m">2%</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c">/* Add styling for sortable columns */</span>
  <span class="nc">.sortable</span> <span class="p">{</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
    <span class="py">user-select</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.sortable</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="nx">#f5f5f5</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.sort-indicator</span> <span class="p">{</span>
    <span class="nl">margin-left</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">inline-block</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<h4 id="back-to-main-article"><a href="#Back2Article1">Back to main article</a></h4>

<hr />

<h4 id="listing-2"><a id="Listing2">Listing #2</a></h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sales-funnel-summary"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Sales Funnel Summary<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"summary-table"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tbody&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th&gt;</span>Total Count<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.count }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Average Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.averageDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Total Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.totalDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Max Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.maxDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Min Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ formatCurrency(summary.minDealValue) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Average Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.averageAge.toFixed(2) }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Max Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.maxAge }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"width: 200px"</span><span class="nt">&gt;</span>Min Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;td&gt;</span>{{ summary.minAge }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
      <span class="nt">&lt;/table&gt;</span>

      <span class="c">&lt;!-- Replace CSS Funnel with Chart.js Canvas --&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Sales Pipeline<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"chart-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;canvas</span> <span class="na">ref=</span><span class="s">"chartCanvas"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;h2&gt;</span>Deals by Status<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"detail-table"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;thead&gt;</span>
          <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;SortableHeader</span>
              <span class="na">field=</span><span class="s">"dealStatus"</span>
              <span class="na">:sortField=</span><span class="s">"sortField"</span>
              <span class="na">:sortDirection=</span><span class="s">"sortDirection"</span>
              <span class="err">@</span><span class="na">toggle-sort=</span><span class="s">"toggleSort"</span>
            <span class="nt">&gt;</span>
              Status
            <span class="nt">&lt;/SortableHeader&gt;</span>
            <span class="nt">&lt;th&gt;</span>Count<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Average Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;SortableHeader</span>
              <span class="na">field=</span><span class="s">"totalDealValue"</span>
              <span class="na">:sortField=</span><span class="s">"sortField"</span>
              <span class="na">:sortDirection=</span><span class="s">"sortDirection"</span>
              <span class="err">@</span><span class="na">toggle-sort=</span><span class="s">"toggleSort"</span>
            <span class="nt">&gt;</span>
              Total Deal Value
            <span class="nt">&lt;/SortableHeader&gt;</span>
            <span class="nt">&lt;th&gt;</span>Max Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Min Deal Value<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;SortableHeader</span>
              <span class="na">field=</span><span class="s">"averageAge"</span>
              <span class="na">:sortField=</span><span class="s">"sortField"</span>
              <span class="na">:sortDirection=</span><span class="s">"sortDirection"</span>
              <span class="err">@</span><span class="na">toggle-sort=</span><span class="s">"toggleSort"</span>
            <span class="nt">&gt;</span>
              Average Age
            <span class="nt">&lt;/SortableHeader&gt;</span>
            <span class="nt">&lt;th&gt;</span>Max Age<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Min Age<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/thead&gt;</span>
        <span class="nt">&lt;tbody&gt;</span>
          <span class="nt">&lt;tr</span> <span class="na">v-for=</span><span class="s">"status in sortedStatuses"</span> <span class="na">:key=</span><span class="s">"status.dealStatus"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;td&gt;</span>
              <span class="nt">&lt;strong&gt;</span>{{ getDealStatusDescription(status.dealStatus) }}<span class="nt">&lt;/strong&gt;</span>
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.count }}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.averageDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.totalDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.maxDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>
              {{ formatCurrency(status.minDealValue) }}
            <span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.averageAge.toFixed(2) }}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.maxAge }}<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"text-right"</span><span class="nt">&gt;</span>{{ status.minAge }}<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">watch</span><span class="p">,</span> <span class="nx">nextTick</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getSalesFunnelSummary</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Chart</span><span class="p">,</span> <span class="nx">registerables</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">chart.js</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="nx">SortableHeader</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/components/SortableHeader.vue</span><span class="dl">"</span><span class="p">;</span>

  <span class="c1">// Register Chart.js components</span>
  <span class="nx">Chart</span><span class="p">.</span><span class="nf">register</span><span class="p">(...</span><span class="nx">registerables</span><span class="p">);</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SalesFunnelSummary</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">SortableHeader</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">summary</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">chartCanvas</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">chart</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

      <span class="c1">// Add sort state variables</span>
      <span class="kd">const</span> <span class="nx">sortField</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">"</span><span class="s2">dealStatus</span><span class="dl">"</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">sortDirection</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchSalesFunnelSummary</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getSalesFunnelSummary</span><span class="p">();</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Failed to fetch
                                                      || sales funnel summary</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch sales funnel summary</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">getDealStatusDescription</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dealStatus</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">statusMap</span> <span class="o">=</span> <span class="p">{</span>
          <span class="mi">0</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Unknown</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">1</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Initial Discussion</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">2</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Serious Discussion</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">3</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Contract Discussion</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">4</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Won)</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">5</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Lost)</span><span class="dl">"</span><span class="p">,</span>
          <span class="mi">6</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Abandoned)</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="nx">statusMap</span><span class="p">[</span><span class="nx">dealStatus</span><span class="p">]</span> <span class="o">||</span> <span class="s2">`Status </span><span class="p">${</span><span class="nx">dealStatus</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">formatCurrency</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nc">NumberFormat</span><span class="p">(</span><span class="dl">"</span><span class="s2">en-US</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">style</span><span class="p">:</span> <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">currency</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">}).</span><span class="nf">format</span><span class="p">(</span><span class="nx">value</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
      <span class="p">};</span>

      <span class="c1">// Computed property for filtered funnel stages</span>
      <span class="kd">const</span> <span class="nx">funnelStages</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

        <span class="c1">// Filter out "Unknown" (0) and "Closed Lost" (5)</span>
        <span class="k">return</span> <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">.</span><span class="nf">filter</span><span class="p">((</span><span class="nx">status</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="o">!</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">].</span><span class="nf">includes</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">)).</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span>
            <span class="nx">a</span><span class="p">.</span><span class="nx">dealStatus</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="c1">// Add computed property for sorted statuses</span>
      <span class="kd">const</span> <span class="nx">sortedStatuses</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

        <span class="k">return</span> <span class="p">[...</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">].</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">let</span> <span class="nx">aValue</span><span class="p">,</span> <span class="nx">bValue</span><span class="p">;</span>

          <span class="k">if </span><span class="p">(</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">dealStatus</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">aValue</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">;</span>
            <span class="nx">bValue</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">aValue</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span>
            <span class="nx">bValue</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span>
          <span class="p">}</span>

          <span class="k">if </span><span class="p">(</span><span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">aValue</span> <span class="o">-</span> <span class="nx">bValue</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">bValue</span> <span class="o">-</span> <span class="nx">aValue</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">});</span>

      <span class="c1">// Add sort toggle function</span>
      <span class="kd">const</span> <span class="nx">toggleSort</span> <span class="o">=</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Toggle direction if clicking the same field</span>
          <span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="c1">// Set new field and default to ascending</span>
          <span class="nx">sortField</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">field</span><span class="p">;</span>
          <span class="nx">sortDirection</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">asc</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Render the Chart.js chart</span>
      <span class="kd">const</span> <span class="nx">renderChart</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">chartCanvas</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

        <span class="c1">// Destroy existing chart if it exists</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">chart</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">chart</span><span class="p">.</span><span class="nf">destroy</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="kd">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">chartCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">"</span><span class="s2">2d</span><span class="dl">"</span><span class="p">);</span>

        <span class="c1">// Prepare data for chart</span>
        <span class="kd">const</span> <span class="nx">labels</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">stage</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nf">getDealStatusDescription</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">));</span>
        <span class="kd">const</span> <span class="nx">counts</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">stage</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">stage</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>

        <span class="c1">// Color palette for chart bars</span>
        <span class="kd">const</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">rgba(52, 152, 219, 0.8)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rgba(46, 134, 193, 0.8)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgba(40, 116, 166, 0.8)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rgba(33, 97, 140, 0.8)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgba(26, 82, 118, 0.8)</span><span class="dl">"</span><span class="p">];</span>

        <span class="kd">const</span> <span class="nx">borderColors</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">rgb(52, 152, 219)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rgb(46, 134, 193)</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">rgb(40, 116, 166)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rgb(33, 97, 140)</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rgb(26, 82, 118)</span><span class="dl">"</span><span class="p">];</span>

        <span class="c1">// Create the chart</span>
        <span class="nx">chart</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Chart</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">labels</span><span class="p">:</span> <span class="nx">labels</span><span class="p">,</span>
            <span class="na">datasets</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="na">label</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Number of Deals</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">data</span><span class="p">:</span> <span class="nx">counts</span><span class="p">,</span>
                <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">colors</span><span class="p">,</span>
                <span class="na">borderColor</span><span class="p">:</span> <span class="nx">borderColors</span><span class="p">,</span>
                <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="p">},</span>
            <span class="p">],</span>
          <span class="p">},</span>
          <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">indexAxis</span><span class="p">:</span> <span class="dl">"</span><span class="s2">y</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// Horizontal bar chart</span>
            <span class="na">responsive</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">maintainAspectRatio</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">tooltip</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">callbacks</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">label</span><span class="p">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">dataIndex</span><span class="p">;</span>
                    <span class="kd">const</span> <span class="nx">stage</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="k">return</span> <span class="s2">`Count: </span><span class="p">${</span><span class="nx">stage</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="s2"> deals`</span><span class="p">;</span>
                  <span class="p">},</span>
                  <span class="na">afterLabel</span><span class="p">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">dataIndex</span><span class="p">;</span>
                    <span class="kd">const</span> <span class="nx">stage</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                    <span class="k">return</span> <span class="p">[</span><span class="s2">`Total: </span><span class="p">${</span><span class="nf">formatCurrency</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">totalDealValue</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span>
                    <span class="s2">`Avg Age: </span><span class="p">${</span><span class="nx">stage</span><span class="p">.</span><span class="nx">averageAge</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span><span class="s2"> days`</span><span class="p">];</span>
                  <span class="p">},</span>
                <span class="p">},</span>
              <span class="p">},</span>
              <span class="na">legend</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">display</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Hide legend</span>
              <span class="p">},</span>
            <span class="p">},</span>
            <span class="na">scales</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">x</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">beginAtZero</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Number of Deals</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">},</span>
              <span class="p">},</span>
              <span class="na">y</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                  <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Pipeline Stage</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">},</span>
              <span class="p">},</span>
            <span class="p">},</span>
          <span class="p">},</span>
        <span class="p">});</span>
      <span class="p">};</span>

      <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchSalesFunnelSummary</span><span class="p">();</span>
      <span class="p">});</span>

      <span class="c1">// Watch for changes to render chart when data is loaded</span>
      <span class="nf">watch</span><span class="p">(</span><span class="nx">summary</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">nextTick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nf">renderChart</span><span class="p">();</span>
        <span class="p">});</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">summary</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">chartCanvas</span><span class="p">,</span>
        <span class="nx">getDealStatusDescription</span><span class="p">,</span>
        <span class="nx">formatCurrency</span><span class="p">,</span>
        <span class="nx">funnelStages</span><span class="p">,</span>
        <span class="c1">// Add new properties to the return object</span>
        <span class="nx">sortField</span><span class="p">,</span>
        <span class="nx">sortDirection</span><span class="p">,</span>
        <span class="nx">sortedStatuses</span><span class="p">,</span>
        <span class="nx">toggleSort</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nc">.summary-table</span> <span class="nt">th</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">fit-content</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.summary-table</span> <span class="nt">td</span> <span class="p">{</span>
    <span class="nl">padding-left</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.detail-table</span> <span class="nt">th</span> <span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">fit-content</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nc">.detail-table</span> <span class="nt">td</span> <span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>
    <span class="nl">padding-right</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">fit-content</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c">/* Chart Container */</span>
  <span class="nc">.chart-container</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">900px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">25px</span> <span class="nb">auto</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="nx">#f8f9fa</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
    <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">2px</span> <span class="m">4px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.05</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nt">h2</span> <span class="p">{</span>
    <span class="nl">margin-top</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">150%</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">175%</span><span class="p">;</span>
    <span class="nl">padding-top</span><span class="p">:</span> <span class="m">2%</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<h4 id="back-to-main-article-1"><a href="#Back2article2">Back to main article</a></h4>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/UIAI4">post</a></small></small></small></p>
</li><li><span class="post-meta">Apr 29, 2025</span>
        <h3>
          <a class="post-link" href="/UIAI3/">
            Developing User Interfaces with GitHub Copilot, Part 3
          </a>
        </h3><p>This post is the third installment in the series on AI assisted UI development. While this post is largely stand-alone, consider reading parts <a href="https://www.codemag.com/blog/AIPractitioner/UIAI" target="_blank">1</a> and <a href="https://www.codemag.com/Blog/AIPractitioner/UIAI2" target="_blank">2</a> before reading this post.</p>

<h2 id="have-ai-add-a-data-visualization">Have AI Add a Data Visualization</h2>

<p>We’ve looked at using AI to create and add UI components in prior posts. In this post I’ll add a data visualization to a page.</p>

<p>This figure shows a rendered Sales Funnel Summary page before making any changes:</p>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-Rendered-before-Changes.png" alt="The vSalesFunnelSummary page rendered before any changes" /></p>

<p>The goal in this post is to have AI add a data visualization of the sales funnel to the page.</p>

<p><strong>Prompt: Using css, add a Sales Funnel graphic from the data in the detail-table. Include the total value and the average age. Don’t include ‘unknown’ or ‘closed lost’.</strong></p>

<p>Below is the response from the Claude 3.7 Sonnet Thinking model.</p>

<p><em>Begin Response</em></p>

<p><em>I’ll add a CSS-based Sales Funnel visualization between your summary table and the details table. Here’s how to implement it:</em></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sales-funnel-summary"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Sales Funnel Summary<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"summary-table"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- ...existing summary table content... --&gt;</span>
      <span class="nt">&lt;/table&gt;</span>

      <span class="c">&lt;!-- Sales Funnel Visualization --&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Sales Pipeline<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"funnel-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">v-for=</span><span class="s">"stage in funnelStages"</span> <span class="na">:key=</span><span class="s">"stage.dealStatus"</span>
             <span class="na">class=</span><span class="s">"funnel-stage"</span> <span class="na">:style=</span><span class="s">"{ width: getStageWidth(stage) + '%' }"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"stage-header"</span><span class="nt">&gt;</span>{{ getDealStatusDescription(stage.dealStatus) }}<span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"stage-count"</span><span class="nt">&gt;</span>{{ stage.count }} deals<span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"stage-value"</span><span class="nt">&gt;</span>Total: {{ formatCurrency(stage.totalDealValue) }}<span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"stage-age"</span><span class="nt">&gt;</span>Avg Age: {{ stage.averageAge.toFixed(1) }} days<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;h2&gt;</span>Deals by Status<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"detail-table"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- ...existing detail table content... --&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">getSalesFunnelSummary</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SalesFunnelSummary</span><span class="dl">"</span><span class="p">,</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">summary</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

    <span class="c1">// ...existing functions...</span>

    <span class="c1">// Computed property for funnel stages (filtered and sorted)</span>
    <span class="kd">const</span> <span class="nx">funnelStages</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

      <span class="c1">// Filter out "Unknown" (0) and "Closed Lost" (5)</span>
      <span class="k">return</span> <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span>
        <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">status</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">].</span><span class="nf">includes</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">))</span>
        <span class="p">.</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">dealStatus</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">);</span> <span class="c1">// Sort by deal status</span>
    <span class="p">});</span>

    <span class="c1">// Calculate the width for each stage based on count</span>
    <span class="kd">const</span> <span class="nx">getStageWidth</span> <span class="o">=</span> <span class="p">(</span><span class="nx">stage</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

      <span class="kd">const</span> <span class="nx">maxCount</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(...</span><span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">count</span><span class="p">));</span>
      <span class="c1">// Scale width from 40% to 90% for better visibility</span>
      <span class="k">return</span> <span class="mi">40</span> <span class="o">+</span> <span class="p">((</span><span class="nx">stage</span><span class="p">.</span><span class="nx">count</span> <span class="o">/</span> <span class="nx">maxCount</span><span class="p">)</span> <span class="o">*</span> <span class="mi">50</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">fetchSalesFunnelSummary</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">summary</span><span class="p">,</span>
      <span class="nx">loading</span><span class="p">,</span>
      <span class="nx">error</span><span class="p">,</span>
      <span class="nx">funnelStages</span><span class="p">,</span>
      <span class="nx">getStageWidth</span><span class="p">,</span>
      <span class="nx">getDealStatusDescription</span><span class="p">,</span>
      <span class="nx">formatCurrency</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
<span class="c">/* ...existing styles... */</span>

<span class="c">/* Funnel Visualization */</span>
<span class="nc">.funnel-container</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">flex</span><span class="p">;</span>
  <span class="nl">flex-direction</span><span class="p">:</span> <span class="nb">column</span><span class="p">;</span>
  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">gap</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">900px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">25px</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="nx">#f8f9fa</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">2px</span> <span class="m">4px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.05</span><span class="p">);</span>
<span class="p">}</span>

<span class="nc">.funnel-stage</span> <span class="p">{</span>
  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">min-height</span><span class="p">:</span> <span class="m">80px</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">12px</span> <span class="m">20px</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="nf">linear-gradient</span><span class="p">(</span><span class="m">90deg</span><span class="p">,</span> <span class="nx">#3498db</span><span class="p">,</span> <span class="nx">#5dade2</span><span class="p">);</span>
  <span class="nl">color</span><span class="p">:</span> <span class="nx">white</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">6px</span><span class="p">;</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">2px</span> <span class="m">5px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.1</span><span class="p">);</span>
  <span class="nl">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="m">0.3s</span> <span class="nb">ease</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">flex</span><span class="p">;</span>
  <span class="nl">flex-direction</span><span class="p">:</span> <span class="nb">column</span><span class="p">;</span>
  <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.funnel-stage</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">transform</span><span class="p">:</span> <span class="nf">translateX</span><span class="p">(</span><span class="m">5px</span><span class="p">);</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">0</span> <span class="m">4px</span> <span class="m">8px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.15</span><span class="p">);</span>
<span class="p">}</span>

<span class="nc">.stage-header</span> <span class="p">{</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.1em</span><span class="p">;</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">6px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.stage-count</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0.95em</span><span class="p">;</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.stage-value</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0.9em</span><span class="p">;</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="m">500</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.stage-age</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">0.9em</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
  <span class="nl">opacity</span><span class="p">:</span> <span class="m">0.9</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Create color variations based on the stage */</span>
<span class="nc">.funnel-stage</span><span class="nd">:nth-child</span><span class="o">(</span><span class="err">1</span><span class="o">)</span> <span class="p">{</span> <span class="nl">background</span><span class="p">:</span> <span class="nf">linear-gradient</span><span class="p">(</span><span class="m">90deg</span><span class="p">,</span> <span class="nx">#3498db</span><span class="p">,</span> <span class="nx">#5dade2</span><span class="p">);</span> <span class="p">}</span>
<span class="nc">.funnel-stage</span><span class="nd">:nth-child</span><span class="o">(</span><span class="err">2</span><span class="o">)</span> <span class="p">{</span> <span class="nl">background</span><span class="p">:</span> <span class="nf">linear-gradient</span><span class="p">(</span><span class="m">90deg</span><span class="p">,</span> <span class="nx">#2e86c1</span><span class="p">,</span> <span class="nx">#5499c7</span><span class="p">);</span> <span class="p">}</span>
<span class="nc">.funnel-stage</span><span class="nd">:nth-child</span><span class="o">(</span><span class="err">3</span><span class="o">)</span> <span class="p">{</span> <span class="nl">background</span><span class="p">:</span> <span class="nf">linear-gradient</span><span class="p">(</span><span class="m">90deg</span><span class="p">,</span> <span class="nx">#2874a6</span><span class="p">,</span> <span class="nx">#4a87af</span><span class="p">);</span> <span class="p">}</span>
<span class="nc">.funnel-stage</span><span class="nd">:nth-child</span><span class="o">(</span><span class="err">4</span><span class="o">)</span> <span class="p">{</span> <span class="nl">background</span><span class="p">:</span> <span class="nf">linear-gradient</span><span class="p">(</span><span class="m">90deg</span><span class="p">,</span> <span class="nx">#21618c</span><span class="p">,</span> <span class="nx">#417699</span><span class="p">);</span> <span class="p">}</span>
<span class="nc">.funnel-stage</span><span class="nd">:nth-child</span><span class="o">(</span><span class="err">5</span><span class="o">)</span> <span class="p">{</span> <span class="nl">background</span><span class="p">:</span> <span class="nf">linear-gradient</span><span class="p">(</span><span class="m">90deg</span><span class="p">,</span> <span class="nx">#1a5276</span><span class="p">,</span> <span class="nx">#386288</span><span class="p">);</span> <span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">15px</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">150%</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">175%</span><span class="p">;</span>
  <span class="nl">padding-top</span><span class="p">:</span> <span class="m">2%</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p><br /></p>

<p>This implementation:</p>

<ol>
  <li>Adds a new funnel visualization between your summary table and details table</li>
  <li>Filters the data to exclude “Unknown” (status 0) and “Closed Lost” (status 5)</li>
  <li>Sorts the stages by deal status for a logical progression</li>
  <li>Dynamic sizing - Each stage’s width is calculated based on the number of deals relative to the maximum count</li>
  <li>Includes key metrics - Each stage shows:
    <ul>
      <li>The stage name</li>
      <li>Number of deals</li>
      <li>Total deal value</li>
      <li>Average age</li>
    </ul>
  </li>
  <li>Visually appealing design with:
    <ul>
      <li>Gradient backgrounds that vary by stage</li>
      <li>Hover effects for interactivity</li>
      <li>Smooth transitions</li>
      <li>Consistent spacing and alignment</li>
      <li>Box shadows for depth</li>
    </ul>
  </li>
</ol>

<p><em>The funnel provides a clear visual representation of your sales pipeline, showing how deals progress through different stages while highlighting the total value and average age at each stage.</em></p>

<p><em>End Response</em></p>

<p>Here’s a breakdown of the changes:</p>

<p>Add the <code class="language-plaintext highlighter-rouge">funnel-container</code> <code class="language-plaintext highlighter-rouge">div</code> that contains a <code class="language-plaintext highlighter-rouge">div</code> for each stage being rendered, which in turn, contains divs for the data elements.</p>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-Template-Changes.png" alt="Changes to the vSalesFunnelSummary Vue Template implementing the CSS data visualization" /></p>

<p>Add stage filtering and width calculation. Import <code class="language-plaintext highlighter-rouge">computed</code> in order to filter out the unknown and closed won stages and define a function that does the filtering. Also define a function to calculate the stage width based on the number of leads. Finally, return the new function so that it can be called elsewhere.</p>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-Script-Changes.png" alt="Changes to the vSalesFunnelSummary Vue Script implementing the function needed for the CSS data visualization" /></p>

<p>Because I asked for a CSS implementation, most of the work in rendering sales funnel visualization is done with CSS styles. These styles define the backgrounds of each stage and change to the headings. The linear gradient is a nice touch!</p>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-Style-Changes-2.png" alt="Changes to the vSalesFunnelSummary Vue Styles for the CSS data visualization" /></p>

<p>The remainder of the CSS sales funnel visualization styles define the appearance of the stages and the appearance of the text in each stage. Including a nice hover effect.</p>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-Style-Changes.png" alt="Additional changes to the vSalesFunnelSummary Vue Styles for the CSS data visualization" /></p>

<p>Here is the page rendered with the CSS data visualization:</p>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-Rendered-After-Changes.png" alt="The vSalesFunnelSummary Vue Rendered After the CSS data visualization changes" /></p>

<p>This is a workable implementation of the Sales Funnel visualization. It certainly could be improved by altering the styles or even have Copilot alter the styles. As is, it does the job without manual coding.</p>

<p>Now I’ll ask Copilot to remove the CSS implementation and replace it with an implementation built with chart.js.</p>

<h2 id="replace-the-css-implementation-with-a-chartjs-implementation">Replace the CSS Implementation with a chart.js Implementation</h2>

<p><a href="https://www.chartjs.org/" target="_blank">chart.js</a> is a flexible and widely-used open-source JavaScript library for creating interactive, responsive data visualizations in web applications. It provides a simple yet powerful API that enables developers to render various chart types (including bar, line, pie, radar, and many others) using HTML5 Canvas elements. chart.js offers extensive customization options for colors, animations, legends, tooltips, and scales, while maintaining excellent performance even with large datasets. The library automatically handles responsiveness across different screen sizes, supports accessibility features, and integrates seamlessly with modern JavaScript frameworks like Vue, React, and Angular.</p>

<p>Here is how I used Copilot to implement the chart.js visualization:</p>

<p><strong>Prompt: Replace the CSS chart with a similar chart using chart.js</strong></p>

<p>Below is the response from the Claude 3.7 Sonnet Thinking model. As it was generated:</p>

<p><em>Begin Response</em></p>

<p><em>To replace the CSS-based chart with a chart.js implementation, you’ll need to:</em></p>

<ol>
  <li>Install chart.js</li>
  <li>Replace the CSS funnel visualization with a canvas element</li>
  <li>Add the chart.js initialization code</li>
</ol>

<p><em>Here’s how to implement it:</em></p>

<h3 id="step-1-install-chartjs">Step 1: Install chart.js</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>chart.js
</code></pre></div></div>

<h3 id="step-2-update-your-component">Step 2: Update Your Component</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sales-funnel-summary"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Sales Funnel Summary<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"summary-table"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- existing summary table content --&gt;</span>
      <span class="nt">&lt;/table&gt;</span>

      <span class="c">&lt;!-- Replace CSS Funnel with chart.js Canvas --&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Sales Pipeline<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"chart-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;canvas</span> <span class="na">ref=</span><span class="s">"chartCanvas"</span><span class="nt">&gt;&lt;/canvas&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;h2&gt;</span>Deals by Status<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"detail-table"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- existing detail table content --&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">watch</span><span class="p">,</span> <span class="nx">nextTick</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">getSalesFunnelSummary</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Chart</span><span class="p">,</span> <span class="nx">registerables</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">chart.js</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="step-3-add-the-chartjs-initialization-code">Step 3: Add the chart.js initialization code</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Register chart.js components</span>
<span class="nx">Chart</span><span class="p">.</span><span class="nf">register</span><span class="p">(...</span><span class="nx">registerables</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SalesFunnelSummary</span><span class="dl">"</span><span class="p">,</span>
  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">summary</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">chartCanvas</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">chart</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">fetchSalesFunnelSummary</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getSalesFunnelSummary</span><span class="p">();</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Failed to fetch sales funnel summary</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch sales funnel summary</span><span class="dl">"</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">getDealStatusDescription</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dealStatus</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">statusMap</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Unknown</span><span class="dl">"</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Initial Discussion</span><span class="dl">"</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Serious Discussion</span><span class="dl">"</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Contract Discussion</span><span class="dl">"</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Won)</span><span class="dl">"</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Lost)</span><span class="dl">"</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Closed (Abandoned)</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">statusMap</span><span class="p">[</span><span class="nx">dealStatus</span><span class="p">]</span> <span class="o">||</span> <span class="s2">`Status </span><span class="p">${</span><span class="nx">dealStatus</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">formatCurrency</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nc">NumberFormat</span><span class="p">(</span><span class="dl">"</span><span class="s2">en-US</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">style</span><span class="p">:</span> <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">currency</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">}).</span><span class="nf">format</span><span class="p">(</span><span class="nx">value</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Computed property for filtered funnel stages</span>
    <span class="kd">const</span> <span class="nx">funnelStages</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

      <span class="c1">// Filter out "Unknown" (0) and "Closed Lost" (5)</span>
      <span class="k">return</span> <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span>
        <span class="p">.</span><span class="nf">filter</span><span class="p">((</span><span class="nx">status</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">].</span><span class="nf">includes</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">))</span>
        <span class="p">.</span><span class="nf">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">dealStatus</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">// Render the chart.js chart</span>
    <span class="kd">const</span> <span class="nx">renderChart</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">chartCanvas</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

      <span class="c1">// Destroy existing chart if it exists</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">chart</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">chart</span><span class="p">.</span><span class="nf">destroy</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">chartCanvas</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">'</span><span class="s1">2d</span><span class="dl">'</span><span class="p">);</span>

      <span class="c1">// Prepare data for chart</span>
      <span class="kd">const</span> <span class="nx">labels</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">stage</span> <span class="o">=&gt;</span> <span class="nf">getDealStatusDescription</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">dealStatus</span><span class="p">));</span>
      <span class="kd">const</span> <span class="nx">counts</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">stage</span> <span class="o">=&gt;</span> <span class="nx">stage</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>

      <span class="c1">// Color palette for chart bars</span>
      <span class="kd">const</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span>
        <span class="dl">'</span><span class="s1">rgba(52, 152, 219, 0.8)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgba(46, 134, 193, 0.8)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgba(40, 116, 166, 0.8)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgba(33, 97, 140, 0.8)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgba(26, 82, 118, 0.8)</span><span class="dl">'</span>
      <span class="p">];</span>

      <span class="kd">const</span> <span class="nx">borderColors</span> <span class="o">=</span> <span class="p">[</span>
        <span class="dl">'</span><span class="s1">rgb(52, 152, 219)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgb(46, 134, 193)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgb(40, 116, 166)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgb(33, 97, 140)</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">rgb(26, 82, 118)</span><span class="dl">'</span>
      <span class="p">];</span>

      <span class="c1">// Create the chart</span>
      <span class="nx">chart</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Chart</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">labels</span><span class="p">:</span> <span class="nx">labels</span><span class="p">,</span>
          <span class="na">datasets</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Number of Deals</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span> <span class="nx">counts</span><span class="p">,</span>
            <span class="na">backgroundColor</span><span class="p">:</span> <span class="nx">colors</span><span class="p">,</span>
            <span class="na">borderColor</span><span class="p">:</span> <span class="nx">borderColors</span><span class="p">,</span>
            <span class="na">borderWidth</span><span class="p">:</span> <span class="mi">1</span>
          <span class="p">}]</span>
        <span class="p">},</span>
        <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">indexAxis</span><span class="p">:</span> <span class="dl">'</span><span class="s1">y</span><span class="dl">'</span><span class="p">,</span>  <span class="c1">// Horizontal bar chart</span>
          <span class="na">responsive</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="na">maintainAspectRatio</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">plugins</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">tooltip</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">callbacks</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">label</span><span class="p">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">dataIndex</span><span class="p">;</span>
                  <span class="kd">const</span> <span class="nx">stage</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                  <span class="k">return</span> <span class="s2">`Count: </span><span class="p">${</span><span class="nx">stage</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="s2"> deals`</span><span class="p">;</span>
                <span class="p">},</span>
                <span class="na">afterLabel</span><span class="p">:</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">dataIndex</span><span class="p">;</span>
                  <span class="kd">const</span> <span class="nx">stage</span> <span class="o">=</span> <span class="nx">funnelStages</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
                  <span class="k">return</span> <span class="p">[</span>
                    <span class="s2">`Total: </span><span class="p">${</span><span class="nf">formatCurrency</span><span class="p">(</span><span class="nx">stage</span><span class="p">.</span><span class="nx">totalDealValue</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span>
                    <span class="s2">`Avg Age: </span><span class="p">${</span><span class="nx">stage</span><span class="p">.</span><span class="nx">averageAge</span><span class="p">.</span><span class="nf">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span><span class="s2"> days`</span>
                  <span class="p">];</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="na">legend</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">display</span><span class="p">:</span> <span class="kc">false</span> <span class="c1">// Hide legend</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="na">scales</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">x</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">beginAtZero</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Number of Deals</span><span class="dl">'</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="na">y</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">display</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Pipeline Stage</span><span class="dl">'</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">};</span>

    <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">fetchSalesFunnelSummary</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="c1">// Watch for changes to render chart when data is loaded</span>
    <span class="nf">watch</span><span class="p">(</span><span class="nx">summary</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nf">nextTick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">renderChart</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">summary</span><span class="p">,</span>
      <span class="nx">loading</span><span class="p">,</span>
      <span class="nx">error</span><span class="p">,</span>
      <span class="nx">chartCanvas</span><span class="p">,</span>
      <span class="nx">getDealStatusDescription</span><span class="p">,</span>
      <span class="nx">formatCurrency</span><span class="p">,</span>
      <span class="nx">funnelStages</span>
    <span class="p">};</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">style</span> <span class="nx">scoped</span><span class="o">&gt;</span>
<span class="p">.</span><span class="nx">summary</span><span class="o">-</span><span class="nx">table</span> <span class="nx">th</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nx">fit</span><span class="o">-</span><span class="nx">content</span><span class="p">;</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">right</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nx">summary</span><span class="o">-</span><span class="nx">table</span> <span class="nx">td</span> <span class="p">{</span>
  <span class="nx">padding</span><span class="o">-</span><span class="nx">left</span><span class="p">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nx">detail</span><span class="o">-</span><span class="nx">table</span> <span class="nx">th</span> <span class="p">{</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">right</span><span class="p">;</span>
  <span class="nx">padding</span><span class="o">-</span><span class="nx">right</span><span class="p">:</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nx">fit</span><span class="o">-</span><span class="nx">content</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nx">detail</span><span class="o">-</span><span class="nx">table</span> <span class="nx">td</span> <span class="p">{</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">right</span><span class="p">;</span>
  <span class="nx">padding</span><span class="o">-</span><span class="nx">right</span><span class="p">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nx">fit</span><span class="o">-</span><span class="nx">content</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Chart Container */</span>
<span class="p">.</span><span class="nx">chart</span><span class="o">-</span><span class="nx">container</span> <span class="p">{</span>
  <span class="nl">height</span><span class="p">:</span> <span class="mi">400</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">max</span><span class="o">-</span><span class="nx">width</span><span class="p">:</span> <span class="mi">900</span><span class="nx">px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="mi">25</span><span class="nx">px</span> <span class="nx">auto</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="p">:</span> <span class="nx">#f8f9fa</span><span class="p">;</span>
  <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="p">:</span> <span class="mi">8</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="nx">px</span> <span class="mi">4</span><span class="nx">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">h2</span> <span class="p">{</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="p">:</span> <span class="mi">30</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="p">:</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="p">:</span> <span class="mi">150</span><span class="o">%</span><span class="p">;</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">h1</span> <span class="p">{</span>
  <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="p">:</span> <span class="mi">175</span><span class="o">%</span><span class="p">;</span>
  <span class="nx">padding</span><span class="o">-</span><span class="nx">top</span><span class="p">:</span> <span class="mi">2</span><span class="o">%</span><span class="p">;</span>
  <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="p">:</span> <span class="nx">center</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/style</span><span class="err">&gt;
</span></code></pre></div></div>

<p><br /></p>

<p><em>End Response</em></p>

<p>Here is a breakdown of the changes:</p>

<ol>
  <li>Replace the <code class="language-plaintext highlighter-rouge">funnel-container</code> div with the <code class="language-plaintext highlighter-rouge">chart-container</code> div.</li>
</ol>

<p><img src="../assets/images/2025-04-30/vSalesFunnelSummary-chartjs-Template-Changes.png" alt="Replacing the funnel container with the chart.js chart container in the vSalesFunnelSummary Vue" /></p>

<p><br /><br /></p>
</li><li><span class="post-meta">Mar 29, 2025</span>
        <h3>
          <a class="post-link" href="/UIAI2/">
            Developing User Interfaces with GitHub Copilot, Part 2
          </a>
        </h3><p>This is the second installment of my series on using Copilot to implement user interfaces. It does build on the topics discussed in part one, so if you missed it you can check it out <a href="https://www.codemag.com/blog/AIPractitioner/UIAI">here</a>.</p>

<h2 id="creating-components-that-can-be-shared-with-multiple-pages">Creating Components That Can Be Shared with Multiple Pages</h2>

<p>In this article, I (well, Copilot) will expand on the implementation of the <code class="language-plaintext highlighter-rouge">owner-select</code> drop-down by encapsulating the drop-down logic into a new vue component and then replacing the implementation on the <code class="language-plaintext highlighter-rouge">Active Leads by Owner</code> vue with the new component. I’ll also add the new component to a different vue that could benefit from this feature.</p>

<p>The two vues will share the same component and any changes to the component will be reflected in both vues.</p>

<h2 id="copilot-edits">Copilot Edits</h2>

<p>I’ll use the new <strong>Copilot Edits</strong> multi-file feature that allows developers to apply AI-powered suggestions across multiple files within a project, streamlining workflows for large-scale changes and refactoring. Edits can identify patterns and dependencies across files, enabling consistent updates such as renaming variables, restructuring code, or updating logic across related files.</p>

<p>Copilot Edits is a separate interface from Copilot Chat and while the interfaces are similar, there are some notable differences. For example, in Chat the <code class="language-plaintext highlighter-rouge">@</code> brings up a list of extensions while Edits does not.</p>

<p>I’m using Edits because I want to make changes to multiple files in a consistent manner. Here is the <code class="language-plaintext highlighter-rouge">Claude 3.7 Sonnet</code> prompt I used:</p>

<ol>
  <li><strong>Create a component from the owner select drop-down on the Active Leads by Owners vue, so that it can be used by other vues. Include the data fetching logic in the new component.</strong></li>
  <li><strong>Update the Active Leads by Owners vue to use the new component. Remove the data fetching logic from the Active Leads vue as it is redundant.</strong></li>
  <li><strong>Add the new component to the Sales Funnel Detail vue and filter the data in Leads tables by the selected owners OwnerNameId.</strong></li>
</ol>

<p>This is a complicated multi-step action that I’m requesting. Edits is designed to handle these kinds of prompts.</p>

<p>Here is the response, my comments are in italics:</p>

<h2 id="solution-create-owner-select-drop-down-component-and-update-views">Solution: Create Owner Select drop-down Component and Update Views</h2>

<p>I’ll create a reusable OwnerSelectdrop-down component, update both views to use it, and add filtering to the Sales Funnel Detail view.</p>

<h3 id="step-1-create-the-owner-select-drop-down-component">Step 1: Create the Owner Select drop-down Component</h3>

<h4 id="ownerselectdrop-downvue">OwnerSelectdrop-down.vue</h4>

<p><em>This is the new component created from the original drop-down. It contains all of the presentation and functional logic from the original implementation. A small nit is that Edits didn’t pickup on the convention that vue components in this project all begin with a lower case ‘c’.</em></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"owner-select"</span><span class="nt">&gt;</span>Select Owner:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span>
      <span class="na">id=</span><span class="s">"owner-select"</span>
      <span class="na">v-model=</span><span class="s">"selectedOwnerId"</span>
      <span class="err">@</span><span class="na">change=</span><span class="s">"handleOwnerChange"</span>
    <span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">v-if=</span><span class="s">"includeAllOption"</span> <span class="na">value=</span><span class="s">"all"</span><span class="nt">&gt;</span>All Owners<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span>
        <span class="na">v-for=</span><span class="s">"owner in leadOwners"</span>
        <span class="na">:key=</span><span class="s">"owner.nameId"</span>
        <span class="na">:value=</span><span class="s">"owner.nameId"</span>
      <span class="nt">&gt;</span>
        {{ owner.name }}
      <span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading owners...<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getAllLeadOwners</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OwnerSelectdrop-down</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">includeAllOption</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="nb">Boolean</span><span class="p">,</span>
        <span class="na">default</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">emits</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">owner-changed</span><span class="dl">"</span><span class="p">],</span>
    <span class="nf">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="p">{</span> <span class="nx">emit</span> <span class="p">})</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">leadOwners</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">([]);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">selectedOwnerId</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchLeadOwners</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getAllLeadOwners</span><span class="p">();</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">people</span><span class="p">;</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">includeAllOption</span>
                <span class="p">?</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span>
                <span class="p">:</span> <span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nameId</span><span class="p">;</span>
              <span class="nf">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">owner-changed</span><span class="dl">"</span><span class="p">,</span> <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span>
              <span class="dl">"</span><span class="s2">Failed to fetch lead owners:</span><span class="dl">"</span><span class="p">,</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span><span class="p">,</span>
            <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error fetching lead owners:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">handleOwnerChange</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">owner-changed</span><span class="dl">"</span><span class="p">,</span> <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">};</span>

      <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchLeadOwners</span><span class="p">();</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">leadOwners</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">selectedOwnerId</span><span class="p">,</span>
        <span class="nx">handleOwnerChange</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nt">select</span> <span class="p">{</span>
    <span class="nl">margin-left</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="nx">#ddd</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p><em>Looking Good!</em></p>

<h3 id="step-2-update-active-leads-by-owner-vue">Step 2: Update Active Leads by Owner Vue</h3>

<h4 id="vactiveleadsbyownervue">vActiveLeadsByOwner.vue</h4>

<p>Made changes.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Active Leads By Owner<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;owner-select-drop-down</span> <span class="err">@</span><span class="na">owner-changed=</span><span class="s">"handleOwnerChange"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"activeleads.success"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>Total Count: {{ activeleads.totalCount }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Error: {{ activeleads ? activeleads.failureInformation : "No data
          available" }}
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getActiveLeadsByOwner</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="nx">OwnerSelectdrop</span><span class="o">-</span><span class="nx">down</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/components/lead/OwnerSelectdrop-down.vue</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ActiveLeadsByOwner</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">OwnerSelectdrop</span><span class="o">-</span><span class="nx">down</span>
    <span class="p">},</span>
    <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">activeleads</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchActiveLeadsByOwner</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">ownerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">ownerId</span> <span class="o">||</span> <span class="nx">ownerId</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getActiveLeadsByOwner</span><span class="p">(</span><span class="nx">ownerId</span><span class="p">);</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">handleOwnerChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ownerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchActiveLeadsByOwner</span><span class="p">(</span><span class="nx">ownerId</span><span class="p">);</span>
      <span class="p">};</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">activeleads</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">handleOwnerChange</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">24px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p>Below you can see that the <code class="language-plaintext highlighter-rouge">div</code> containing the owner drop-down and it’s label are gone along with an error message. Copilot deleted the imports related to the drop-down as well as the code related to fetching the data.</p>

<p><img src="../assets/images/2025-03-29/ActiveLeadsByOwner.vue.2a.deletions.png" alt="Active leads by Owner Deletetions" />
“C:\git\ai-practitioner\ai-practitioner-blog\jekyll-src\assets\images\2025-03-29\Active-Leads-By-Owner-1.png</p>
<h5 id="active-leads-by-owner-deletetions">Active Leads by Owner Deletetions</h5>

<p>Copilot added the new owner drop-down component and refactored the fetch logic to not fetch Owners. The <code class="language-plaintext highlighter-rouge">newOwnerId</code> renamed simply ownerId. Which is a nice bit of craftmansship.</p>

<p><img src="../assets/images/2025-03-29/ActiveLeadsByOwner.vue.2a.additions.png" alt="Active Leads by Owner Additions" /></p>

<h5 id="active-leads-by-owner-additions">Active Leads by Owner Additions</h5>

<h3 id="step-3-update-sales-funnel-detail-vue">Step 3: Update Sales Funnel Detail Vue</h3>

<p>I asked that the new drop-down component be added to the Sales Funnel Detail vue. This makes sense as users often want to focus on their leads, or the leads of others.</p>

<h4 id="vsalesfunneldetailvue">vSalesFunnelDetail.vue</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sales-funnel-detail"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Sales Funnel Detail<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;owner-select-drop-down</span>
      <span class="na">:includeAllOption=</span><span class="s">"true"</span>
      <span class="err">@</span><span class="na">owner-changed=</span><span class="s">"handleOwnerChange"</span>
    <span class="nt">/&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"summary"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"summary-table"</span><span class="nt">&gt;</span>
        // ...existing code...
      <span class="nt">&lt;/table&gt;</span>
      <span class="nt">&lt;h2&gt;</span>Deals by Status<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;div</span>
        <span class="na">v-for=</span><span class="s">"detail in filteredDealsByStatus"</span>
        <span class="na">:key=</span><span class="s">"detail.dealStatus"</span>
        <span class="na">class=</span><span class="s">"status-section"</span>
      <span class="nt">&gt;</span>
        <span class="nt">&lt;h3&gt;</span>
          {{ getDealStatusDescription(detail.dealStatus) }}: {{
          detail.leads.length }} Leads
        <span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"leads-table"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;thead&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
              // ...existing code...
            <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;/thead&gt;</span>
          <span class="nt">&lt;tbody&gt;</span>
            <span class="nt">&lt;tr</span> <span class="na">v-for=</span><span class="s">"lead in detail.leads"</span> <span class="na">:key=</span><span class="s">"lead.id"</span><span class="nt">&gt;</span>
              // ...existing code...
            <span class="nt">&lt;/tr&gt;</span>
          <span class="nt">&lt;/tbody&gt;</span>
        <span class="nt">&lt;/table&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getSalesFunnelDetail</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="nx">OwnerSelectdrop</span><span class="o">-</span><span class="nx">down</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/components/lead/OwnerSelectdrop-down.vue</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SalesFunnelDetail</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">OwnerSelectdrop</span><span class="o">-</span><span class="nx">down</span>
    <span class="p">},</span>
    <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">summary</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">selectedOwnerId</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">"</span><span class="s2">all</span><span class="dl">"</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchSalesFunnelDetail</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// ...existing code...</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">handleOwnerChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ownerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">ownerId</span><span class="p">;</span>
      <span class="p">};</span>

      <span class="c1">// Filter deals by selected owner</span>
      <span class="kd">const</span> <span class="nx">filteredDealsByStatus</span> <span class="o">=</span> <span class="nf">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>

        <span class="k">if </span><span class="p">(</span><span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">summary</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">byDealStatus</span>
          <span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">statusGroup</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span>
              <span class="p">...</span><span class="nx">statusGroup</span><span class="p">,</span>
              <span class="na">leads</span><span class="p">:</span> <span class="nx">statusGroup</span><span class="p">.</span><span class="nx">leads</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">lead</span> <span class="o">=&gt;</span>
                <span class="nx">lead</span><span class="p">.</span><span class="nx">ownerNameId</span> <span class="o">===</span> <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span>
              <span class="p">)</span>
            <span class="p">};</span>
          <span class="p">})</span>
          <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">group</span> <span class="o">=&gt;</span> <span class="nx">group</span><span class="p">.</span><span class="nx">leads</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Only include groups with leads</span>
      <span class="p">});</span>

      <span class="c1">// ...existing code...</span>

      <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchSalesFunnelDetail</span><span class="p">();</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">summary</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">getDealStatusDescription</span><span class="p">,</span>
        <span class="nx">formatCurrency</span><span class="p">,</span>
        <span class="nx">getDealDivisionDescription</span><span class="p">,</span>
        <span class="nx">getDealTemperatureDescription</span><span class="p">,</span>
        <span class="nx">handleOwnerChange</span><span class="p">,</span>
        <span class="nx">filteredDealsByStatus</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

// ...existing style...
</code></pre></div></div>

<h5 id="sales-funnel-detail-deletions">Sales Funnel Detail Deletions</h5>

<p><img src="../assets/images/2025-03-29/SalesFunnelDetail.vue.2a.deletions.png" alt="Sales Funnel Detail Deletions" /></p>

<h5 id="sales-funnel-detail-additions">Sales Funnel Detail Additions</h5>

<p><img src="../assets/images/2025-03-29/SalesFunnelDetail.vue.2a.additions.png" alt="Sales Funnel Details Additions" /></p>

<h2 id="uh-oh">Uh oh…</h2>

<p>While the refactored Sales Funnel Details vue worked great (Woohoo!), the refactored Active Leads by Owner vue showed this error immediately on rendering the vue:</p>

<p><code class="language-plaintext highlighter-rouge">ERROR Cannot read properties of null (reading 'success') TypeError: Cannot read properties of null (reading 'success') </code></p>

<p>Something was missed when the drop-down was remove from the view. A good first way to resolve an error like this is to use the error message as the next prompt to <code class="language-plaintext highlighter-rouge">Claude 3.7 Sonnet</code>. Copilot responded with this:</p>

<h2 id="solution-fix-null-reference-error-in-active-leads-by-owner-vue">Solution: Fix Null Reference Error in Active Leads by Owner Vue</h2>

<p>The error occurs because we’re trying to access the <code class="language-plaintext highlighter-rouge">success</code> property on <code class="language-plaintext highlighter-rouge">activeleads</code> when it might be null. Let’s fix the Active Leads by Owner Vue to properly handle the null case.</p>

<h4 id="vactiveleadsbyownervue-1">vActiveLeadsByOwner.vue</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Active Leads By Owner<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;owner-select-drop-down</span> <span class="err">@</span><span class="na">owner-changed=</span><span class="s">"handleOwnerChange"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"activeleads"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"activeleads.success"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>Total Count: {{ activeleads.totalCount }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Error: {{ activeleads.failureInformation || "No data available" }}
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p&gt;</span>Select an owner to view their active leads<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getActiveLeadsByOwner</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="nx">OwnerSelectdrop</span><span class="o">-</span><span class="nx">down</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/components/lead/OwnerSelectdrop-down.vue</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ActiveLeadsByOwner</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
      <span class="nx">OwnerSelectdrop</span><span class="o">-</span><span class="nx">down</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">activeleads</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchActiveLeadsByOwner</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">ownerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">ownerId</span> <span class="o">||</span> <span class="nx">ownerId</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getActiveLeadsByOwner</span><span class="p">(</span><span class="nx">ownerId</span><span class="p">);</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
            <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
          <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">handleOwnerChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ownerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchActiveLeadsByOwner</span><span class="p">(</span><span class="nx">ownerId</span><span class="p">);</span>
      <span class="p">};</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">activeleads</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">handleOwnerChange</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">24px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p>This update:</p>

<ol>
  <li>Adds a guard condition with <code class="language-plaintext highlighter-rouge">v-else-if="activeleads"</code> to avoid trying to access properties on a null object.</li>
  <li>Adds a message to display when no owner is selected or “All” is selected.</li>
  <li>Explicitly sets <code class="language-plaintext highlighter-rouge">activeleads.value = null</code> in error cases and when “All” is selected.</li>
  <li>Improves error handling to make sure activeleads is null when there’s an error.</li>
</ol>

<p>These changes prevent the “Cannot read properties of null” error by ensuring we only try to access properties like <code class="language-plaintext highlighter-rouge">success</code> when <code class="language-plaintext highlighter-rouge">activeleads</code> actually exists.</p>

<p><em>This ends the Copilot response.</em></p>

<h3 id="active-leads-by-owner-vue-changes">Active Leads by Owner Vue Changes</h3>

<p>As documented by Copilot at the end of the response, to fix the error, Copilot added code to handle the case when there are no active leads to show.</p>

<p><img src="../assets/images/2025-03-29/ActiveLeadsByOwner.vue.3.changes.png" alt="Active Leads by Owner Vue Deletions" /></p>

<h3 id="sales-funnel-details-vue-changes">Sales Funnel Details Vue Changes</h3>

<p>Of interest is that Copilot also made some changes to the Sale Funnel Detail vue to tighten up the syntax.</p>

<p><img src="../assets/images/2025-03-29/SalesFunnelDetail.vue.3.changes.png" alt="Sales Funnel Details Deletions" /></p>

<h3 id="success">Success!</h3>

<p>When running the revised version of the vues, the Active Leads by Owner and Sales Funnel Details vues are working as expected and are utilizing the new component which is working on both vues.</p>

<p>A key point is that I did not change any of the code produced by Copilot. Copilot was able to determine what code needed to change in order to achieve the results and implemented the changes.</p>

<p>You wouldn’t be wrong to think that if Copilot can implement features like these, what is the future for coders? Consider that I had to give clear and accurate context and direction to Copilot in order to get working results.</p>

<p>Copilot is not a developer. It does not understand the code in the same way that a compiler or interpretor does. Copilot, more accurately the model you choose, is predicting what code might work, given it’s vast knowledge of previous code. It can’t run the code or test the code for errors. But given an error, it was able to correct the code.</p>

<p>In fact, the prompt I used for this excersise was not my first attempt to implement this feature. It was an iterative process of adjusting the prompt, testing the results, undoing the changes and trying again. Once the prompt was close to producing fully working code, I switched tactics and chose to give Copilot the error and move forward.</p>

<p>What Copilot does well is deal with the syntax. While this is coding, it’s not the most valuble, or enjoyable, part of coding. There has been a steady improvement in the tools to help coders deal with the syntax. Autocomplete, Intellisense, etc. The real value you and I add is in knowning what code is needed, how it should be implemented and verifying that code is up to our standards.</p>

<p>Finally, the demand for software will likely continue to exceed our ability to produce it, even with AI assistance. AI is going to make it much more feasible to take on projects that have been often off the table. One example is legacy rewrites. The demand for developers who can leverage the tools effectively will continue to grow and the demand for developers who don’t, won’t.</p>

<p>In part three I’ll use Copilot to create data visualizations.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h4 id="disclaimer">Disclaimer</h4>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p>AI Contributions:</p>

<table>
  <thead>
    <tr>
      <th>Model</th>
      <th>Prompt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ChatGPT4o</td>
      <td>@github Explain GitHub Copilot Edits multi-file features in one paragraph</td>
    </tr>
    <tr>
      <td>ChatGPT4o</td>
      <td>@github what are the significant UI differences between Copilot Edits and Copilot Chat?</td>
    </tr>
  </tbody>
</table>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/UIAI2">post</a></small></small></small></p>
</li><li><span class="post-meta">Feb 24, 2025</span>
        <h3>
          <a class="post-link" href="/UIAI1/">
            Developing User Interfaces with GitHub Copilot, Part 1
          </a>
        </h3><p>In the next few posts I will explore techniques for creating and maintaining user interfaces leveraging GitHub Copilot. Using real-world examples, I’ll show how AI handles making UI modifications. Including:</p>

<ul>
  <li>Adding new controls to an existing page</li>
  <li>Creating components that can be shared with multiple pages</li>
  <li>Creating data visualizations</li>
  <li>Adding client-side sorting to data tables.</li>
</ul>

<p>In this post I will take on adding a new control to an existing page. While my demo application will show a <code class="language-plaintext highlighter-rouge">Vue.js</code> <code class="language-plaintext highlighter-rouge">Typescript</code> implementation, you can apply the techniques I’ll demonstrate to many UI frameworks.</p>

<p>The app I’ll modify in this series is a lead management app written in <code class="language-plaintext highlighter-rouge">Vue.js</code>. In this post, I’ll show you the changes Copilot suggests that we make to the <strong>Active Leads by Owner</strong> <code class="language-plaintext highlighter-rouge">vue</code> to show the number of active leads for individual owners. The vue currently reports the total for all owners and it needs to report the total for individual owners. Our first modification is to add a new control to a page and wire the control to parameterize the request for data from the back end. Before we begin to make modifications let’s review the existing app.</p>

<h2 id="what-is-vuejs-and-why">What is <code class="language-plaintext highlighter-rouge">Vue.js</code> and Why</h2>

<p>The app is implemented using the <code class="language-plaintext highlighter-rouge">Vue.js</code> UI framework. <code class="language-plaintext highlighter-rouge">Vue.js</code> written in typescript as is the front-end that leverages the framework. The front-end technology is not particularly relevant and the ideas presented here should be applicable to most UI frameworks and implementation. This app happens to be written in <code class="language-plaintext highlighter-rouge">Vue.js</code>, which has some advantages that may simplify the implementation, such as:</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Reactive Data Binding:</strong></td>
      <td>A reactive data binding system that automatically updates the DOM when the underlying data changes, making it easier to manage and synchronize the UI with the application state.</td>
    </tr>
    <tr>
      <td><strong>Component-Based Architecture:</strong></td>
      <td>A component-based architecture, allowing developers to build reusable, encapsulated components. This modular approach improves code maintainability and re-usability.</td>
    </tr>
    <tr>
      <td><strong>Single-File Components:</strong></td>
      <td>Single-file components, which encapsulate the HTML, CSS and JavaScript of a component in a single file. This approach promotes better organization and easier maintenance of code.</td>
    </tr>
    <tr>
      <td><strong>TypeScript Support:</strong></td>
      <td>Robust support for TypeScript, allowing developers to leverage static typing and other TypeScript features to improve code quality and maintainability.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>In <code class="language-plaintext highlighter-rouge">Vue.js</code>, a “<code class="language-plaintext highlighter-rouge">vue</code>” typically refers to a <code class="language-plaintext highlighter-rouge">Vue</code> component. A <code class="language-plaintext highlighter-rouge">Vue</code> component is a reusable, self-contained unit of code that encapsulates the HTML, CSS, and JavaScript needed to render a part of the user interface. Components are the building blocks of a <code class="language-plaintext highlighter-rouge">Vue.js</code> application and allow developers to create modular and maintainable code.</p>

<p>Overall, <code class="language-plaintext highlighter-rouge">Vue.js</code> provides a powerful and flexible framework for interactive web applications.</p>

<h2 id="adding-a-drop-down-component-to-a-vuejs-view">Adding a Drop-down Component to a <code class="language-plaintext highlighter-rouge">Vue.js</code> View</h2>

<p>I’ll review the current implementation and then walk through the steps to add the drop-down to the page and integrate it with the existing code.</p>

<h3 id="active-leads-by-owner">Active Leads by Owner</h3>

<p><strong>Figure 1</strong> shows the Active Leads by Owner page before any modifications. The objective is to add a drop-down component to the page that when selected will return the count of leads for that owner.</p>

<p><img src="../assets/images/2025-02-24/Active-Leads-By-Owner-1.png" alt="The Active Leads report before adding the drop-down control" /></p>

<p><strong>Figure 1:</strong> The Active Leads report before adding the drop-down control.</p>

<h4 id="listing-1-the-vactiveleadsbyowner-vue-before-modification">Listing 1: The vActiveLeadsByOwner vue before modification</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Active Leads By Owner<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"activeleads.success"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>Total Count: {{ activeleads.totalCount }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Error: {{ activeleads ? activeleads.failureInformation : 'No data
          available' }}
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">watch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">getActiveLeadsByOwner</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">ownerId</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
        <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ActiveLeadsByOwner</span><span class="dl">"</span><span class="p">,</span>
    <span class="nf">setup</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">activeleads</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchActiveLeadsByOwner</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getActiveLeadsByOwner</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">);</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span>
              <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchActiveLeadsByOwner</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="nf">watch</span><span class="p">(</span>
        <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">,</span>
        <span class="p">(</span><span class="nx">newOwnerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nf">fetchActiveLeadsByOwner</span><span class="p">(</span><span class="nx">newOwnerId</span><span class="p">);</span>
        <span class="p">},</span>
      <span class="p">);</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">activeleads</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">24px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p><br /></p>

<p>Key points in this code:</p>

<ol>
  <li>The page displays whatever is stored in <code class="language-plaintext highlighter-rouge">activeleads.totalCount</code> as the total count.</li>
  <li>The code calls <code class="language-plaintext highlighter-rouge">getActiveLeadsByOwner</code> which returns the active leads.</li>
  <li>The function <code class="language-plaintext highlighter-rouge">getActiveLeadsByOwner</code> is passed the <code class="language-plaintext highlighter-rouge">ownerId</code>.</li>
  <li>There is a function, <code class="language-plaintext highlighter-rouge">getAllLeadOwners</code> that returns all of the lead owners.</li>
</ol>

<p>To address the new requirement to display the lead count for individual owners, The new component needs to display the list of lead owners, pass the selected <code class="language-plaintext highlighter-rouge">ownerId</code> to the <code class="language-plaintext highlighter-rouge">getActiveLeadsByOwner</code> function, and update the page with the new <code class="language-plaintext highlighter-rouge">activeleads.totalCount</code>.</p>

<h3 id="chatgpt">ChatGPT</h3>

<p>Let’s write some code! First let’s prompt Copilot to add the control to the vue and wire it up to the rest of the app. Then we’ll review the changes the Copilot suggest that we make to me the requirements for displaying total leads for individual owners.</p>

<blockquote>
  <p>Prompt: @workspace Add a drop-down component for ownerId. Populate the drop-down with the lead owners from the getAllLeadOwners function. When the user selects a lead owner, fetch the active leads for that owner.</p>
</blockquote>

<h3 id="response">Response</h3>

<p>To add a drop-down component for <code class="language-plaintext highlighter-rouge">ownerId</code> and populate it with the lead owners from the <code class="language-plaintext highlighter-rouge">getAllLeadOwners</code> function, you can modify the <code class="language-plaintext highlighter-rouge">vActiveLeadsByOwner.vue</code> file as follows:</p>

<ol>
  <li>Add a drop-down component in the template.</li>
  <li>Fetch the lead owners and populate the drop-down.</li>
  <li>Update the <code class="language-plaintext highlighter-rouge">ownerId</code> when a user selects a lead owner from the drop-down.</li>
</ol>

<p>Here is the code with the changes:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Add the drop-down component to the page --&gt;</span>
<span class="nt">&lt;div&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"owner-select"</span><span class="nt">&gt;</span>Select Owner:<span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;select</span>
    <span class="na">id=</span><span class="s">"owner-select"</span>
    <span class="na">v-model=</span><span class="s">"selectedOwnerId"</span>
    <span class="err">@</span><span class="na">change=</span><span class="s">"fetchActiveLeadsByOwner"</span>
  <span class="nt">&gt;</span>
    <span class="nt">&lt;option</span>
      <span class="na">v-for=</span><span class="s">"owner in leadOwners"</span>
      <span class="na">:key=</span><span class="s">"owner.nameId"</span>
      <span class="na">:value=</span><span class="s">"owner.nameId"</span>
    <span class="nt">&gt;</span>
      
    <span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Add the <code class="language-plaintext highlighter-rouge">getLeadOwners</code> function that retrieves the lead owners to the import which makes the function available to call:</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">getActiveLeadsByOwner</span><span class="p">,</span>
  <span class="nx">getAllLeadOwners</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Drop the <code class="language-plaintext highlighter-rouge">OwnerId</code> custom property as it no longer needs to be passed into the vue.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">props</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">ownerId</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Remove the custom property from the setup call.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Define an array to contain the fetched list of lead owners.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">leadOwners</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">([]);</span>
<span class="kd">const</span> <span class="nx">selectedOwnerId</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">);</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>If there is no selected owner, don’t attempt to retrieve active leads for the owner.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Setting the loading value to <code class="language-plaintext highlighter-rouge">true</code> activateS the spinning loading image.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Change the call to the <code class="language-plaintext highlighter-rouge">getActiveLeadsByOwner</code> function passing the selected owner instead of the <code class="language-plaintext highlighter-rouge">ownerId</code>.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getActiveLeadsByOwner</span><span class="p">(</span><span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Fetch the lead owners.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetchLeadOwners</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getAllLeadOwners</span><span class="p">();</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">people</span><span class="p">;</span>
      <span class="k">if </span><span class="p">(</span><span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nameId</span><span class="p">;</span>
        <span class="nf">fetchActiveLeadsByOwner</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Failed to fetch lead owners</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch lead owners</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>When loading the page call <code class="language-plaintext highlighter-rouge">fetchLeadOwners</code> rather than <code class="language-plaintext highlighter-rouge">fetchActiveLeadsbyOwner</code>.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">fetchLeadOwners</span><span class="p">();</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>When an owner is selected from the drop-down, call the <code class="language-plaintext highlighter-rouge">fetchActiveLeadsByOwner</code> function passing in the new owner id to fetch the active leads.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">watch</span><span class="p">(</span><span class="nx">selectedOwnerId</span><span class="p">,</span> <span class="p">(</span><span class="nx">newOwnerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nf">fetchActiveLeadsByOwner</span><span class="p">(</span><span class="nx">newOwnerId</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p><br /></p>

<blockquote>
  <p>Make leadOwners, selectedOwnerId, and fetchActiveLeadsByOwner available for use in the template.</p>
</blockquote>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="nx">leadOwners</span><span class="p">,</span>
      <span class="nx">selectedOwnerId</span><span class="p">,</span>
      <span class="nx">fetchActiveLeadsByOwner</span><span class="p">,</span>
</code></pre></div></div>

<p><br /></p>

<h4 id="listing-2-below-is-the-modified-vactiveleadsbyowner-vue-with-all-of-the-copilot-modifications">Listing 2: Below is the modified <code class="language-plaintext highlighter-rouge">vActiveLeadsByOwner</code> vue with all of the Copilot modifications</h4>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Active Leads By Owner<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"owner-select"</span><span class="nt">&gt;</span>Select Owner:<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;select</span>
        <span class="na">id=</span><span class="s">"owner-select"</span>
        <span class="na">v-model=</span><span class="s">"selectedOwnerId"</span>
        <span class="err">@</span><span class="na">change=</span><span class="s">"fetchActiveLeadsByOwner"</span>
      <span class="nt">&gt;</span>
        <span class="nt">&lt;option</span>
          <span class="na">v-for=</span><span class="s">"owner in leadOwners"</span>
          <span class="na">:key=</span><span class="s">"owner.nameId"</span>
          <span class="na">:value=</span><span class="s">"owner.nameId"</span>
        <span class="nt">&gt;</span>
          {{ owner.name }}
        <span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;/select&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"loading"</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"error"</span><span class="nt">&gt;</span>{{ error }}<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"activeleads.success"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>Total Count: {{ activeleads.totalCount }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Error: {{ activeleads ? activeleads.failureInformation : "No data
          available" }}
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ref</span><span class="p">,</span> <span class="nx">onMounted</span><span class="p">,</span> <span class="nx">watch</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span>
    <span class="nx">getActiveLeadsByOwner</span><span class="p">,</span>
    <span class="nx">getAllLeadOwners</span><span class="p">,</span>
  <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/services/leadService</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ActiveLeadsByOwner</span><span class="dl">"</span><span class="p">,</span>
    <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">activeleads</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">loading</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">error</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">leadOwners</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">([]);</span>
      <span class="kd">const</span> <span class="nx">selectedOwnerId</span> <span class="o">=</span> <span class="nf">ref</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">fetchActiveLeadsByOwner</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getActiveLeadsByOwner</span><span class="p">(</span><span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">activeleads</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span>
              <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch active leads by owner</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="kd">const</span> <span class="nx">fetchLeadOwners</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">getAllLeadOwners</span><span class="p">();</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">people</span><span class="p">;</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">selectedOwnerId</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">leadOwners</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nameId</span><span class="p">;</span>
              <span class="nf">fetchActiveLeadsByOwner</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">failureInformation</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">Failed to fetch lead owners</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">error</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Failed to fetch lead owners</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="nf">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchLeadOwners</span><span class="p">();</span>
      <span class="p">});</span>

      <span class="nf">watch</span><span class="p">(</span><span class="nx">selectedOwnerId</span><span class="p">,</span> <span class="p">(</span><span class="nx">newOwnerId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nf">fetchActiveLeadsByOwner</span><span class="p">(</span><span class="nx">newOwnerId</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">activeleads</span><span class="p">,</span>
        <span class="nx">loading</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">leadOwners</span><span class="p">,</span>
        <span class="nx">selectedOwnerId</span><span class="p">,</span>
        <span class="nx">fetchActiveLeadsByOwner</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">24px</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div>

<p><strong>Figure 2</strong> shows the rendered page.</p>

<p><img src="../assets/images/2025-02-24/Active-Leads-By-Owner-2.png" alt="The Active Leads report after the Copilot modifications." /></p>

<p><strong>Figure 2:</strong> The Active Leads report after the Copilot modifications.</p>

<p>The app has been correctly updated to include a new component and all of the code necessary to wire up the component into the existing app is implemented and working.</p>

<h2 id="revisiting-the-prompt">Revisiting the Prompt</h2>

<p>Let’s take another look at the prompt that caused Copilot to correctly implement the new feature. Here is the prompt again:</p>

<blockquote>
  <p>@workspace Add a drop-down component for ownerId. Populate the drop-down with the lead owners from the getAllLeadOwners function. When the user selects a lead owner, fetch the active leads for that owner.</p>
</blockquote>

<p>It’s key to provide Copilot with the information it needs to complete a task successfully. Here is a breakdown of the prompt:</p>

<table>
  <thead>
    <tr>
      <th>Prompt</th>
      <th>Requirement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Add a drop-down component for ownerId.</td>
      <td>Bind the drop-down to the OwnerId value.</td>
    </tr>
    <tr>
      <td>Populate the drop-down with the lead owners from the <code class="language-plaintext highlighter-rouge">getAllLeadOwners</code> function.</td>
      <td>Without the <code class="language-plaintext highlighter-rouge">getAllLeadOwners</code> specification, Copilot will try to infer the data source, often incorrectly.</td>
    </tr>
    <tr>
      <td>When the user selects a lead owner, fetch the active leads for that owner.</td>
      <td>Defines the expected behavior when an owner is selected.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>This is where we developers add value. We provide direction, context and review.</p>

<ul>
  <li>By providing clear direction, we communicate our expectations for what should be produced.</li>
  <li>When providing context we include specific details to point Copilot in the right direction. In this case, providing the name of the function that provides the data allows Copilot to correctly bind the control to the data.</li>
  <li>We always need to review the generated code for completeness and accuracy. Leveraging test automation can help here.</li>
</ul>

<p>When prompts are not specific enough, we can find ourselves in debugging cycles that may, or may not, result in a working fix. When Copilot is producing code that doesn’t run, or run properly, we have two options:</p>

<ol>
  <li>Revise the prompt to provide better direction and more context.</li>
  <li>Provide feedback to Copilot (as additional prompts) that describes the errant behavior and give Copilot a chance to address the issue.</li>
</ol>

<p>I’ve seen both work acceptably. With the second option, if Copilot can’t determine the root cause it will add debugging code to expose the internals of the code. This information can be given back to Copilot which can help in determining what changes are needed. This information is additional context including error messages, logs and any other output pertinent to the problem at hand.</p>

<h2 id="conclusion">Conclusion</h2>

<p>As you can see, Copilot made a number of non-trivial changes to the app in order to implement the new feature. We provided Copilot clear direction on what we expected and the context needed for Copilot to understand the current implementation and Copilot determined what changes needed to be made and the changes it made worked without further modification.</p>

<p>In the next installment in this series, we’ll use Copilot to turn this new control into a reuseable component, update this page to use the new component and add the component to another page that could take advantage of this functionality.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h4 id="disclaimer">Disclaimer</h4>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it, and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li>What are the pros of using Vue.js for front-end development?</li>
  <li>In vue.js, what is a vue?</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/UIAI1">post</a></small></small></small></p>
</li><li><span class="post-meta">Jan 29, 2025</span>
        <h3>
          <a class="post-link" href="/AIDI/">
            Adding Dependency Injection to an Existing Solution
          </a>
        </h3><p>Modernizing legacy code can feel like renovating an old house – you know the foundation is solid, but there are improvements to be made. This article explores how to improve the maintainability and test-ability of existing code by introducing dependency injection.</p>

<h1 id="making-big-changes-to-a-legacy-code-base">Making Big Changes to a Legacy Code Base</h1>

<p>Sometimes when working with legacy code, the code is not as testable as you may like. Making the code more testable requires, in part, to loosen tight dependencies in order to reduce the scope of the code under test.</p>

<h2 id="what-is-legacy-code">What Is Legacy Code?</h2>

<p>According to some, code becomes legacy once it’s pushed to main and released to users. The heuristic, when you write code, <em>You and God know how it works; in a month, only God knows,</em> is a good way to think about legacy code. Another more precise definition is legacy code lacks sufficient tests. One benefit of test automation is that the tests document the expected behavior of the code under test.</p>

<h2 id="some-reasons-why-code-is-not-testable">Some Reasons Why Code Is Not Testable</h2>

<p>There are many factors that make code testable. Some of the reasons code may not be testable are listed below:</p>

<ul>
  <li><strong>Tight coupling:</strong> Dependencies are hard-coded, making it difficult to isolate the unit of code under test.</li>
  <li><strong>Lack of interfaces:</strong> Without interfaces, it’s challenging to mock dependencies.</li>
  <li><strong>Global state:</strong> Use of global variables or singletons can lead to unpredictable behavior in tests.</li>
  <li><strong>Complex logic:</strong> Methods with high cyclomatic complexity are harder to test.</li>
  <li><strong>Side effects:</strong> Code that performs I/O operations, such as reading from or writing to a database or file system, can be difficult to test.</li>
  <li><strong>No dependency injection (DI):</strong> Without DI, it’s hard to replace real dependencies with mocks or stubs.</li>
  <li><strong>Hidden dependencies:</strong> Dependencies that are not explicitly passed to the class or method make it hard to control the test environment.</li>
  <li><strong>Static methods:</strong> Static methods can’t be easily mocked or stubbed.</li>
  <li><strong>Large methods:</strong> Methods that do too much are harder to test in isolation.</li>
  <li><strong>Lack of modularity:</strong> Code that is not broken down into smaller, reusable components is harder to test.</li>
</ul>

<p>For the purposes of this post I’m focusing on tight coupling, the lack of interfaces, and no dependency injection.</p>

<h2 id="addressing-tight-coupling-with-interfaces-and-dependency-injection">Addressing Tight Coupling with Interfaces and Dependency Injection</h2>

<p>Tight coupling is when components in a system are highly dependent on each other. Changes in one component often require changes in another, making the system harder to maintain and making it difficult to isolate and test individual components, as they rely on the presence and behavior of other components.</p>

<p>Interfaces and dependency injection make code more testable in the following ways:</p>

<h3 id="interfaces">Interfaces</h3>

<ul>
  <li><strong>Abstraction:</strong> Interfaces provide a way to define contracts for components without specifying their implementation. This allows you to create mock implementations for testing purposes.</li>
  <li><strong>Decoupling:</strong> By programming to an interface rather than a concrete class, you reduce the dependency on specific implementations, making it easier to swap out components.</li>
</ul>

<h3 id="dependency-injection-di">Dependency Injection (DI)</h3>

<ul>
  <li><strong>Control over dependencies:</strong> DI allows you to inject dependencies into a class rather than having the class create them itself. This makes it easier to replace real dependencies with mocks or stubs during testing.</li>
  <li><strong>Isolation:</strong> DI helps in isolating the unit of code under test by providing mock implementations of its dependencies, making it easier to test the class in isolation.</li>
  <li><strong>Flexibility:</strong> DI containers can manage the lifecycle and configuration of dependencies, making it easier to manage complex dependency graphs and ensuring that tests can be set up and torn down cleanly.</li>
</ul>

<p>Interfaces and DI together make code more modular, flexible and testable.</p>

<h2 id="our-legacy-code-example">Our Legacy Code Example</h2>

<p>Before introducing DI, let me explain my sample application. It has a document management service that handles file storage and a service that provides user access controls.</p>

<p>The document management service, <code class="language-plaintext highlighter-rouge">DocumentService</code>, handles document operations like upload, download, and deletion and currently uses an Azure SQL Database for document storage. The tight coupling between the service and the application is blocking support for other document storage methods and other cloud providers.</p>

<p>The user access service, <code class="language-plaintext highlighter-rouge">UserService</code>, manages user permissions and access to documents and also uses an Azure SQL Database for storing users, groups, and permissions. The tight coupling between the service and the application is blocking support for other authentication frameworks, such as Entra, Auth0, etc.</p>

<p>More importantly, the application is difficult to test due to the coupling between the application and the document and user services. Any application behavior that depends on the document service or the user service requires a running instance of SQL (hopefully not production) in order to test the application. These tests are, by definition, integration tests.</p>

<p>This is a common scenario in enterprise applications where improving testability and flexibility becomes crucial as the system grows.</p>

<h3 id="document-service">Document Service</h3>

<p>Here is the relevant code from the <code class="language-plaintext highlighter-rouge">DocumentService</code> class:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DocumentService</span> <span class="p">:</span> <span class="n">IDocumentService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">DocumentStorageAzureProvider</span> <span class="n">_documentStorageProvider</span> <span class="p">=</span> <span class="k">new</span><span class="p">();</span>
    
    <span class="c1">// Implementation...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In the class the internal variable <code class="language-plaintext highlighter-rouge">_documentStorageProvider</code> is assigned a new instance of the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class. This tightly couples instances of the <code class="language-plaintext highlighter-rouge">DocumentService</code> class to instances of the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class. Any test of the <code class="language-plaintext highlighter-rouge">DocumentService</code> class will execute the methods of the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class and will need to contend with any side effects introduced by the provider class. To be more testable, the <code class="language-plaintext highlighter-rouge">DocumentService</code> class should be able to use any another class that implements the needed methods of the provider class in any way that satisfies the needs of the service class.</p>

<p>Further, once the service is decoupled from the provider, it’s possible to use a different concrete implementation of the provider for another purpose without changing the service. For example the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class could be replaced with a <code class="language-plaintext highlighter-rouge">DocumentStorageAWSProvider</code> class.</p>

<h3 id="user-service">User Service</h3>

<p>Similarly to <code class="language-plaintext highlighter-rouge">DocumentService</code>, the <code class="language-plaintext highlighter-rouge">UserService</code> class is tightly coupled to the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class and we want to be able to address coupling throughout the solution.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">UserService</span> <span class="p">:</span> <span class="n">IUserService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">DocumentStorageAzureProvider</span> <span class="n">_documentStorageProvider</span> <span class="p">=</span> <span class="k">new</span><span class="p">();</span>

    <span class="c1">// Implementation...</span>

<span class="p">}</span>
</code></pre></div></div>

<p>To loosen the coupling with the provider, we need to remove the instantiation of the provider from the services and give the services an instance of the provider to use. This is what DI is for.</p>

<p>Of course, we could refactor this code to add dependency injection manually. Using GitHub Copilot can significantly speed up the implementation. Copilot is particularly helpful when working with legacy code because it can:</p>

<ol>
  <li>Analyze the entire codebase context and suggest consistent changes across multiple files.</li>
  <li>Generate boilerplate DI configuration code that follows best practices.</li>
  <li>Help identify all the places where dependency injection needs to be introduced.</li>
  <li>Provide example test implementations that work with the new DI structure.</li>
</ol>

<p>Let’s see how Copilot can assist us with this refactoring.</p>

<h2 id="leveraging-copilot-to-make-code-more-testable">Leveraging Copilot to Make Code More Testable</h2>

<p>In addition to writing docs and generating unit tests, Copilot can also help us with larger tasks such as adding DI to an existing code base.</p>

<h3 id="workspace-prompts">@Workspace Prompts</h3>

<p>Given the prompt: <code class="language-plaintext highlighter-rouge">@Workspace Agent</code> how do I add dependency injection to this solution?</p>

<p>Copilot will use the entire codebase as the context and generate step-by-step instructions, with suggested code modifications.</p>

<p>The prompt: <code class="language-plaintext highlighter-rouge">@Workspace Agent</code> implement dependency injection in this solution</p>

<p>Copilot will produce modified versions of the code that you can choose to accept or reject. Let’s look at the response from the first prompt.</p>

<h3 id="workspace-agent-response">Workspace Agent Response</h3>

<p>What follows is the response from Copilot to the first prompt. My comments appear in italics after the code.</p>

<p>To add dependency injection to your solution, you need to register your services in the dependency injection container and then inject them where needed. Here’s a step-by-step guide to achieve this:</p>

<ol>
  <li><strong>Register services in the DI container:</strong> Modify the <code class="language-plaintext highlighter-rouge">ZeusStartup</code> class to register your services in the DI container. This is typically done in the <code class="language-plaintext highlighter-rouge">Builder</code> method.</li>
</ol>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Zeus.DocumentStorage</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Zeus.Services.Contract</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Zeus.Services.Implementation</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Zeus.Host</span>
<span class="p">{</span>
   <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ZeusStartup</span>
   <span class="p">{</span>
       <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">Builder</span><span class="p">(</span><span class="n">WebApplicationBuilder</span> <span class="n">builder</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="c1">// Register services</span>
           <span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IDocumentStorage</span><span class="p">,</span> <span class="n">DocumentStorageAzureProvider</span><span class="p">&gt;();</span>
           <span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">IUserService</span><span class="p">,</span> <span class="n">UserService</span><span class="p">&gt;();</span>
           <span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">IDocumentService</span><span class="p">,</span> <span class="n">DocumentService</span><span class="p">&gt;();</span>

           <span class="c1">// Other configurations...</span>

           <span class="k">return</span> <span class="s">"Builder configuration complete"</span><span class="p">;</span>
       <span class="p">}</span>

       <span class="c1">// Other methods...</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This is somewhat specific to the solution and the DI framework. In ASP.NET, the <code class="language-plaintext highlighter-rouge">WebApplicationBuilder</code> class provides a DI container and the ability to register services with the container. In this case, the suggestion is register the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class as a singleton meaning a single instance will serve all requests. The services are registered as scoped to the request and not shared between requests. Of note is that by registering the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class as the implementation of the IDocumentStorage interface, the existing behavior is preserved.</p>

<ol>
  <li><strong>Inject services into constructors:</strong> Modify your classes to accept the dependencies via constructor injection.</li>
</ol>

<p>For example, in <code class="language-plaintext highlighter-rouge">UserService</code>:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">UserService</span> <span class="p">:</span> <span class="n">IUserService</span>
<span class="p">{</span>
   <span class="k">private</span> <span class="k">readonly</span> <span class="n">IDocumentStorage</span> <span class="n">_documentService</span><span class="p">;</span>

   <span class="k">public</span> <span class="nf">UserService</span><span class="p">(</span><span class="n">IDocumentStorage</span> <span class="n">documentService</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="n">_documentService</span> <span class="p">=</span> <span class="n">documentService</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="c1">// Methods...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here the <code class="language-plaintext highlighter-rouge">DocumentStorageAzureProvider</code> class is replaced with the IDocumentStorage interface and the variable <code class="language-plaintext highlighter-rouge">_documentService</code> will accept any instance that implements this interface. Copilot also suggests that a constructor be added that accepts a parameter that implements the IDocumentStorage interface and assigns it to the <code class="language-plaintext highlighter-rouge">_documentService</code> variable. Also of note is that we are not required to pass to the constructor an IDocumentStorage instance. When the <code class="language-plaintext highlighter-rouge">UserService</code> is instantiated, the DI container will pass an instance of the registered class to the UserService constructor for us.</p>

<ol>
  <li><strong>Update Program.cs:</strong> Ensure that the <code class="language-plaintext highlighter-rouge">ZeusStartup.Builder</code> method is called in your <code class="language-plaintext highlighter-rouge">Program.cs</code> to configure the services.</li>
</ol>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">WebApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="c1">// Call the Builder method to register services</span>
<span class="n">ZeusStartup</span><span class="p">.</span><span class="nf">Builder</span><span class="p">(</span><span class="n">builder</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">app</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">();</span>

<span class="c1">// Call the App method to configure the app</span>
<span class="n">ZeusStartup</span><span class="p">.</span><span class="nf">App</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="s">"your-cors-origins"</span><span class="p">);</span>

<span class="n">app</span><span class="p">.</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<p>Finally, Copilot suggests adding code to the startup program to call the builder to register the services with the container.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The Copilot suggestions implement DI while preserving the existing behavior. We can now go forward with implementing tests that mock the provider, isolating the service from the provider implementation. This allows us to test the service without a concern for the provider implementation. We can also implement a new provider and invoke it by registering it with the DI container.</p>

<p>The code is more testable and the tests are simpler to implement. The code is also more flexible in that we can easily provide other implementations. Copilot was there to help us find the code that needed to change and to suggest the changes.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h4 id="disclaimer">Disclaimer</h4>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Workspace Agent</code> how do I add dependency injection to this solution?</li>
  <li>What are some reason why code is not testable?</li>
  <li>What is a definition of tight coupling</li>
  <li>How do interfaces and dependency injection make code more testable?</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/AIDI">post</a></small></small></small></p>
</li><li><span class="post-meta">Dec 12, 2024</span>
        <h3>
          <a class="post-link" href="/CP4TA/">
            Test Generation Using GitHub Copilot
          </a>
        </h3><p>Using AI in a production application is risky, particularly if you are new to working with NLM- generated code. This post will show how you can get started using AI in a production application by leveraging AI’s ability to generate test automation.</p>

<h2 id="a-good-place-to-start">A Good Place to Start</h2>

<p>If you’re hesitant to apply AI directly to a production codebase, that hesitation is well- grounded. We are at a point where NLMs are constantly reminding us of their fallibility. The consequences of introducing a serious defect into a fragile codebase is enough to put someone off.</p>

<h2 id="neglected-code">Neglected Code</h2>

<p>Test automation is one area of your code that is begging for a little help from AI. If the codebases that you work in are anything like the codebases I work in, test coverage is always lacking in one way or another, if it exists at all. Leveraging AI in test automation is a good way to add value without incurring significant risk.</p>

<h2 id="safe-because-test-automation-is-not-deployed-to-production">Safe Because Test Automation Is Not Deployed to Production</h2>

<p>The goal of good test automation is to prevent defects from reaching production and it is not intended to be deployed to production. Faulty test automation could return a false positive, failing when it shouldn’t, which is a broken test. That’s an inconvenience but it is not a major issue. The other possibility is a false negative, the test should have failed but didn’t. This is more serious, but is essentially the same as not having a test. Likely the state you’re in now.</p>

<p>An advantage test code has over application code is that in general, test code is simpler than application code. Typically unit test code exercises the interfaces of the code under test and examines the values returned by the code under test. Effective use of stubs and mocks excludes dependent code further simplifying the test. This makes NLM-generated test automation easier to review for completeness and correctness.</p>

<h2 id="test-automation-can-expose-design-and-architecture-issues">Test Automation Can Expose Design and Architecture Issues</h2>

<p>Asking an NLM to generate test automation for your code has the added advantage of providing an extra “pair of eyes” on your code. To an extent, the quality of the generated test code is correlated to the quality of the code being tested. Tests that are simple and straight forward are an indication that the code is testable. If the NLM has trouble generating tests or produces test that are complex or incomplete, it’s a sign that the code is not as testable as it could be and that some refactoring may be in order.</p>

<h2 id="enables-refactoring">Enables Refactoring</h2>

<p>Of course the major benefit from generating tests with an NLM is that, in the end, you have tests! And having tests is an enabler for refactoring and making improvements to the codebase.</p>

<h2 id="scoping-statement">Scoping Statement</h2>

<p>In addition to generating tests to increase code coverage, AI can increase the efficiency, accuracy, and scalability of a test suite. It can run tests faster and more precisely, reducing testing cycles. With predictive analytics, AI can prioritize tests likely to uncover defects, improving overall effectiveness. However to realize these benefits you need tests and this post is focused on unit test generation. We’ll get to these other benefits in due time as well generating other types of tests.</p>

<h2 id="further-scoping-statement">Further Scoping Statement</h2>

<p>There are many ways to generate tests. In this post I’ll focus on using GitHub Copilot to demonstrate the ins and outs of generating test automation and I’ll discuss Copilot’s strengths and weaknesses for this. The concepts are applicable to other NLMs but we won’t be comparing them here.</p>

<h2 id="why-copilot">Why Copilot</h2>

<p>GitHub Copilot is a reasonable choice for generating tests. It is supported in VS Code, Visual Studio, IntelliJ IDEA, Vim, and other IDEs. Integration into an IDE is advantageous as the IDE can expose the code to the NLM making it easy to tell the IDE to generate tests using the NLM for a function, method, class, etc.</p>

<h2 id="our-complex-code-that-needs-testing">Our Complex Code That Needs Testing</h2>

<p>To demonstrate generating automated tests we need code to test. More specifically, we need code that is not trivial and that has some degree of complexity to challenge the NLM’s test generation capabilities. Rather than trying to extract a snippet from an existing codebase or creating something from scratch, I handed the task off to Copilot.</p>

<p>My first attempt was with the prompt: “Can you create a C# class that has a high cyclomatic complexity?” which produced a complex class which would suffice but was based on numeric comparisons and not very readable. I added that “I’m looking for a real-world example” and Copilot produced a class similar to code below, which is much more suitable.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">BankAccountApp</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BankAccount</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">decimal</span> <span class="n">Balance</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsActive</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="kt">decimal</span> <span class="n">initialBalance</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Balance</span> <span class="p">=</span> <span class="n">initialBalance</span><span class="p">;</span>
            <span class="n">IsActive</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">decimal</span> <span class="nf">MakeDeposit</span><span class="p">(</span><span class="kt">decimal</span> <span class="n">amount</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Balance</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">decimal</span> <span class="nf">MakeWithdrawal</span><span class="p">(</span><span class="kt">decimal</span> <span class="n">amount</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">,</span> <span class="n">amount</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">Balance</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">virtual</span> <span class="k">void</span> <span class="nf">ProcessTransaction</span><span class="p">(</span><span class="kt">string</span> <span class="n">transactionType</span><span class="p">,</span> <span class="kt">decimal</span> <span class="n">amount</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">IsActive</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Account is inactive."</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">transactionType</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="s">"Deposit"</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">amount</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Balance</span> <span class="p">+=</span> <span class="n">amount</span><span class="p">;</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Deposited: </span><span class="p">{</span><span class="n">amount</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Invalid deposit amount."</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s">"Withdraw"</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">amount</span> <span class="p">&gt;</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">amount</span> <span class="p">&lt;=</span> <span class="n">Balance</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Balance</span> <span class="p">-=</span> <span class="n">amount</span><span class="p">;</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Withdrew: </span><span class="p">{</span><span class="n">amount</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">amount</span> <span class="p">&gt;</span> <span class="n">Balance</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Insufficient funds."</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Invalid withdrawal amount."</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Invalid transaction type."</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Balance</span> <span class="p">&lt;</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">IsActive</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Account deactivated due to negative balance."</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method in the <code class="language-plaintext highlighter-rouge">BankAccount</code> class handles two types of transactions: deposits and withdrawals. It first checks if the account is active. If not, it prints a message and exits. For each transaction type, it validates the amount and updates the balance accordingly, printing appropriate messages for each case. If the balance becomes negative, the account is deactivated.</p>

<p>This class is complex enough to require a good amount of test automation to provide adequate code coverage. Tests are needed for each transaction type and each transaction type has different conditions that need to be tested. Also the <code class="language-plaintext highlighter-rouge">IsActive</code> flag and the negative balance conditions need testing.</p>

<p>Copilot gave us complex code, not necessarily clean code and there are opportunities to improve this legacy code. But before we might attempt improvements we should have tests for the current implementation so that we can be confident that any refactoring doesn’t introduce defects.</p>

<h2 id="using-copilot-to-write-unit-tests">Using Copilot to Write Unit Tests</h2>

<p>Copilot has several ways to generate tests. I’m focusing on using the Copilot integration with Visual Studio Code which is fairly representative of other IDEs and techniques.</p>

<h3 id="generating-tests-in-vscode">Generating Tests in VSCode</h3>

<p>In VSCode there are two primary ways to generate tests. You can enter commands in Copilot chat or you can use the right-click menu in a code file and select to generate tests.</p>

<h4 id="generate-tests-for-the-makedepost-method">Generate Tests for the MakeDepost Method</h4>

<p>To generate tests for a single method or function in the Copilot chat, enter a prompt asking Copilot to generate tests for the method or function. For example, the prompt: <code class="language-plaintext highlighter-rouge">Generate unit tests for the MakeDeposit method of the BankAccount class</code> produced the code:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Xunit</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BankAccountApp</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">BankAccountTests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BankAccountTests</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">MakeDeposit_ShouldIncreaseBalance</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">newBalance</span> <span class="p">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">MakeDeposit</span><span class="p">(</span><span class="m">50m</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">150m</span><span class="p">,</span> <span class="n">newBalance</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">150m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">MakeDeposit_ShouldNotChangeBalance_WhenAmountIsNegative</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">newBalance</span> <span class="p">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">MakeDeposit</span><span class="p">(-</span><span class="m">50m</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">newBalance</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="add-mocking-to-isolate-dependencies">Add Mocking to Isolate Dependencies</h3>

<p>The <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method calls the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method and returns the new balance. As a unit test of the <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method, the functioning of the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method should not effect the testing of the <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method and clearly both tests depend on an expected behavior of the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method in order to pass.</p>

<p>We can address this with another prompt: <code class="language-plaintext highlighter-rouge">Can you mock the ProcessTransaction method in every MakeDeposit test?</code> which produced new tests that leverage the Moq framework and reflection to remove the dependency on the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Xunit</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Moq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">BankAccountApp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Reflection</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">BankAccountTests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">BankAccountTests</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">MakeDeposit_ShouldCallProcessTransaction</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">mockAccount</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">BankAccount</span><span class="p">&gt;(</span><span class="m">100m</span><span class="p">)</span> <span class="p">{</span> <span class="n">CallBase</span> <span class="p">=</span> <span class="k">true</span> <span class="p">};</span>

            <span class="c1">// Act</span>
            <span class="n">mockAccount</span><span class="p">.</span><span class="n">Object</span><span class="p">.</span><span class="nf">MakeDeposit</span><span class="p">(</span><span class="m">50m</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">mockAccount</span><span class="p">.</span><span class="nf">Verify</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="m">50m</span><span class="p">),</span> <span class="n">Times</span><span class="p">.</span><span class="n">Once</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">MakeDeposit_ShouldIncreaseBalance</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">mockAccount</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">BankAccount</span><span class="p">&gt;(</span><span class="m">100m</span><span class="p">)</span> <span class="p">{</span> <span class="n">CallBase</span> <span class="p">=</span> <span class="k">true</span> <span class="p">};</span>
            <span class="n">mockAccount</span><span class="p">.</span><span class="nf">Setup</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="m">50m</span><span class="p">)).</span><span class="nf">Callback</span><span class="p">(()</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">balanceProperty</span> <span class="p">=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">BankAccount</span><span class="p">).</span><span class="nf">GetProperty</span><span class="p">(</span><span class="s">"Balance"</span><span class="p">,</span>
                <span class="n">BindingFlags</span><span class="p">.</span><span class="n">Public</span> <span class="p">|</span> <span class="n">BindingFlags</span><span class="p">.</span><span class="n">Instance</span><span class="p">);</span>
                <span class="n">balanceProperty</span><span class="p">.</span><span class="nf">SetValue</span><span class="p">(</span><span class="n">mockAccount</span><span class="p">.</span><span class="n">Object</span><span class="p">,</span> <span class="m">150m</span><span class="p">);</span>
            <span class="p">});</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">newBalance</span> <span class="p">=</span> <span class="n">mockAccount</span><span class="p">.</span><span class="n">Object</span><span class="p">.</span><span class="nf">MakeDeposit</span><span class="p">(</span><span class="m">50m</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">150m</span><span class="p">,</span> <span class="n">newBalance</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">150m</span><span class="p">,</span> <span class="n">mockAccount</span><span class="p">.</span><span class="n">Object</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">MakeDeposit_ShouldNotChangeBalance_WhenAmountIsNegative</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// Arrange</span>
            <span class="kt">var</span> <span class="n">mockAccount</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">BankAccount</span><span class="p">&gt;(</span><span class="m">100m</span><span class="p">)</span> <span class="p">{</span> <span class="n">CallBase</span> <span class="p">=</span> <span class="k">true</span> <span class="p">};</span>
            <span class="n">mockAccount</span><span class="p">.</span><span class="nf">Setup</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="p">-</span><span class="m">50m</span><span class="p">)).</span><span class="nf">Callback</span><span class="p">(()</span> <span class="p">=&gt;</span>
              <span class="p">{</span> <span class="cm">/* No change in balance */</span> <span class="p">});</span>

            <span class="c1">// Act</span>
            <span class="kt">var</span> <span class="n">newBalance</span> <span class="p">=</span> <span class="n">mockAccount</span><span class="p">.</span><span class="n">Object</span><span class="p">.</span><span class="nf">MakeDeposit</span><span class="p">(-</span><span class="m">50m</span><span class="p">);</span>

            <span class="c1">// Assert</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">newBalance</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">mockAccount</span><span class="p">.</span><span class="n">Object</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="explaining-the-tests">Explaining the Tests</h4>

<p>The <code class="language-plaintext highlighter-rouge">MakeDeposit_ShouldCallProcessTransaction</code> test is designed to verify that the <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method of the <code class="language-plaintext highlighter-rouge">BankAccount</code> class correctly calls the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method with the appropriate parameters. It isolates the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method by creating a mock of the <code class="language-plaintext highlighter-rouge">BankAccount</code> class and then verifying that the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method of the mocked <code class="language-plaintext highlighter-rouge">BankAccount</code> is called once with the expected parameter value.</p>

<p>The <code class="language-plaintext highlighter-rouge">MakeDeposit_ShouldIncreaseBalance</code> method is designed to verify that the <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method of the <code class="language-plaintext highlighter-rouge">BankAccount</code> class correctly increases the account balance. It isolates the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method by creating a mock of the <code class="language-plaintext highlighter-rouge">BankAccount</code> class and implements a mock of the <code class="language-plaintext highlighter-rouge">ProcessTransaction</code> method that assigns the expected value to the <code class="language-plaintext highlighter-rouge">BankAccount.Balance</code> property using reflection.</p>

<p>The <code class="language-plaintext highlighter-rouge">MakeDeposit_ShouldNotChangeBalance_WhenAmountIsNegative</code> test is similar to the <code class="language-plaintext highlighter-rouge">MakeDeposit_ShouldIncreaseBalance</code> test but does not change the balance. Since the <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method has no code that behaves differently when the amount is negative it would be reasonable to drop this test.</p>

<h3 id="generating-tests-for-the-processtransaction-method">Generating Tests for the ProcessTransaction Method</h3>

<p>I used a similar prompt to <code class="language-plaintext highlighter-rouge">Generate unit tests for the ProcesTransaction method of the BankAccount class</code>, which generates these additional tests:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldIncreaseBalance_OnValidDeposit</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">150m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldNotChangeBalance_OnInvalidDeposit</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="p">-</span><span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldDecreaseBalance_OnValidWithdrawal</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">,</span> <span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">50m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldNotChangeBalance_OnInvalidWithdrawal</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">,</span> <span class="p">-</span><span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldNotChangeBalance_OnInsufficientFundsWithdrawal</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">100m</span><span class="p">);</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">,</span> <span class="m">150m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">100m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldDeactivateAccount_OnZeroBalance</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">,</span> <span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">False</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="n">IsActive</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">0m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ProcessTransaction_ShouldNotProcessTransaction_OnInactiveAccount</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BankAccount</span><span class="p">(</span><span class="m">0m</span><span class="p">);</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Withdraw"</span><span class="p">,</span> <span class="m">1m</span><span class="p">);</span> <span class="c1">// Deactivate account</span>

    <span class="c1">// Act</span>
    <span class="n">account</span><span class="p">.</span><span class="nf">ProcessTransaction</span><span class="p">(</span><span class="s">"Deposit"</span><span class="p">,</span> <span class="m">50m</span><span class="p">);</span>

    <span class="c1">// Assert</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="m">0m</span><span class="p">,</span> <span class="n">account</span><span class="p">.</span><span class="n">Balance</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Running these tests shows that two of these tests, <code class="language-plaintext highlighter-rouge">ProcessTransaction_ShouldNotProcessTransaction_OnInactiveAccount</code> and <code class="language-plaintext highlighter-rouge">ProcessTransaction_ShouldDeactivateAccount_OnZeroBalance</code> are failing. These tests both depend on the state of the <code class="language-plaintext highlighter-rouge">IsActive</code> flag. A closer look at the code shows that the <code class="language-plaintext highlighter-rouge">IsActive</code> flag is set after the transactions types are handled when the balance is less than zero. The “Withdraw” transaction has a condition that prevents updating the balance if the amount is greater than the balance. The balance can never be zero and the <code class="language-plaintext highlighter-rouge">IsActive</code> flag will never be cleared. Copilot found a bug!</p>

<h2 id="copilot-conundrums">Copilot Conundrums</h2>

<p>I’ve found that Copilot generated tests sometimes fail due to problems with the test implementation. The test will raise an unexpected error or an assertion will fail unexpectedly. I’ve found that using the error message or test output as a prompt in the same context will eventually resolve the problem. I ran across this when adding mocks to the <code class="language-plaintext highlighter-rouge">MakeDeposit</code> method. At first the test failed trying to set the <code class="language-plaintext highlighter-rouge">Balance</code> in the mock. The <code class="language-plaintext highlighter-rouge">Balance</code> is private and can only be set within the class. Eventually Copilot arrived at a solution using reflection.</p>

<p>I’ve also found that when Copilot has trouble generating tests it can be an indication that the code is not easily testable. I’ve found instances where Copilot struggles to generate working mocks or that the mocking required to properly test the code is excessive. If you find that the complexity of the test code is equal to or exceeding the code under test, you may have no choice but to refactor the code before generating tests.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Leveraging GitHub Copilot for test automation offers numerous benefits, including increased test coverage, efficiency, and accuracy. By generating tests, Copilot can help identify design and architecture issues, enabling refactoring and other improvements to the codebase. Copilot, integrated with popular IDEs, provides a practical solution for generating unit tests, as demonstrated with the <code class="language-plaintext highlighter-rouge">BankAccount</code> class example. While AI-generated tests may sometimes require adjustments, they ultimately contribute to a more robust and maintainable codebase. Embracing Copilot for test automation can significantly enhance the development process, making it more efficient and reliable.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h5 id="disclaimer">Disclaimer</h5>

<p><small>AI contributed to the writing of this blog post.</small></p>

<p><small>Prompts: </small></p>

<ul>
  <li><small>Create a summary paragraph for why AI is good for test automation. </small></li>
  <li><small>Create an outline for why AI is good for test automation. </small></li>
  <li><small>What IDEs does GitHub Copilot support? </small></li>
  <li><small>Can you create a C# class that has a high cyclomatic complexity? </small>
    <ul>
      <li><small>I’m looking for a real world example </small></li>
    </ul>
  </li>
  <li><small>@workspace /explain the MakeDeposit_ShouldCallProcessTransaction method of the BankAccountTests class </small></li>
  <li><small>@workspace /explain the MakeDeposit_ShouldIncreaseBalance method of the BankAccountTests class </small></li>
  <li><small>Generate a conclusion for this post </small></li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/CP4TA">post</a></small></small></small></p>
</li><li><span class="post-meta">Nov 10, 2024</span>
        <h3>
          <a class="post-link" href="/UPGHC/">
            Unleashing the Power of GitHub Copilot in Visual Studio Code
          </a>
        </h3><p>In recent years, AI has been revolutionizing the way we code. One of the most exciting developments in this field is GitHub Copilot, an AI-powered code assistant developed by GitHub in collaboration with OpenAI. It leverages machine learning models trained on billions of lines of public code, allowing it to understand context and provide relevant suggestions. Whether you’re writing a new function or fixing a bug, Copilot is there to help streamline your coding process. Let’s dive into the basics of using GitHub Copilot in Visual Studio Code (VS Code) to supercharge your development workflow.</p>

<h2 id="getting-started">Getting Started</h2>

<h3 id="1-installation">1. Installation</h3>

<p>To start using GitHub Copilot in VS Code, you’ll need to install the GitHub Copilot extension. Here’s how:</p>

<ul>
  <li>Open Visual Studio Code.</li>
  <li>Go to the Extensions view by clicking the Extensions icon in the Activity Bar on the side of the window or by pressing <code class="language-plaintext highlighter-rouge">Ctrl+Shift+X</code>.</li>
  <li>Search for “GitHub Copilot” and click <code class="language-plaintext highlighter-rouge">Install</code>.</li>
</ul>

<p>GitHub Copilot is a paid service with a 30-day free trial. Refer to the GitHub documentation to select a plan and sign-up for an account. See <a href="https://docs.github.com/en/copilot/about-github-copilot/subscription-plans-for-github-copilot" target="_blank">Subscription plans for GitHub Copilot - GitHub Docs</a> for more information on signing up for Copilot.</p>

<h3 id="2-authentication">2. Authentication</h3>

<p>After installing the extension, you’ll need to authenticate with your GitHub account:</p>

<ul>
  <li>Open any file or create a new one.</li>
  <li>Start typing, and Copilot will prompt you to sign in to GitHub.</li>
  <li>Follow the on-screen instructions to complete the sign-in process.</li>
</ul>

<h2 id="basic-concepts">Basic Concepts</h2>

<h3 id="1-autocomplete-suggestions">1. Autocomplete Suggestions</h3>

<p>As you type, GitHub Copilot provides real-time code suggestions. You can accept these suggestions by pressing <code class="language-plaintext highlighter-rouge">Tab</code>. If you see multiple suggestions, you can navigate through them using the <code class="language-plaintext highlighter-rouge">Up</code> and <code class="language-plaintext highlighter-rouge">Down</code> arrow keys.</p>

<p><img src="/assets/images/2024-11-11/public-class-suggestion.png" alt="Copilot Auto-complete example" />
<br /></p>

<p>Here with little prompting of Copilot, other than the name of code file (circle.cs), Copilot generates suggested implementations of the class. The acceptance toolbar shows three suggestions and you can rotate through them with the arrows. From the toolbar you can also open the Completions Panel and see all suggestions. In this case, there are 10 suggestions. You can tab to accept the displayed suggestion or in the Completion Panel accept a specific suggestion.</p>

<p>Autocomplete makes a good attempt at suggesting code; when it’s context aware it becomes very powerful.</p>

<h3 id="2-context-aware-code">2. Context-Aware Code</h3>

<p>Copilot understands the context of your code. For example, if you’re writing a function, it can suggest complete function implementations based on the function name and its parameters. It can even provide comments and documentation snippets. The context-aware capabilities of GitHub Copilot allow it to understand the structure and purpose of your code.</p>

<p>Given this definition of the Circle class:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Circle</span> <span class="p">:</span> <span class="n">Shape</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">double</span> <span class="n">Radius</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">Circle</span><span class="p">(</span><span class="kt">double</span> <span class="n">radius</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Radius</span> <span class="p">=</span> <span class="n">radius</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">double</span> <span class="nf">Area</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">Math</span><span class="p">.</span><span class="n">PI</span> <span class="p">*</span> <span class="n">Radius</span> <span class="p">*</span> <span class="n">Radius</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p><br /></p>

<p>Copilot infers several things:</p>

<ul>
  <li><strong>Class inheritance:</strong> The Circle class inherits from a Shape class, suggesting that Circle is a specific type of shape.</li>
  <li><strong>Properties and methods:</strong> The class has a <code class="language-plaintext highlighter-rouge">Radius</code> property and an <code class="language-plaintext highlighter-rouge">Area</code> method, indicating that it deals with geometric calculations.</li>
  <li><strong>Constructor:</strong> The constructor initializes the <code class="language-plaintext highlighter-rouge">Radius</code> property, which is essential for any calculations involving the circle.</li>
</ul>

<p>Given this context, when you ask Copilot to add a new method, it suggests relevant methods that are typical for a circle, such as calculating the circumference. It can also provide appropriate comments and documentation based on common practices:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// Calculates the circumference of the circle.</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;returns&gt;The circumference of the circle.&lt;/returns&gt;</span>
    <span class="k">public</span> <span class="kt">double</span> <span class="nf">Circumference</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="m">2</span> <span class="p">*</span> <span class="n">Math</span><span class="p">.</span><span class="n">PI</span> <span class="p">*</span> <span class="n">Radius</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></div>
<p><br /></p>

<p>For example, when adding the <code class="language-plaintext highlighter-rouge">Circumference</code> method, Copilot understands that:</p>

<ul>
  <li>The method should be related to the geometric properties of a circle.</li>
  <li>It should use the <code class="language-plaintext highlighter-rouge">Radius</code> property.</li>
  <li>It should follow the same style and conventions as the existing <code class="language-plaintext highlighter-rouge">Area</code> method.</li>
  <li>This context awareness helps Copilot provide accurate and relevant code suggestions that fit seamlessly into your existing codebase.</li>
</ul>

<p>Context awareness learns how you write code and tries to emulate your style. For example, if you start and end most methods with a log entry, Copilot will recognize the pattern and offer to insert a log entry consistent with the pattern and tailored to the current context.</p>

<h3 id="3-multi-line-completions">3. Multi-line Completions</h3>

<p>For more complex tasks, Copilot can suggest multi-line completions. These are especially useful for boilerplate code, loops, or error handling. You can accept these suggestions in the same way as single-line completions. The auto-complete suggestions for the circle class example is a good example of multi-line insertions.</p>

<h3 id="4-example-based-learning">4. Example-Based Learning</h3>

<p>You can teach Copilot by providing examples. If you write a few lines of code or a comment describing what you want, Copilot can suggest the next lines of code. This can be incredibly powerful for repetitive tasks or following specific coding patterns.</p>

<p>For example, if we add the comment to the <code class="language-plaintext highlighter-rouge">circle.cs</code>:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Oval is a shape class that inherits from Circle and overrides the Area method</span>
</code></pre></div></div>
<p><br /></p>

<p>And we start the definition of a class on the next line. Copilot will suggest a class that implements the comment.</p>

<p><img src="/assets/images/2024-11-11/Oval-class.png" alt="Copilot Oval class suggestion" /></p>

<p>This works for other code comments. The comment, “Loop through all of the accounts and apply a discounts of 10% to the accounts with a lifetime value greater than 100000” would generate a suggestion that contained a request for the accounts, a loop through the accounts, a condition to select an account, and that application of the discount. If Copilot is aware how data is requested in other parts of the app, how lifetime value is derived, and how discounts are applied.</p>

<h2 id="copilot-workspaces">Copilot Workspaces</h2>

<p>The @workspace command in GitHub Copilot is a powerful feature that allows you to ask questions about your entire codebase. When you use @workspace, Copilot intelligently retrieves relevant files and symbols from your workspace to provide context-aware answers. Here are some ways you can use @workspace:</p>

<ul>
  <li><strong>Finding Existing Code:</strong> You can ask questions like, “Where is the database connection string configured?” or “How can I validate a date?” Copilot will find and reference the relevant code in your <code class="language-plaintext highlighter-rouge">workspace1</code>.</li>
  <li><strong>Planning Code Edits:</strong> You can ask for plans on how to implement specific features, such as, “How can I add a rich tool-tip to a button?” or “Add date validation to #selection”. Copilot will provide a plan based on your existing code.</li>
  <li><strong>Explaining Concepts:</strong> You can ask higher-level questions like, “How is authentication implemented?” or “Which API routes depend on this service?” Copilot will give an overview and reference relevant parts of your code.</li>
  <li><strong>Workspace Context:</strong> @workspace uses the same sources a developer would when navigating a codebase in VS Code, such as all files in the workspace (except those ignored by <code class="language-plaintext highlighter-rouge">.gitignore</code>), directory structure, symbols, and definitions.</li>
</ul>

<p>By using @workspace, you can make Copilot an expert in your workspace, helping you navigate and understand your codebase more effectively.</p>

<h2 id="copilot-functions">Copilot Functions</h2>

<p>GitHub Copilot provides several core capabilities that can be accessed in several ways. These capabilities are doc, explain, fix, generate, optimize, and tests.</p>

<h3 id="doc">doc</h3>

<p>The <code class="language-plaintext highlighter-rouge">/doc</code> command is used to provide documentation or explanations for a given code. It can generate comments, summaries, or detailed descriptions to help understand the functionality and purpose of the code.</p>

<h3 id="explain">explain</h3>

<p>The <code class="language-plaintext highlighter-rouge">/explain</code> command is used to provide an explanation or description of a given code snippet, helping to understand its functionality and how it works. This particularly useful when dealing with code you didn’t write or code that is generated.</p>

<h3 id="fix">fix</h3>

<p>The <code class="language-plaintext highlighter-rouge">/fix</code> command is used to identify and correct issues in a given code snippet, such as syntax errors, logical errors, or other problems that may be present.</p>

<h3 id="generate">generate</h3>

<p>The <code class="language-plaintext highlighter-rouge">/generate</code> command is used to generate new code snippets or suggestions based on the provided context or instructions. It helps in creating boilerplate code, completing code, or generating new functionality based on the given input.</p>

<h3 id="optimize">optimize</h3>

<p>The <code class="language-plaintext highlighter-rouge">/optimize</code> command is used to improve the performance or efficiency of a given code snippet. It analyzes the code and suggests or applies optimizations to enhance its execution speed, memory usage, or overall efficiency.</p>

<h3 id="test">test</h3>

<p>The <code class="language-plaintext highlighter-rouge">/test</code> command is used to generate unit tests for a given code snippet. It helps in creating automated tests to verify the functionality and correctness of the code.</p>

<h2 id="copilot-integration-with-vs-code">Copilot Integration With VS Code</h2>

<p>Copilot integrates with many IDEs. In this post, I’m describing the integration with VS Code. The integration with other IDEs should be similar but may be different.</p>

<h3 id="the-copilot-chat">The Copilot Chat</h3>

<p><img src="/assets/images/2024-11-11/copilot-chat.png" alt="Copilot Chat" />
<br /></p>

<p>Copilot Chat commands are special commands you can use within the chat interface to quickly perform common tasks or get specific information. Here are some of the key commands:</p>

<h4 id="common-github-copilot-chat-commands">Common GitHub Copilot Chat Commands</h4>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Description</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>/doc</strong></td>
      <td>Adds documentation comments for the specified or selected code.</td>
      <td><code class="language-plaintext highlighter-rouge">/doc AddBasketAsync method in BasketService.cs</code></td>
    </tr>
    <tr>
      <td><strong>/explain</strong></td>
      <td>Provides explanations for the selected code.</td>
      <td><code class="language-plaintext highlighter-rouge">/explain the AddItemToBasket method in BasketService.cs</code></td>
    </tr>
    <tr>
      <td><strong>/fix</strong></td>
      <td>Proposes a fix for problems in the selected code.</td>
      <td><code class="language-plaintext highlighter-rouge">/fix the SetQuantities method in BasketService.cs</code></td>
    </tr>
    <tr>
      <td><strong>/generate</strong></td>
      <td>Generates code to answer your question.</td>
      <td><code class="language-plaintext highlighter-rouge">/generate a function to sum all numbers in a list</code></td>
    </tr>
    <tr>
      <td><strong>/help</strong></td>
      <td>Gets help with Copilot Chat.</td>
      <td><code class="language-plaintext highlighter-rouge">/help</code></td>
    </tr>
    <tr>
      <td><strong>/optimize</strong></td>
      <td>Analyzes and suggests improvements for the running time of the selected code.</td>
      <td><code class="language-plaintext highlighter-rouge">/optimize the fetchData function</code></td>
    </tr>
    <tr>
      <td><strong>/tests</strong></td>
      <td>Creates unit tests for the selected code.</td>
      <td><code class="language-plaintext highlighter-rouge">/tests for the calculate_circle_area function</code></td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h4 id="using-chat-variables">Using Chat Variables</h4>

<p>You can also use chat variables to provide more context to Copilot:</p>
<ul>
  <li><strong>#selection</strong>: Refers to the selected text in your code.</li>
  <li><strong>#file</strong>: Refers to the current file.</li>
  <li><strong>#editor</strong>: Refers to the current editor.</li>
  <li><strong>#codebase</strong>: Refers to the entire codebase.</li>
  <li><strong>#git</strong>: Refers to the Git repository.</li>
</ul>

<h4 id="example-usage">Example Usage</h4>

<p>Let’s say you want to add documentation to a method:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">fetchData</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Fetch data from the URL</span>
    <span class="k">return</span> <span class="nf">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">())</span>
        <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error fetching data:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>
<p><br /></p>

<p>You can use the <code class="language-plaintext highlighter-rouge">/doc</code> command to add comments:</p>

<p><code class="language-plaintext highlighter-rouge">/doc fetchData method in DataService.js</code></p>

<p>Copilot will then add appropriate documentation comments to the <code class="language-plaintext highlighter-rouge">fetchData</code> method.</p>

<p>These commands can help you quickly perform tasks and get information without leaving your IDE, making your coding process more efficient.</p>

<h3 id="chat-window-chat-with-extension-feature">Chat Window, Chat With Extension Feature</h3>

<p>The Chat with Extension feature allows you to target your prompt to an GitHub Copilot Extension.</p>

<p><img src="/assets/images/2024-11-11/copilot-chat-with-extension.png" alt="Copilot chat with extension" />
&lt;/br&gt;</p>

<p>If you are interested in the current workspace, the @workspace command will return the current workspace contents. Selecting the “@” sign inserts the @ sign into the chat which brings up a list of extensions and their commands. Any characters after the @ filters the list. Below I’ve added a w and the list is filtered to workspace commands.</p>

<p><img src="/assets/images/2024-11-11/copilot-chat-with-extension-detail.png" alt="GitHub Copilot with the @w entered, which filters the responses to the commands that begin with w" />
&lt;/br&gt;</p>

<p>There are quite a few extensions from third-party vendors. Be sure to checkout the</p>

<p><a href="https://github.com/marketplace?page=2&amp;type=apps&amp;copilot_app=true" target="_blank">GitHub Copilot Marketplace</a>.</p>

<h3 id="chat-window-attach-context-feature">Chat Window Attach Context Feature</h3>

<p>This feature adds content to the workspace.</p>

<p><img src="/assets/images/2024-11-11/copilot-chat-attach-context.png" alt="Copilot chat attach context" />
&lt;/br&gt;</p>

<p>Selecting to attach content brings up a list of content types.</p>

<p><img src="/assets/images/2024-11-11/copilot-chat-attach-context-details.png" alt="GitHub Copilot with a list of attachment types" /></p>

<h3 id="chat-window-voice-chat-and-pick-model-features">Chat Window Voice Chat and Pick Model Features</h3>

<p>These actions are self explanatory and do what you would expect.</p>

<p><img src="/assets/images/2024-11-11/copilot-voice-chat.png" alt="GitHub Copilot voice chat. Click to speak into GitHub Copilot and it will translate your voice to text." />
&lt;/br&gt;</p>

<p><img src="/assets/images/2024-11-11/copilot-chat-pick-model.png" alt="In GitHub Copilot list where you can pick the model you want to use." />
&lt;/br&gt;</p>

<h3 id="chat-window-send-menu">Chat Window Send Menu</h3>

<p>The send button submits a prompt and the drop-down exposes a menu of send options.</p>

<p><img src="/assets/images/2024-11-11/copilot-chat-send-menu.png" alt="Copilot chat send menu" /></p>

<h4 id="send-vs-send-and-dispatch">Send vs. Send and Dispatch</h4>

<p>“Send” will send your message as it is, while “Send and Dispatch” will send your message and also execute the relevant GitHub Copilot Chat Assistant functions to provide a more interactive and dynamic response.</p>

<h4 id="send-to-workspace">Send to @workspace</h4>

<p>“Send to @workspace” allows you to send the current code snippet or message to your workspace, which can be a shared environment or project space where team members can collaborate and view shared content.</p>

<h4 id="send-to-copilot-edits">Send to Copilot Edits</h4>

<p>“Send to Copilot Edits” sends the selected code snippet to GitHub Copilot for suggestions and improvements, allowing you to receive inline code edits or enhancements directly within your development environment.</p>

<h4 id="send-to-new-chat">Send to New Chat</h4>

<p>“Send to New Chat” allows you to send the current message or code snippet to a new chat session, creating a separate conversation thread for that specific content.</p>

<h3 id="the-copilot-shortcut-menu">The Copilot Shortcut Menu</h3>

<p><img src="/assets/images/2024-11-11/copilot-shortcut-menu-1.png" alt="Copilot shortcut menu" />
&lt;/br&gt;</p>

<p>In VS Code you can right-click in the code editor and then select the Copilot menu option to bring up the Copilot shortcut menu.</p>

<h4 id="editor-inline-chat">Editor Inline Chat</h4>

<p><img src="/assets/images/2024-11-11/copilot-editor-inline-chat.png" alt="The GitHub Copilot Editor, which appears inline, where you can interact with Copilot." />
&lt;/br&gt;</p>

<p>The “Editor Inline Chat” menu option in GitHub Copilot allows you to start an inline chat session directly within your code editor. This feature enables you to interact with GitHub Copilot in a conversational manner, asking questions and receiving context-aware responses and code suggestions right next to your code. It helps you get real-time assistance and explanations without leaving your coding environment.</p>

<h4 id="explain-fix-generate-docs-and-generate-tests">Explain, Fix, Generate Docs, and Generate Tests</h4>

<p>These are the same options as in the main chat window, but they are scoped to the inline context.</p>

<h4 id="review-and-comment">Review and Comment</h4>

<p>The “Review and Comment” menu option in GitHub Copilot allows you to review the selected code and provide comments or feedback. This feature helps you to analyze the code, suggest improvements, and document your thoughts directly within the code editor. It facilitates collaboration and code review processes by enabling you to leave detailed comments and suggestions for yourself or your team members.</p>

<p><img src="/assets/images/2024-11-11/Review%20and%20comment%20fo%20circle%20class.png" alt="Running the Review and Comment menu option in GitHub Copilot" />
&lt;/br&gt;</p>

<p>Running Review and Comment on the circle class generates suggestion for adding XML comments to the code and allows you accept or discards the suggestions.</p>

<h4 id="add-file-to-chat">Add File to Chat</h4>

<p>The “Add File to Chat” menu option in GitHub Copilot allows you to include an entire file in your chat session. This feature enables you to discuss, review, or get assistance on the entire content of a file, rather than just a selected snippet. It helps in providing context-aware suggestions, explanations, or improvements for the whole file.</p>

<h3 id="copilot-extensions">Copilot Extensions</h3>

<p>GitHub Copilot Extensions are additional tools and features that enhance the functionality of GitHub Copilot within your development environment. These extensions can provide various capabilities such as:</p>

<ul>
  <li><strong>Language Support:</strong> Extensions for different programming languages to provide context-aware code completions, suggestions, and documentation.</li>
  <li><strong>Framework Integration:</strong> Extensions that integrate with specific frameworks or libraries to offer tailored code suggestions and best practices.</li>
  <li><strong>Testing and Debugging:</strong> Tools to help generate unit tests, debug code, and ensure code quality.</li>
  <li><strong>Documentation:</strong> Features to automatically generate documentation comments and summaries for your code.</li>
  <li><strong>Code Optimization:</strong> Extensions that suggest performance improvements and optimizations for your code.</li>
</ul>

<p>These extensions aim to improve your coding experience by providing more relevant and powerful assistance based on the specific context of your project and the technologies you are using. See the <a href="https://github.com/marketplace?page=2&amp;type=apps&amp;copilot_app=true" target="_blank">GitHub Copilot Marketplace</a> to find and install extensions.</p>

<h3 id="tips-for-effective-use">Tips for Effective Use</h3>

<h4 id="write-descriptive-comments">Write Descriptive Comments</h4>

<p>To make example-based learning suggestions more effective, use clear, descriptive comments to help Copilot understand your intent. This will improve the relevance and accuracy of the suggestions.</p>

<h4 id="review-and-edit">Review and Edit</h4>

<p>Always review the suggestions provided by Copilot. While it is a powerful tool, it may not always produce perfect code. Treat GitHub Copilot’s suggestions as a starting point rather than the final solution.</p>

<h4 id="experiment-with-different-prompts">Experiment With Different Prompts</h4>

<p>If Copilot’s suggestions aren’t quite what you’re looking for, try rephrasing your comments or writing a different code snippet to see if it provides more relevant suggestions.</p>

<h2 id="conclusion">Conclusion</h2>

<p>GitHub Copilot is a game-changing tool for developers. It can significantly speed up your coding process, reduce the mental load of writing boilerplate code, and even inspire new approaches to problem-solving. By integrating Copilot into your VS Code workflow, you can focus more on the creative aspects of development while letting AI handle the mundane tasks.</p>

<h3 id="feedback-loop">Feedback Loop</h3>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>
</li><li><span class="post-meta">Oct 13, 2024</span>
        <h3>
          <a class="post-link" href="/BDPwAI/">
            Boosting Developer Productivity with AI Tools and Effective Strategies
          </a>
        </h3><p>The phrase “developers will not be replaced by AI, they’ll be replaced by developers that use AI” underscores a critical shift in the tech industry. It highlights that AI is not a threat to developers’ jobs but rather a powerful tool that can enhance their capabilities. Developers who embrace AI can automate repetitive tasks, gain deeper insights through data analysis, and accelerate their coding processes. This allows them to focus on more complex, creative, and strategic aspects of their work. In contrast, those who resist adopting AI may find themselves at a disadvantage, as they miss out on the efficiency and innovation that AI can bring. Essentially, the future belongs to developers who leverage AI to augment their skills and productivity, staying ahead in an increasingly competitive landscape.</p>

<p>In today’s fast-paced tech environment, enhancing developer productivity is crucial for maintaining a competitive edge. Recent studies and reports have highlighted several ways to achieve this, particularly through the use of AI tools and strategic work practices. Let’s dive into some key findings and how they can be applied to your development teams.</p>

<p>AI is different from other changes in software development in that AI changes how developers work. Prior to AI as new languages get released and new coding practices are adopted, developers needed to manually implement the changes. AI can help with the actual implementation and becomes a partner in the software development process. Whether they completely understand it or not, hiring managers will want developers who are proficient in AI because developers who can leverage AI are significantly more effective.</p>

<p>Enhancing developer productivity is crucial for maintaining a competitive edge. Recent studies and reports have highlighted several ways to achieve this, particularly through the use of AI tools and strategic work practices. Let’s dive into some key findings and how they can be applied to your development teams.</p>

<h2 id="the-power-of-generative-ai-tools">The Power of Generative AI Tools</h2>

<p>Generative AI tools are revolutionizing the way developers work. According to <a href="https://www.mckinsey.com/capabilities/mckinsey-digital/our-insights/unleashing-developer-productivity-with-generative-ai?cid=eml-web" target="_blank">McKinsey</a>, these tools can significantly speed up common tasks:</p>

<ul>
  <li>Documenting Code: Tasks that typically take hours can be completed in half the time.</li>
  <li>Writing New Code: Developers can write new code nearly twice as fast.</li>
  <li>Optimizing Existing Code: Code optimization can be done in nearly two-thirds the time it usually takes.</li>
</ul>

<p>In addition to McKinsey, in my own experience I would add test automation, pipeline implementation and debugging to the tasks that can benefit from AI assistance.</p>

<p>These tools not only enhance speed but also help maintain high code quality, allowing developers to focus on more complex and creative aspects of their work.</p>

<h2 id="the-importance-of-deep-work">The Importance of Deep Work</h2>

<p><a href="https://techcommunity.microsoft.com/t5/microsoft-developer-community/putting-tools-in-your-hands-to-improve-developer-productivity/ba-p/2902225" target="_blank">A study by Microsoft</a> emphasizes the value of deep work for developers. Developers who have dedicated time for uninterrupted work report feeling 50% more productive. I’ve found that AI allows me to stay focused by keeping me from having to interrupt others. I also avoid the time-consuming hunt for relevant information. AI either fixes the issue or explains the current implementation and makes suggestions.</p>

<p>Of course, AI doesn’t always pan out and you have go old school, but every time it does work, it keeps you in the flow and that makes you more efficient.</p>

<h2 id="enhancing-the-developer-experience">Enhancing the Developer Experience</h2>

<p>Improving the overall developer experience has a direct impact on productivity. McKinsey found that a better developer experience can lead to a 20-30% reduction in customer-reported product defects and a 20% improvement in employee experience scores. This underscores the importance of providing developers with the right tools and a positive work environment.</p>

<p>AI gives you superpowers. Your fear and anxiety drops; you have more confidence taking on unfamiliar work. Your quality goes up because you are able to automate more tests and safety checks. You worry less about about syntax and do more implementation. Isn’t this the developer experience we all want?</p>

<h2 id="conclusion">Conclusion</h2>

<p>In the high pressure world of software development, I need to leverage every advantage I can and AI has proven to be quite an advantage. AI is the first major change in how developers work since paper tape and punch cards. To use a term by Doug Finke, you need to adopt an AI mindset.</p>

<p>This blog is dedicated to exploring how AI can make software development more efficient and make developers more effective. We’ll explore concrete examples, new tooling, improvements in the models and how to apply AI to full life cycle of a software development project. Watch this space!</p>

<h4 id="references">References</h4>

<ul>
  <li><a href="https://www.mckinsey.com/capabilities/mckinsey-digital/our-insights/unleashing-developer-productivity-with-generative-ai?cid=eml-web">Unleashing developer productivity with generative AI</a></li>
  <li><a href="https://techcommunity.microsoft.com/t5/microsoft-developer-community/putting-tools-in-your-hands-to-improve-developer-productivity/ba-p/2902225">Putting Tools in Your Hands to Improve Developer Productivity</a></li>
</ul>

<h4 id="disclaimer">Disclaimer</h4>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and get it soul.</p>

<p>Prompts:</p>

<ul>
  <li>Can you summarize the data that supports AI productivity improvements for developers?</li>
  <li>Can you write a blog post that includes this information?</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/BDPwAI">post</a></small></small></small></p>
</li></ul>

    <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p></div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">AI Practitioner</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">John Michael Miller</li><li><a class="u-email" href="mailto:AIPractitioner@pdata.com">AIPractitioner@pdata.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>jMM&#39;s AI Practitioner Blog</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
