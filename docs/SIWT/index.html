<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Sharing Instructions with the Team | AI Practitioner</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Sharing Instructions with the Team" />
<meta name="author" content="John Michael Miller" />
<meta property="og:locale" content="en" />
<meta name="description" content="jMM’s AI Practitioner Blog" />
<meta property="og:description" content="jMM’s AI Practitioner Blog" />
<link rel="canonical" href="https://blog.pdata.com/SIWT/" />
<meta property="og:url" content="https://blog.pdata.com/SIWT/" />
<meta property="og:site_name" content="AI Practitioner" />
<meta property="og:image" content="https://blog.pdata.com/assets/images/2025-08-30/header-SIWT.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-08-30T00:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://blog.pdata.com/assets/images/2025-08-30/header-SIWT.jpg" />
<meta property="twitter:title" content="Sharing Instructions with the Team" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"John Michael Miller"},"dateModified":"2025-08-30T00:00:00-07:00","datePublished":"2025-08-30T00:00:00-07:00","description":"jMM’s AI Practitioner Blog","headline":"Sharing Instructions with the Team","image":"https://blog.pdata.com/assets/images/2025-08-30/header-SIWT.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.pdata.com/SIWT/"},"url":"https://blog.pdata.com/SIWT/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://blog.pdata.com/feed.xml" title="AI Practitioner" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">AI Practitioner</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Home</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Sharing Instructions with the Team</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2025-08-30T00:00:00-07:00" itemprop="datePublished">Aug 30, 2025
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><img src="/assets/images/2025-08-30/header-SIWT.jpg" alt="Header Image" /></p>

<p><img src="/assets/images/2025-08-30/header-SIWT.png" alt="Header Image" /></p>

<p>When working with GitHub Copilot across multiple projects, you’ll quickly face a common challenge: how do you share generic instructions (ie. coding standards and best practices) with team members working on different projects without duplicating instruction files in every repository? This post walks you through prompting Copilot to implement a solution leveraging symlinks and junction points.</p>

<h2 id="what-are-instruction-files">What Are Instruction Files?</h2>

<p>For those of you new to using GitHub Copilot, instruction files are the blueprint for customizing how Copilot agents behave, respond, and interact with tools. Instruction files include natural language guidance that shapes the agent’s tone, reasoning style, and response formatting, making them essential for tailoring Copilot to specific workflows, domains, or compliance requirements. Instruction files give you granular control over how the agent interprets user intent and executes tasks.</p>

<p>Instruction files for GitHub Copilot agents can be located within the project repository in the <code class="language-plaintext highlighter-rouge">.github</code> folder or a sub-folder of <code class="language-plaintext highlighter-rouge">.github</code>. They can also reside in the user’s home directory in a <code class="language-plaintext highlighter-rouge">.github</code> prompts folder. The project repository location takes precedence over the user home directory location.</p>

<p>Instruction files in the project folder are in scope for that project. Instruction files in the user home directory are available to all projects. Instruction files in the user home directory are limited in that the can only reside in the prompts folder.</p>

<p>For instructions that are not project specific, such as coding standards and practices, it is desirable to share them across multiple projects. However, duplicating these files in each project repository is inefficient and error-prone. Instead, we can use symbolic links (symlinks) on Linux and macOS, and junction points on Windows, to create a single source of truth for shared instructions.</p>

<p>Ideally it would be nice to create a link in the user folder once and have it be used across all projects. Due to the limitations on the user home directory location, creating a link there would require that all of the shared instructions be in a single folder in the source and it would preclude storing any personal instructions.</p>

<p>Therefore, we need to establish these links within each project. Our solution involves creating these links seamlessly.</p>

<h2 id="what-is-a-symlink-and-junction-point">What Is a Symlink and Junction Point?</h2>

<p>A symlink (symbolic link) is a special type of file that points to another file or directory, allowing you to access the target as if it were located at the link’s location. Symlinks are commonly used on Linux and macOS to create shortcuts or shared folders. A junction point is a similar concept used on Windows; it creates a link to a directory, making the contents of the target directory appear in the linked location. Both mechanisms enable you to share or reuse files and folders across different locations without duplicating data, which simplifies maintenance and updates.</p>

<h2 id="the-prompt">The Prompt</h2>

<p>The solution involves creating a repo that contains the instruction files to be shared. Developers on the team can clone the repo locally and pull changes as needed. They can also change or add instructions to the repo and push those changes to the origin. Making them available to other team members.</p>

<p>Once the repo is established, we need to provide guidance for the team in creating the links to the shared instructions. We’ll ask Copilot to create scripts for each OS (Windows, Linux, macOS) that will create the appropriate link from the project repository to the shared instructions folder in the central repo. The scripts will also ensure that the linked folder is added to the project’s <code class="language-plaintext highlighter-rouge">.gitignore</code> file to prevent accidental commits of the shared instructions to the project repository. In addition we’ll ask Copilot to create a README file with instructions on how to use the scripts.</p>

<p>Here is the prompt I gave GitHub Copilot:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Write three scripts to create a symlink or junction point for windows, Linux, and Mac.

Use a symlink for Linux and Mac, and a junction point for Windows using
the New-Item -ItemType Junction cmdlet.

The symlink or junction point goes to the <span class="sb">`./instructions`</span> folder in this GitHubCopilot repo
from the <span class="sb">`./github/instructions/shared`</span> folder in the Project repo.

You'll need the paths to both the GitHubCopilot repo and the Project repo in order to proceed.

Ensure that the Project repo's <span class="sb">`./github/instructions/shared`</span> folder is in the Project's <span class="sb">`.gitignore`</span> file.
Create the file if it doesn't exist. We don't want the shared instructions to be pushed into the project repo.

Create a <span class="sb">`Readme.md`</span> the describes the purpose and use of the scripts.

Put all the files in a <span class="sb">`shared-instructions`</span> folder in the GitHubCopilot repo.
</code></pre></div></div>

<p>This prompt instructs Copilot (or ChatGPT 5) to automate the process of sharing a set of instruction files across multiple projects by generating platform-specific scripts. The scripts are designed to create either a symbolic link (symlink) or a junction point from a project repository to a central instructions folder in the GitHubCopilot repo. For Linux and macOS, the scripts use symlinks, while on Windows, they use NTFS junctions via PowerShell’s New-Item -ItemType Junction. The prompt also requires the scripts to ensure that the shared instructions folder is listed in the project’s <code class="language-plaintext highlighter-rouge">.gitignore</code> file, preventing accidental commits of shared files.</p>

<p>Copilot and ChatGPT 5 interpret this prompt as a request for practical automation tools that streamline collaboration and maintain consistency across development environments. They recognize the need for cross-platform compatibility, idempotency, and version control hygiene. The prompt’s instructions lead them to generate three scripts (one for each OS) and a README file, all organized in a shared-instructions folder. The resulting solution enables teams to easily link to and update shared instruction files, reducing duplication and simplifying maintenance.</p>

<p>Here is the README.md file generated from the prompt:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Shared Instructions Symlink/Junction Scripts</span>

These scripts create a platform-appropriate link from a Project repository to the shared <span class="sb">`instructions`</span> folder
that lives in the <span class="sb">`GitHubCopilot`</span> repo. This lets multiple projects reuse a single, centrally maintained set
of instruction files without copying them.
</code></pre></div></div>

<p>Link layout created:</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;ProjectRepo&gt;</span>/github/instructions/shared -&gt; <span class="nt">&lt;GitHubCopilotRepo&gt;</span>/instructions
</code></pre></div></div>

<p>Platform behavior:</p>

<table>
  <thead>
    <tr>
      <th>Platform</th>
      <th>Mechanism</th>
      <th>Script</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Windows</td>
      <td>NTFS Junction</td>
      <td><code class="language-plaintext highlighter-rouge">create-shared-link-windows.ps1</code></td>
    </tr>
    <tr>
      <td>Linux</td>
      <td>Symbolic link</td>
      <td><code class="language-plaintext highlighter-rouge">create-shared-link-linux.sh</code></td>
    </tr>
    <tr>
      <td>macOS</td>
      <td>Symbolic link</td>
      <td><code class="language-plaintext highlighter-rouge">create-shared-link-mac.sh</code></td>
    </tr>
  </tbody>
</table>

<p>The destination path inside the Project repo (<code class="language-plaintext highlighter-rouge">github/instructions/shared/</code>) is automatically added (or appended)
to the Project repository’s <code class="language-plaintext highlighter-rouge">.gitignore</code> so linked files are never committed to the Project repository.</p>

<h2 id="why-a-junction-on-windows">Why a Junction on Windows?</h2>

<p>Junctions avoid some permission / policy issues that can affect symlinks on Windows machines without Developer Mode enabled. They behave like directory symlinks for our purpose.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>You have both the Project repo and the <code class="language-plaintext highlighter-rouge">GitHubCopilot</code> repo cloned locally.</li>
  <li>PowerShell 5+ (Windows script) or bash + Python 3 (for relative path computation) on Linux/macOS. (If Python 3 is not available, omit <code class="language-plaintext highlighter-rouge">--relative</code>.)</li>
</ul>

<h2 id="parameters">Parameters</h2>

<p>All scripts require the root path of both repositories.</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Windows</th>
      <th>Linux/macOS</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GitHubCopilotRepo / –copilot</td>
      <td>Required</td>
      <td>Required</td>
      <td>Path to the <code class="language-plaintext highlighter-rouge">GitHubCopilot</code> repo root (where <code class="language-plaintext highlighter-rouge">./instructions</code> exists).</td>
    </tr>
    <tr>
      <td>ProjectRepo / –project</td>
      <td>Required</td>
      <td>Required</td>
      <td>Path to the Project repo root (where <code class="language-plaintext highlighter-rouge">./github/instructions/shared</code> will be created).</td>
    </tr>
    <tr>
      <td>-Force / –force</td>
      <td>Optional</td>
      <td>Optional</td>
      <td>Replace existing destination (if mismatch or not link).</td>
    </tr>
    <tr>
      <td>–relative</td>
      <td>n/a</td>
      <td>Optional</td>
      <td>Create a relative symlink instead of an absolute one.</td>
    </tr>
  </tbody>
</table>

<h2 id="usage-examples">Usage Examples</h2>

<h3 id="windows-powershell">Windows (PowerShell)</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cd</span><span class="w"> </span><span class="nx">C:\git\GitHubCopilot\shared-instructions</span><span class="w">
</span><span class="o">.</span><span class="n">/create-shared-link-windows.ps1</span><span class="w"> </span><span class="nt">-GitHubCopilotRepo</span><span class="w"> </span><span class="nx">C:\git\GitHubCopilot</span><span class="w"> </span><span class="nt">-ProjectRepo</span><span class="w"> </span><span class="nx">C:\git\MyProject</span><span class="w">

</span><span class="c"># Force recreation</span><span class="w">
</span><span class="o">.</span><span class="n">/create-shared-link-windows.ps1</span><span class="w"> </span><span class="nt">-GitHubCopilotRepo</span><span class="w"> </span><span class="o">..</span><span class="nx">\GitHubCopilot</span><span class="w"> </span><span class="nt">-ProjectRepo</span><span class="w"> </span><span class="nx">C:\git\MyProject</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
</span></code></pre></div></div>

<h3 id="linux">Linux</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/git/GitHubCopilot/shared-instructions
./create-shared-link-linux.sh <span class="nt">--copilot</span> ~/git/GitHubCopilot <span class="nt">--project</span> ~/git/MyProject

<span class="c"># Relative link, force recreate</span>
./create-shared-link-linux.sh <span class="nt">--copilot</span> ~/git/GitHubCopilot <span class="nt">--project</span> ~/git/MyProject <span class="nt">--relative</span> <span class="nt">--force</span>
</code></pre></div></div>

<h3 id="macos">macOS</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~/git/GitHubCopilot/shared-instructions
./create-shared-link-mac.sh <span class="nt">--copilot</span> ~/git/GitHubCopilot <span class="nt">--project</span> ~/git/MyProject
</code></pre></div></div>

<h2 id="idempotency">Idempotency</h2>

<p>Running a script again will leave an already-correct link untouched (unless <code class="language-plaintext highlighter-rouge">--force</code> / <code class="language-plaintext highlighter-rouge">-Force</code> is specified) and will still ensure the <code class="language-plaintext highlighter-rouge">.gitignore</code> entry exists.</p>

<h2 id="gitignore-handling">.gitignore Handling</h2>

<p>The following entry is ensured inside the Project repo <code class="language-plaintext highlighter-rouge">.gitignore</code> (file created if missing):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>github/instructions/shared/
</code></pre></div></div>

<h2 id="troubleshooting">Troubleshooting</h2>

<ul>
  <li>Destination exists and is not a link: Re-run with <code class="language-plaintext highlighter-rouge">-Force</code> / <code class="language-plaintext highlighter-rouge">--force</code>.</li>
  <li>Permission errors on Windows: Ensure PowerShell is running with adequate permissions.</li>
  <li>Symlink creation denied on Windows: Junctions should bypass typical symlink permission issues; if problems persist, check antivirus or corporate policy restrictions.</li>
</ul>

<h2 id="removal">Removal</h2>

<p>Simply delete the destination path inside the Project repo:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Remove-Item</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">ProjectRepo</span><span class="err">&gt;</span><span class="nx">\github\instructions\shared</span><span class="w"> </span><span class="nt">-Recurse</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
</span></code></pre></div></div>

<p>or</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> &lt;ProjectRepo&gt;/github/instructions/shared
</code></pre></div></div>

<h2 id="maintenance">Maintenance</h2>

<p>If new shared instruction files are added to <code class="language-plaintext highlighter-rouge">GitHubCopilot/instructions</code>, they become available to all linked projects immediately—no changes needed in individual projects.</p>

<p>A small clarification on the maintenance. New shared instruction files added to <code class="language-plaintext highlighter-rouge">GitHubCopilot/instructions</code> will not automatically be available in all linked projects without any additional steps. They become available after a pull from the repo.</p>

<h3 id="linux-script-create-shared-link-linuxsh">Linux Script (<code class="language-plaintext highlighter-rouge">create-shared-link-linux.sh</code>)</h3>

<p>Here is the Linux script generated from the prompt:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># Creates (or refreshes) a symbolic link in the Project repo pointing to the</span>
<span class="c"># ./instructions folder in the GitHubCopilot repo.</span>
<span class="c">#</span>
<span class="c"># Destination (link created): &lt;ProjectRepo&gt;/github/instructions/shared</span>
<span class="c"># Source (link target):       &lt;GitHubCopilotRepo&gt;/instructions</span>
<span class="c">#</span>
<span class="c"># Arguments:</span>
<span class="c">#   --copilot &lt;path&gt;   Path to GitHubCopilot repo root (where ./instructions exists)</span>
<span class="c">#   --project &lt;path&gt;   Path to Project repo root (where ./github/instructions/shared will be created)</span>
<span class="c">#   --force            Remove and recreate existing destination if present</span>
<span class="c">#   --relative         Create a relative symlink (default: absolute)</span>
<span class="c">#</span>
<span class="c"># Example:</span>
<span class="c">#   ./create-shared-link-linux.sh --copilot ../GitHubCopilot --project . --relative</span>

<span class="nb">set</span> +u
<span class="nv">FORCE</span><span class="o">=</span>0
<span class="nv">RELATIVE</span><span class="o">=</span>0
<span class="nv">COPILOT</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">""</span>
<span class="nb">set</span> <span class="nt">-u</span>

<span class="k">while</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-gt</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">do
  case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in</span>
    <span class="nt">--copilot</span><span class="p">)</span> <span class="nv">COPILOT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--project</span><span class="p">)</span> <span class="nv">PROJECT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--force</span><span class="p">)</span> <span class="nv">FORCE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">--relative</span><span class="p">)</span> <span class="nv">RELATIVE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">-h</span><span class="p">|</span><span class="nt">--help</span><span class="p">)</span>
      <span class="nb">grep</span> <span class="s1">'^#'</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> | <span class="nb">sed</span> <span class="s1">'s/^# //'</span>
      <span class="nb">exit </span>0
      <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Unknown arg: </span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done

if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">||</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"--copilot and --project are required"</span> <span class="o">&gt;</span>&amp;2
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">COPILOT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>

<span class="nv">SOURCE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">/instructions"</span>
<span class="nv">DEST_PARENT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/github/instructions"</span>
<span class="nv">DEST</span><span class="o">=</span><span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">/shared"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"Source instructions folder not found: </span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  if</span> <span class="o">[[</span> <span class="nv">$FORCE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">rm</span> <span class="nt">-rf</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
  <span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"Destination exists and is not a symlink: </span><span class="nv">$DEST</span><span class="s2"> (use --force)"</span> <span class="o">&gt;</span>&amp;2
    <span class="nb">exit </span>1
  <span class="k">fi
fi

if</span> <span class="o">[[</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">readlink</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span>
  <span class="nv">ABS_TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span> 2&gt;/dev/null <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span> <span class="o">||</span> <span class="nb">true</span><span class="si">)</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$ABS_TARGET</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nv">$FORCE</span> <span class="nt">-ne</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Symlink already correct. Nothing to do."</span>
    <span class="nb">exit </span>0
  <span class="k">else
    </span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
  <span class="k">fi
fi

</span><span class="nv">LINK_TARGET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$RELATIVE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c"># compute relative path from DEST_PARENT to SOURCE</span>
  <span class="nv">LINK_TARGET</span><span class="o">=</span><span class="si">$(</span>python3 - <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&lt;&lt;</span><span class="sh">'</span><span class="no">PY</span><span class="sh">'
import os,sys
base=sys.argv[1]
target=sys.argv[2]
print(os.path.relpath(target, start=base))
</span><span class="no">PY
</span>  <span class="si">)</span>
<span class="k">fi

</span><span class="nb">ln</span> <span class="nt">-s</span> <span class="s2">"</span><span class="nv">$LINK_TARGET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Created symlink: </span><span class="nv">$DEST</span><span class="s2"> -&gt; </span><span class="nv">$LINK_TARGET</span><span class="s2">"</span>

<span class="c"># Ensure .gitignore entry</span>
<span class="nv">GI</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/.gitignore"</span>
<span class="nv">ENTRY</span><span class="o">=</span><span class="s1">'github/instructions/shared/'</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  if</span> <span class="o">!</span> <span class="nb">grep</span> <span class="nt">-Fxq</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">printf</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">%s</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"Appended to .gitignore: </span><span class="nv">$ENTRY</span><span class="s2">"</span>
  <span class="k">fi
else
  </span><span class="nb">printf</span> <span class="s1">'# Added automatically to ignore shared instructions\n%s\n'</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span>
  <span class="nb">echo</span> <span class="s2">"Created .gitignore with entry: </span><span class="nv">$ENTRY</span><span class="s2">"</span>
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"Done."</span>
</code></pre></div></div>

<p>This Bash script automates the creation or refreshing of a symbolic link in a project repository, pointing to an instructions folder in a separate GitHub Copilot repository. Its main purpose is to ensure that the project always has access to shared instructions, without duplicating files.</p>

<p>The script accepts several command-line arguments: –copilot specifies the path to the GitHub Copilot repo, –project specifies the path to the project repo, –force allows overwriting an existing destination, and –relative creates a relative symlink instead of an absolute one. It validates that both source and destination paths are provided and resolves them to absolute paths for reliability.</p>

<p>Before creating the symlink, the script checks if the source directory exists. It then prepares the destination parent directory. If the destination already exists and is not a symlink, it will only remove it if the –force flag is set. If the destination is a symlink but points to the wrong target, it will be replaced. The script can compute a relative path for the symlink using a short Python snippet if requested.</p>

<p>After creating the symlink, the script ensures that the new link is ignored by Git by adding an entry to the project’s <code class="language-plaintext highlighter-rouge">.gitignore</code> file. If the file does not exist, it creates one with the appropriate entry. This prevents accidental commits of the shared instructions link. The script provides clear output messages for each major step, helping users understand what actions were taken.</p>

<h3 id="mac-script-create-shared-link-macsh">Mac Script (<code class="language-plaintext highlighter-rouge">create-shared-link-mac.sh</code>)</h3>

<p>Here is the macOS script generated from the prompt:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="c"># macOS version (identical logic to linux script; kept separate for clarity &amp; customization).</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="c"># See linux script for detailed commentary.</span>

<span class="nb">set</span> +u
<span class="nv">FORCE</span><span class="o">=</span>0
<span class="nv">RELATIVE</span><span class="o">=</span>0
<span class="nv">COPILOT</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="s2">""</span>
<span class="nb">set</span> <span class="nt">-u</span>

<span class="k">while</span> <span class="o">[[</span> <span class="nv">$# </span><span class="nt">-gt</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">do
  case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="k">in</span>
    <span class="nt">--copilot</span><span class="p">)</span> <span class="nv">COPILOT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--project</span><span class="p">)</span> <span class="nv">PROJECT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
    <span class="nt">--force</span><span class="p">)</span> <span class="nv">FORCE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">--relative</span><span class="p">)</span> <span class="nv">RELATIVE</span><span class="o">=</span>1<span class="p">;</span> <span class="nb">shift</span><span class="p">;;</span>
    <span class="nt">-h</span><span class="p">|</span><span class="nt">--help</span><span class="p">)</span>
      <span class="nb">grep</span> <span class="s1">'^#'</span> <span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span> | <span class="nb">sed</span> <span class="s1">'s/^# //'</span>
      <span class="nb">exit </span>0
      <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span> <span class="nb">echo</span> <span class="s2">"Unknown arg: </span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done

if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">||</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"--copilot and --project are required"</span> <span class="o">&gt;</span>&amp;2
  <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">COPILOT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>
<span class="nv">PROJECT</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span><span class="si">)</span>
<span class="nv">SOURCE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$COPILOT</span><span class="s2">/instructions"</span>
<span class="nv">DEST_PARENT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/github/instructions"</span>
<span class="nv">DEST</span><span class="o">=</span><span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">/shared"</span>

<span class="o">[[</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"Source instructions folder not found: </span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="o">}</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  if</span> <span class="o">[[</span> <span class="nv">$FORCE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then </span><span class="nb">rm</span> <span class="nt">-rf</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="p">;</span> <span class="k">else </span><span class="nb">echo</span> <span class="s2">"Destination exists and is not a symlink (use --force): </span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">&gt;</span>&amp;2<span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="k">fi
fi

if</span> <span class="o">[[</span> <span class="nt">-L</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">readlink</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span>
  <span class="nv">ABS_TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">cd</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">dirname</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$TARGET</span><span class="s2">"</span> 2&gt;/dev/null <span class="o">&amp;&amp;</span> <span class="nb">pwd</span> <span class="nt">-P</span> <span class="o">||</span> <span class="nb">true</span><span class="si">)</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$ABS_TARGET</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nv">$FORCE</span> <span class="nt">-ne</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Symlink already correct. Nothing to do."</span><span class="p">;</span> <span class="nb">exit </span>0
  <span class="k">else
    </span><span class="nb">rm</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
  <span class="k">fi
fi

</span><span class="nv">LINK_TARGET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$RELATIVE</span> <span class="nt">-eq</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nv">LINK_TARGET</span><span class="o">=</span><span class="si">$(</span>python3 - <span class="s2">"</span><span class="nv">$DEST_PARENT</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SOURCE</span><span class="s2">"</span> <span class="o">&lt;&lt;</span><span class="sh">'</span><span class="no">PY</span><span class="sh">'
import os,sys
print(os.path.relpath(sys.argv[2], start=sys.argv[1]))
</span><span class="no">PY
</span>  <span class="si">)</span>
<span class="k">fi

</span><span class="nb">ln</span> <span class="nt">-s</span> <span class="s2">"</span><span class="nv">$LINK_TARGET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$DEST</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Created symlink: </span><span class="nv">$DEST</span><span class="s2"> -&gt; </span><span class="nv">$LINK_TARGET</span><span class="s2">"</span>

<span class="nv">GI</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PROJECT</span><span class="s2">/.gitignore"</span>
<span class="nv">ENTRY</span><span class="o">=</span><span class="s1">'github/instructions/shared/'</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">grep</span> <span class="nt">-Fxq</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">printf</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">%s</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">"Appended to .gitignore: </span><span class="nv">$ENTRY</span><span class="s2">"</span><span class="p">;</span> <span class="o">}</span>
<span class="k">else
  </span><span class="nb">printf</span> <span class="s1">'# Added automatically to ignore shared instructions\n%s\n'</span> <span class="s2">"</span><span class="nv">$ENTRY</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$GI</span><span class="s2">"</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">"Created .gitignore with entry: </span><span class="nv">$ENTRY</span><span class="s2">"</span>
<span class="k">fi

</span><span class="nb">echo</span> <span class="s2">"Done."</span>
</code></pre></div></div>

<p>The macOS script and the Linux script are functionally identical. The logic, argument parsing, symlink creation, and .gitignore handling are the same. The scripts are kept separate for clarity and potential future customization, but currently, there are no substantive differences in their code or behavior.</p>

<p>Key Points:</p>

<ul>
  <li>Both scripts use Bash and similar flags (set -euo pipefail).</li>
  <li>Argument parsing and validation are identical.</li>
  <li>Symlink creation and .gitignore updates follow the same steps.</li>
  <li>The only difference is the comment at the top indicating the target OS.</li>
</ul>

<p><em>Gotcha:</em> If you need OS-specific behavior (e.g., handling macOS quirks), you can customize the macOS script independently without affecting the Linux version.</p>

<h3 id="windows-script-create-shared-link-windowsps1">Windows Script (<code class="language-plaintext highlighter-rouge">create-shared-link-windows.ps1</code>)</h3>

<p>Here is the Windows script generated from the prompt:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">&lt;#
Creates (or refreshes) a junction in a Project repo pointing to the shared ./instructions folder
inside this GitHubCopilot repo.

Junction (target created): &lt;ProjectRepo&gt;\github\instructions\shared
Points to (source):        &lt;GitHubCopilotRepo&gt;\instructions

Parameters:
  -GitHubCopilotRepo   Path to the GitHubCopilot repo root (where the ./instructions folder lives)
  -ProjectRepo         Path to the target Project repo root (where ./github/instructions/shared will be created)
  -Force               If specified, will remove any existing file/dir/junction at the destination

Steps performed:
 1. Validate paths
 2. Ensure Project repo ./github/instructions parent folders exist
 3. Ensure destination removed if Force (or is an existing junction to wrong target)
 4. Create junction via New-Item -ItemType Junction
 5. Add github/instructions/shared/ to Project .gitignore (create file if needed)

Usage examples:
  .\create-shared-link-windows.ps1 -GitHubCopilotRepo C:\git\GitHubCopilot -ProjectRepo C:\git\MyProject
  .\create-shared-link-windows.ps1 -GitHubCopilotRepo ..\GitHubCopilot -ProjectRepo . -Force

#&gt;</span><span class="w">
</span><span class="p">[</span><span class="n">CmdletBinding</span><span class="p">(</span><span class="bp">SupportsShouldProcess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="p">)]</span><span class="w">
</span><span class="kr">param</span><span class="p">(</span><span class="w">
    </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="p">)]</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="w"> </span><span class="nv">$GitHubCopilotRepo</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="p">)]</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="w"> </span><span class="nv">$ProjectRepo</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="n">switch</span><span class="p">]</span><span class="w"> </span><span class="nv">$Force</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">Set-StrictMode</span><span class="w"> </span><span class="nt">-Version</span><span class="w"> </span><span class="nx">Latest</span><span class="w">
</span><span class="bp">$Error</span><span class="n">ActionPreference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Stop'</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Resolve-FullPath</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">param</span><span class="p">([</span><span class="n">string</span><span class="p">]</span><span class="nv">$Path</span><span class="p">)</span><span class="w">
    </span><span class="kr">return</span><span class="w"> </span><span class="p">([</span><span class="n">IO.Path</span><span class="p">]::</span><span class="n">GetFullPath</span><span class="p">((</span><span class="n">Resolve-Path</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$Path</span><span class="p">)</span><span class="o">.</span><span class="nf">Path</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Add-GitIgnoreEntry</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">param</span><span class="p">(</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$RepoRoot</span><span class="p">,</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$RelativeEntry</span><span class="w">
    </span><span class="p">)</span><span class="w">
    </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$RepoRoot</span><span class="w"> </span><span class="s1">'.gitignore'</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"# Added automatically to ignore shared instructions</span><span class="se">`n</span><span class="nv">$RelativeEntry</span><span class="se">`n</span><span class="s2">"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-File</span><span class="w"> </span><span class="nt">-FilePath</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="nt">-Encoding</span><span class="w"> </span><span class="nx">utf8</span><span class="w"> </span><span class="nt">-NoNewline</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Created .gitignore and added entry: </span><span class="nv">$RelativeEntry</span><span class="s2">"</span><span class="w">
        </span><span class="kr">return</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="nv">$content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Content</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="nt">-Raw</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$content</span><span class="w"> </span><span class="o">-notmatch</span><span class="w"> </span><span class="p">[</span><span class="n">regex</span><span class="p">]::</span><span class="n">Escape</span><span class="p">(</span><span class="nv">$RelativeEntry</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Add-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$gitIgnorePath</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="s2">"</span><span class="se">`n</span><span class="nv">$RelativeEntry</span><span class="s2">"</span><span class="w"> </span><span class="nt">-Encoding</span><span class="w"> </span><span class="nx">utf8</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Appended to .gitignore: </span><span class="nv">$RelativeEntry</span><span class="s2">"</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">".gitignore already contains entry."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Resolve absolute paths</span><span class="w">
</span><span class="nv">$gitHubCopilotRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resolve-FullPath</span><span class="w"> </span><span class="nv">$GitHubCopilotRepo</span><span class="w">
</span><span class="nv">$projectRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resolve-FullPath</span><span class="w"> </span><span class="nv">$ProjectRepo</span><span class="w">

</span><span class="nv">$source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$gitHubCopilotRoot</span><span class="w"> </span><span class="s1">'instructions'</span><span class="w">
</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$source</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kr">throw</span><span class="w"> </span><span class="s2">"Source instructions folder not found: </span><span class="nv">$source</span><span class="s2">"</span><span class="w"> </span><span class="p">}</span><span class="w">

</span><span class="nv">$destParent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$projectRoot</span><span class="w"> </span><span class="s1">'github/instructions'</span><span class="w">
</span><span class="nv">$dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Join-Path</span><span class="w"> </span><span class="nv">$destParent</span><span class="w"> </span><span class="s1">'shared'</span><span class="w">

</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$destParent</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Creating parent directories: </span><span class="nv">$destParent</span><span class="s2">"</span><span class="w">
    </span><span class="n">New-Item</span><span class="w"> </span><span class="nt">-ItemType</span><span class="w"> </span><span class="nx">Directory</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$destParent</span><span class="w"> </span><span class="nt">-Force</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Remove-ExistingDestination</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nv">$item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
        </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$item</span><span class="o">.</span><span class="nf">Attributes</span><span class="w"> </span><span class="o">-band</span><span class="w"> </span><span class="p">[</span><span class="n">IO.FileAttributes</span><span class="p">]::</span><span class="n">ReparsePoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Removing existing junction: </span><span class="nv">$dest</span><span class="s2">"</span><span class="w">
            </span><span class="n">Remove-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$Force</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Removing existing non-junction item at destination due to -Force: </span><span class="nv">$dest</span><span class="s2">"</span><span class="w">
                </span><span class="n">Remove-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Recurse</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
            </span><span class="p">}</span><span class="w">
            </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="kr">throw</span><span class="w"> </span><span class="s2">"Destination exists and is not a junction. Use -Force to remove: </span><span class="nv">$dest</span><span class="s2">"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$dest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nv">$existing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Item</span><span class="w"> </span><span class="nt">-LiteralPath</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$existing</span><span class="o">.</span><span class="nf">Attributes</span><span class="w"> </span><span class="o">-band</span><span class="w"> </span><span class="p">[</span><span class="n">IO.FileAttributes</span><span class="p">]::</span><span class="n">ReparsePoint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="c"># Try to read target (fsutil works on admin shells; fallback simply recreate if Force)</span><span class="w">
        </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$false</span><span class="w">
        </span><span class="kr">try</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nv">$targetInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">fsutil</span><span class="w"> </span><span class="nx">reparsepoint</span><span class="w"> </span><span class="nx">query</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nx">2</span><span class="err">&gt;</span><span class="bp">$null</span><span class="p">)</span><span class="w">
            </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$targetInfo</span><span class="w"> </span><span class="o">-match</span><span class="w"> </span><span class="s1">'Print Name: (?&lt;t&gt;.+)$'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nv">$currentTarget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$Matches</span><span class="p">[</span><span class="s1">'t'</span><span class="p">]</span><span class="w">
                </span><span class="kr">if</span><span class="w"> </span><span class="p">((</span><span class="n">Resolve-FullPath</span><span class="w"> </span><span class="nv">$currentTarget</span><span class="p">)</span><span class="w"> </span><span class="o">-ne</span><span class="w"> </span><span class="nv">$source</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
            </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="kr">catch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">$true</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$needsReplace</span><span class="w"> </span><span class="o">-or</span><span class="w"> </span><span class="nv">$Force</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">Remove-ExistingDestination</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Junction already points to desired source. Nothing to do."</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
            </span><span class="n">Add-GitIgnoreEntry</span><span class="w"> </span><span class="nt">-RepoRoot</span><span class="w"> </span><span class="nv">$projectRoot</span><span class="w"> </span><span class="nt">-RelativeEntry</span><span class="w"> </span><span class="s1">'github/instructions/shared/'</span><span class="w">
            </span><span class="kr">return</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Remove-ExistingDestination</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Creating junction: </span><span class="nv">$dest</span><span class="s2"> -&gt; </span><span class="nv">$source</span><span class="s2">"</span><span class="w">
</span><span class="n">New-Item</span><span class="w"> </span><span class="nt">-ItemType</span><span class="w"> </span><span class="nx">Junction</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$dest</span><span class="w"> </span><span class="nt">-Target</span><span class="w"> </span><span class="nv">$source</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
</span><span class="nx">Write-Host</span><span class="w"> </span><span class="s2">"Junction created successfully."</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">

</span><span class="n">Add-GitIgnoreEntry</span><span class="w"> </span><span class="nt">-RepoRoot</span><span class="w"> </span><span class="nv">$projectRoot</span><span class="w"> </span><span class="nt">-RelativeEntry</span><span class="w"> </span><span class="s1">'github/instructions/shared/'</span><span class="w">

</span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"Done."</span><span class="w">
</span></code></pre></div></div>

<p>The Windows script (<code class="language-plaintext highlighter-rouge">create-shared-link-windows.ps1</code>) and the MacOS script (<code class="language-plaintext highlighter-rouge">create-shared-link-macos.sh</code>) both create a link from a project repo to a shared instructions folder, but they differ in several key ways aside from language and platform-specific commands.</p>

<h4 id="link-type">Link Type</h4>

<p>Windows: Creates a NTFS junction using PowerShell’s New-Item -ItemType Junction.
MacOS: Creates a symbolic link using <code class="language-plaintext highlighter-rouge">ln -s</code> in Bash.</p>

<h4 id="existing-destination-handling">Existing Destination Handling</h4>

<p>Windows: Checks if the destination is a junction or another file type, removes or throws errors accordingly, supports a <code class="language-plaintext highlighter-rouge">-Force</code> flag.
MacOS: Removes existing destination with <code class="language-plaintext highlighter-rouge">rm -rf</code> if the <code class="language-plaintext highlighter-rouge">--force</code> flag is set.</p>

<h2 id="summary">Summary</h2>

<p>The Windows script is more complex due to NTFS junctions and PowerShell features, while the MacOS script is simpler, relying on Unix symlinks and shell commands. Both achieve the same goal but are tailored to their respective operating systems.</p>

<p>Running the scripts requires appropriate permissions, especially for creating links and modifying directories. Users should ensure they have the necessary rights to execute these scripts in their environments.</p>

<p>This solution provides a simple way of sharing instruction files across multiple projects without duplication, ensuring consistency and ease of maintenance.</p>

<h2 id="feedback-loop">Feedback Loop</h2>

<p>Feedback is always welcome. Please direct it to <a href="mailto:AIP@pdata.com" target="_blank">AIP@pdata.com</a></p>

<h3 id="disclaimer">Disclaimer</h3>

<p>AI contributed to the writing to this blog post, but humans reviewed it, refined it, enhanced it and gave it soul.</p>

<p>Prompts:</p>

<ul>
  <li>Write a two paragraph introduction to GitHub copilot instruction files</li>
  <li>/explain</li>
  <li>Write a paragraph describing where instruction files can be located and the pros and cons of each location.</li>
  <li>What is a symlink and junction point?</li>
  <li>Describe the differences between the Linux script and the maCOS script</li>
</ul>

<p><small><small><small>Original <a href="https://www.codemag.com/blog/AIPractitioner/SIWT">post</a></small></small></small></p>

  </div><a class="u-url" href="/SIWT/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">AI Practitioner</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">John Michael Miller</li><li><a class="u-email" href="mailto:AIPractitioner@pdata.com">AIPractitioner@pdata.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>jMM&#39;s AI Practitioner Blog</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
